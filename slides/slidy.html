<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Stepan Rutz" />
  <meta name="date" content="2024-01-01" />
  <title>Qt Grundlagen</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Qt Grundlagen</h1>
  <p class="author">
Stepan Rutz
  </p>
  <p class="date">2024</p>
</div>
<div id="inhalt" class="slide section level1">
<h1>1.0 Inhalt</h1>
<ul>
<li>1.1 Ziele und Erwartungen der Teilnehmenden / Klärung individueller
Lernziele und Erwartungen für ein praxisnahes und relevantes
Seminar</li>
<li>2.1 Einführung in das Qt Framework / Was ist Qt?</li>
<li>2.2 Einführung in das Qt Framework / Warum Qt verwenden?</li>
<li>2.3 Einführung in das Qt Framework / Einführung in die
Qt-Entwicklungsumgebung</li>
<li>3.1 Erste Schritte mit Qt / Installieren Sie Qt auf Ihrem
Computer</li>
<li>3.2 Erste Schritte mit Qt / Erstellen Sie ein neues Qt-Projekt</li>
<li>3.3 Erste Schritte mit Qt / Entwickeln Sie Ihre erste
Qt-Anwendung</li>
<li>4.1 Qt-Grundlagen / Einführung in Qt Creator</li>
<li>4.2 Qt-Grundlagen / QML und Qt Quick</li>
<li>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</li>
<li>4.4 Qt-Grundlagen / Widgetentwicklung</li>
<li>4.5 Qt-Grundlagen / Layouts und Stile</li>
<li>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</li>
<li>5.2 Fortgeschrittene Qt-Themen / Verwendung von Datenbanken mit
Qt</li>
<li>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</li>
<li>5.4 Fortgeschrittene Qt-Themen / Erweiterung von Qt mit Plugins</li>
<li>6.1 Veröffentlichung Ihrer Qt-Anwendung / Erstellen Sie ein
Installationsprogramm</li>
</ul>
</div>
<div id="agenda" class="slide section level1">
<h1>1.2 Agenda</h1>
<h2 id="tag-1-qt-grundlagen-und-objektsystem">Tag 1: Qt Grundlagen und
Objektsystem</h2>
<h3 id="vormittag">Vormittag</h3>
<h4 id="qobject-system">QObject-System</h4>
<ul>
<li>Vererbungshierarchie</li>
<li>Meta-Object-System (moc)</li>
<li>Property-System</li>
<li>Parent-Child-Beziehungen</li>
<li>Memory Management in Qt</li>
</ul>
<h4 id="signals-und-slots">Signals und Slots</h4>
<ul>
<li>Konzept und Syntax</li>
<li>Connection Types (Direct, Queued, Blocking)</li>
<li>Lambda-Connections</li>
<li>Custom Signals und Slots</li>
</ul>
<h3 id="nachmittag">Nachmittag</h3>
<h4 id="qt-value-classes">Qt Value Classes</h4>
<ul>
<li>QString (Unicode, Encodings, String-Operationen)</li>
<li>QByteArray (Binärdaten, Konvertierungen)</li>
<li>QVariant (Type-System, Konvertierungen)</li>
<li>Container-Klassen (QList, QVector, QMap)</li>
</ul>
<h4 id="praktische-übungen">Praktische Übungen</h4>
<ul>
<li>Implementierung von Signal-Slot-Systemen</li>
<li>String- und Datenverarbeitung</li>
<li>Container-Nutzung</li>
</ul>
<h2 id="tag-2-multithreading-und-datenbanken">Tag 2: Multithreading und
Datenbanken</h2>
<h3 id="vormittag-1">Vormittag</h3>
<h4 id="qt-threading-basics">Qt Threading Basics</h4>
<ul>
<li>QThread-Konzepte</li>
<li>Thread-Affinity</li>
<li>Event Loop und Thread-Safety #### Worker-Patterns</li>
<li>MoveToThread-Pattern</li>
<li>Worker Object Pattern</li>
<li>Thread Pools #### Thread-Kommunikation</li>
<li>Signals über Thread-Grenzen</li>
<li>Queued Connections</li>
<li>Thread-sichere Datenübergabe</li>
</ul>
<h3 id="nachmittag-1">Nachmittag</h3>
<h4 id="qt-sql-module">Qt SQL Module</h4>
<ul>
<li>QSqlDatabase und Treiber</li>
<li>Verbindungsaufbau und -verwaltung</li>
<li>QSqlQuery und Prepared Statements</li>
<li>QSqlQueryModel</li>
<li>Transaktionen #### Praktische Übungen</li>
<li>Worker mit Datenbankzugriff</li>
<li>String-Verarbeitung mit Datenbankdaten</li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="qt-ist-ein-c-gui-framework">QT ist ein C++ GUI-Framework</h2>
<ul>
<li>Initial sehr stark mit KDE Desktop verbunden</li>
<li>Qt vereinfacht die C++ Entwicklung</li>
<li>Qt hat mächtige Features und Widgets</li>
<li>Qt ist ein Ökosystem</li>
<li>Qt ist Multi-Plattform und Cross-Plattform</li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-1"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="opensource-version">Opensource version</h2>
<p><a
href="https://www.qt.io/download-qt-installer-oss">https://www.qt.io/download-qt-installer-oss</a></p>
<ul>
<li>Der Installer benötigt einen Account bei Qt.</li>
<li>Das Maintenance Tool ist Teil des Installers und wird für Updates
und für das Nachinstallieren von Komponenten benötigt.</li>
</ul>
<h2 id="commercial-version">Commercial version</h2>
<ul>
<li>Tools, Add-ons, besonders für Embedded-Devices.</li>
<li>Statisches Linken</li>
<li>Kein Opensource-Zwang</li>
</ul>
<h2 id="qt-versionen">Qt Versionen</h2>
<ul>
<li><p>Qt 5.15 LTS (Long Term Support) (noch aktuell benutzbar)</p></li>
<li><p>Qt 6.0 (aktuell)</p></li>
<li><p>Beide Versionen sind weitgehend kompatibel. Moderne C++
Entwicklung ist mit beiden Varianten möglich.</p></li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-2"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="which-way-weitere-alternativen-in-der-qt-welt">Which way?
(Weitere Alternativen in der Qt-Welt)</h2>
<ul>
<li>Python vs. C++</li>
<li>qmake vs. CMake</li>
<li>QtGui vs QtQuick/QML</li>
<li>Qt Creator vs. other Editors/IDEs</li>
<li>Develop on Linux vs. Windows</li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-3"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="qt-und-c">Qt und C++</h2>
<ul>
<li>Qt ist native C++ und nur hier bekommt man das volle Potential</li>
<li>C++ selber ist erst in letzter Zeit besser geworden:<br />
C++11: Lambda, Typeinferenz/Auto, std::move, ranges, Tupel,
SmartPointers, Initializerlists<br />
C++14: Lambda++, decltype<br />
C++17: Filesystem library, std::string_view, parallel algorithms<br />
C++20: std::range, new literals, co-routines (async/await)</li>
<li>Keine Garbage Collection<br />
Tipp bei Problemen: Valgrind</li>
<li>Trotz Verbesserungen nur begrenzte Standard-Bibliothek</li>
</ul>
<p>Achtung: Qt hat eigene Implementierungen von Features der
Standardbibliothek wie QVector, QSharedPointer etc und ist gleichzeitig
stark interoperabel mit Standard C++.</p>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-4"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="c17">C++17</h2>
<p>Qt verwendet C++17, wobei C++20 möglich ist. Interessante
Konstrukte/Idiome aus C++17 die in Qt genutzt werden sind:</p>
<ul>
<li>C++ Attribute [[nodiscard]]</li>
<li>noexcept Operator (seit C++11)</li>
<li>auto (C++11)</li>
<li>constexpr (C++11)</li>
<li>decltype (C++11)</li>
<li>Neue APIs: chrono, random, regex, thread, tuple, array, future,
chrono</li>
<li>Initialisierer Ausdrücke:</li>
</ul>
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">struct</span> P <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="kw">auto</span> p <span class="op">=</span> P<span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="op">.</span>x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="op">.</span>y <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="kw">auto</span> a1 <span class="op">=</span> <span class="bu">std::</span>array<span class="op">&lt;</span><span class="dt">int</span><span class="op">,</span><span class="dv">2</span><span class="op">&gt;{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span></code></pre></div>
<ul>
<li>Destrucuring aka Structured Bindings <a
href="https://www.fluentcpp.com/2018/06/19/3-simple-c17-features-that-will-make-your-code-simpler/">c17-features-that-make-your-code-simpler/</a></li>
</ul>
<div class="sourceCode" id="cb2"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">auto</span> p <span class="op">=</span> Point<span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">auto</span> <span class="op">[</span>z<span class="op">,</span> y<span class="op">]</span> <span class="op">=</span> p<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">std::</span>array<span class="op">&lt;</span><span class="dt">int</span><span class="op">,</span> <span class="dv">4</span><span class="op">&gt;</span> arr <span class="op">=</span> <span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">300</span><span class="op">,</span> <span class="dv">400</span><span class="op">};</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">auto</span> <span class="op">[</span>a1<span class="op">,</span> b1<span class="op">,</span> c1<span class="op">,</span> d1<span class="op">]</span> <span class="op">=</span> arr<span class="op">;</span></span></code></pre></div>
<h2 id="c17-continued">C++17 continued</h2>
<ul>
<li>std::optional ist ein weiteres populäres Feature in C++17</li>
</ul>
<div class="sourceCode" id="cb4"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">// Beispiel für std::optional mit Qt</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">std::</span>optional<span class="op">&lt;</span><span class="ex">QString</span><span class="op">&gt;</span> findUser<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="ex">QSqlQuery</span> query<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    query<span class="op">.</span>prepare<span class="op">(</span><span class="st">&quot;SELECT name FROM users WHERE id = ?&quot;</span><span class="op">);</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    query<span class="op">.</span>addBindValue<span class="op">(</span>id<span class="op">);</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    </span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>query<span class="op">.</span>exec<span class="op">()</span> <span class="op">&amp;&amp;</span> query<span class="op">.</span>next<span class="op">())</span> <span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>        <span class="cf">return</span> query<span class="op">.</span>value<span class="op">(</span><span class="dv">0</span><span class="op">).</span>toString<span class="op">();</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">std::</span>nullopt<span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">// Verwendung mit Qt</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="kw">auto</span> username <span class="op">=</span> findUser<span class="op">(</span><span class="st">&quot;123&quot;</span><span class="op">);</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>username<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Found user:&quot;</span> <span class="op">&lt;&lt;</span> <span class="op">*</span>username<span class="op">;</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-5"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="dokumentation-und-weitere-infos">Dokumentation und weitere
Infos</h2>
<h3 id="canonical-docs">Canonical Docs</h3>
<p><a href="https://doc.qt.io/">https://doc.qt.io/</a></p>
<h3 id="empfehlungen">Empfehlungen</h3>
<ul>
<li>C++ GUI Programming with Qt 4 (2nd Edition) - The official C++/Qt
book</li>
<li><a
href="https://github.com/mikeroyal/Qt-Guide">https://github.com/mikeroyal/Qt-Guide</a></li>
<li><a
href="https://www.youtube.com/watch?v=g7yijWiZTmI&amp;list=PL6CJYn40gN6iFcTyItvnE5nOmJR8qk_7o">Kurs
zu QtWidgets von KDAB</a></li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-was-ist-qt-6"
class="slide section level1">
<h1>2.1 Einführung in das Qt Framework / Was ist Qt?</h1>
<h2 id="dokumentation-und-weitere-infos-1">Dokumentation und weitere
Infos</h2>
<h3 id="weitere-bücher-zu-qt">Weitere Bücher zu Qt</h3>
<ul>
<li>Qt5 C++ GUI Programming Cookbook - Second Edition</li>
</ul>
<h3 id="bücher-und-links-zu-c">Bücher und Links zu C++</h3>
<ul>
<li>Die C++ Programmiersprache von Bjarne Stroustrup</li>
<li>Effective Modern C++ by Scott Meyers</li>
<li><a href="https://cplusplus.com/">https://cplusplus.com/</a></li>
<li><a href="https://www.fluentcpp.com/posts/">Fluent C++</a></li>
<li><a href="https://www.youtube.com/user/cppcon">Cpp Con Videos</a>
(Empfehlung: Alle Back to Basics Videos)</li>
<li><a href="https://en.cppreference.com/w/">Cpp Reference</a></li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-warum-qt-verwenden"
class="slide section level1">
<h1>2.2 Einführung in das Qt Framework / Warum Qt verwenden?</h1>
<h2 id="warum-qt-verwenden">Warum Qt verwenden?</h2>
<p>Das beste C++ Framework mit Unterstützung für:</p>
<ul>
<li>3D (OpenGL, Vulcan), 2D, Webengines, Device-Unterstützung, SQL</li>
<li>Multimedia, QML</li>
<li>Base-Library</li>
<li>Eigener Technologiezyklus + Guter Geschmack</li>
<li>&gt; 20 Jahre Verlässlichkeit</li>
<li>Momentum</li>
</ul>
</div>
<div id="einführung-in-das-qt-framework-warum-qt-verwenden-1"
class="slide section level1">
<h1>2.2 Einführung in das Qt Framework / Warum Qt verwenden?</h1>
<h2 id="bekannte-qt-anwendungenanwender">Bekannte
Qt-Anwendungen/Anwender</h2>
<ul>
<li>KDE Desktop</li>
<li>VLC Media Player</li>
<li>VirtualBox</li>
<li>Autodesk Maya</li>
<li>Google Earth</li>
<li>Tesla</li>
<li>Mercedes-Benz User Experience (MBUX)</li>
<li>LG WebOS</li>
<li>Samsung Smart TV</li>
<li>Autodesk AutoCAD</li>
</ul>
</div>
<div
id="einführung-in-das-qt-framework-einführung-in-die-qt-entwicklungsumgebung"
class="slide section level1">
<h1>2.3 Einführung in das Qt Framework / Einführung in die
Qt-Entwicklungsumgebung</h1>
<h2 id="einführung-in-die-qt-entwicklungsumgebung">Einführung in die
Qt-Entwicklungsumgebung</h2>
<p><code>Qt Creator</code> ist die Entwicklungsumgebung.</p>
<p>Großes Commitment von Qt und sehr leistungsfähige IDE.</p>
<ul>
<li>IDE bedeutet, dass man seinen ganzen Tag in dem Tool verbringt</li>
<li>CoPilot muss als Plugin aktiviert werden und verwendet Vim + Node.js
Infrastruktur</li>
</ul>
<p>Man kann für die Qt-Entwicklung Vim, Neovim, Emacs,
VisualStudio-Code, Visualstudio verwenden.</p>
</div>
<div
id="einführung-in-das-qt-framework-einführung-in-die-qt-entwicklungsumgebung-1"
class="slide section level1">
<h1>2.3 Einführung in das Qt Framework / Einführung in die
Qt-Entwicklungsumgebung</h1>
<h2 id="qmake-und-cmake">QMake und CMake</h2>
<ul>
<li><p>Qt unterstützt QMake und CMake. QMake ist ein Make-System das von
Qt selber stammt. QMake ist beliebt aufgrund der Einfachheit während
CMake beliebt ist aufgrund seiner Flexibilität.</p></li>
<li><p>Die Empfehlung ist, CMake zu verwenden, da es eine breitere
Unterstützung hat und auch in anderen Projekten verwendet wird. Außerdem
gibt es viele Plugins für CMake, um externe Bibliotheken zu
integrieren.</p></li>
<li><p>CMake ist auch in der Lage, Projekte für verschiedene IDEs zu
generieren, wie z.B. Visual Studio, Xcode, Eclipse, etc.</p></li>
<li><p>CMake ist jedoch relativ komplex und prinzipiell nur ein Tool
welches Makefiles generiert. Diese Makefiles führen dann die eigentliche
Kompilierung durch.</p></li>
</ul>
</div>
<div
id="einführung-in-das-qt-framework-einführung-in-die-qt-entwicklungsumgebung-2"
class="slide section level1">
<h1>2.3 Einführung in das Qt Framework / Einführung in die
Qt-Entwicklungsumgebung</h1>
<h2 id="cmake-beispiel">CMake Beispiel</h2>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">cmake_minimum_required</span><span class="er">(</span><span class="ex">VERSION</span> 3.15<span class="kw">)</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">project</span><span class="er">(</span><span class="ex">MyApp</span> VERSION 1.0 LANGUAGES CXX<span class="kw">)</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="bu">set</span><span class="er">(</span><span class="ex">CMAKE_CXX_STANDARD</span> 17<span class="kw">)</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="bu">set</span><span class="er">(</span><span class="ex">CMAKE_CXX_STANDARD_REQUIRED</span> ON<span class="kw">)</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="bu">set</span><span class="er">(</span><span class="ex">CMAKE_AUTOMOC</span> ON<span class="kw">)</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="bu">set</span><span class="er">(</span><span class="ex">CMAKE_AUTORCC</span> ON<span class="kw">)</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="bu">set</span><span class="er">(</span><span class="ex">CMAKE_AUTOUIC</span> ON<span class="kw">)</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="ex">find_package</span><span class="er">(</span><span class="ex">Qt6</span> REQUIRED COMPONENTS </span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>    <span class="ex">Core</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>    <span class="ex">Gui</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>    <span class="ex">Widgets</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>    <span class="ex">Network</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>    <span class="ex">Sql</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="kw">)</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co"># Hauptanwendung</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="ex">add_executable</span><span class="er">(</span><span class="ex">MyApp</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>    <span class="ex">src/main.cpp</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>    <span class="ex">src/mainwindow.cpp</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>    <span class="ex">src/widgets/customwidget.cpp</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>    <span class="ex">src/utils/logger.cpp</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>    <span class="ex">resources/resources.qrc</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="kw">)</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="ex">target_link_libraries</span><span class="er">(</span><span class="ex">MyApp</span> PRIVATE</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>    <span class="ex">Qt6::Core</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>    <span class="ex">Qt6::Gui</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>    <span class="ex">Qt6::Widgets</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a>    <span class="ex">Qt6::Network</span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a>    <span class="ex">Qt6::Sql</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="kw">)</span></span></code></pre></div>
</div>
<div
id="einführung-in-das-qt-framework-einführung-in-die-qt-entwicklungsumgebung-3"
class="slide section level1">
<h1>2.3 Einführung in das Qt Framework / Einführung in die
Qt-Entwicklungsumgebung</h1>
<h2 id="tools">Tools</h2>
<ul>
<li>GDB (Gnu Debugger), unterstützt C++ und auch remote Debugging.</li>
<li>KDiff3, alternative zu Meld und unterstützt 3-Wege Merge und ist ein
gutes Beispiel für ein Qt-Programm</li>
<li>Valgrind, Memory Leak Detection und finden von
Speicherzugriffsfehlern</li>
</ul>
<p>Perf benötigt root und sampled (wenig overhead) Valgrind benötigt
kein root und instrumentiert (sehr viel overhead)</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">valgrind</span> <span class="at">--leak-check</span><span class="op">=</span>full <span class="at">--track-origins</span><span class="op">=</span>yes <span class="at">--verbose</span> <span class="at">--log-file</span><span class="op">=</span>valgrind-out.txt ./myprogram</span></code></pre></div>
</div>
<div id="erste-schritte-mit-qt-installieren-sie-qt-auf-ihrem-computer"
class="slide section level1">
<h1>3.1 Erste Schritte mit Qt / Installieren Sie Qt auf Ihrem
Computer</h1>
<h2 id="download-von-qt">Download von Qt</h2>
<p>Die Opensource Version von Qt ist hier verfügbar:</p>
<ul>
<li><p><a
href="https://www.qt.io/download-qt-installer-oss">https://www.qt.io/download-qt-installer-oss</a></p></li>
<li><p>Die Einschränkung der Opensource Version sind:</p>
<pre><code>  - Kein kommerzieller Support
  - Keine kommerzielle Lizenz
  - Keine Zugriff auf zusätzliche Module
  - Kein Zugriff auf zusätzliche Werkzeuge
  - Kein statisches Linken</code></pre></li>
</ul>
<h2 id="qt-entwicklung-mit-linux">Qt Entwicklung mit Linux</h2>
<ul>
<li>Linux Distributionen haben Qt in ihren Repositories und in der Regel
auch die Entwicklungsumgebung Qt Creator.</li>
<li>Die Installation erfolgt über den Paketmanager der Distribution und
ist wie auch bei anderen Programmen nicht so wie vom Hersteller
vorgesehen, sondern an die Philosophie der Distribution angepasst. Dies
bedeutet zum Beispiel das die Shared-Libraries, die Header und die Tools
verteilt in anderen Verzeichnissen liegen als bei der Installation von
Qt Creator von der Qt-Webseite.</li>
</ul>
</div>
<div id="erste-schritte-mit-qt-installieren-sie-qt-auf-ihrem-computer-1"
class="slide section level1">
<h1>3.1 Erste Schritte mit Qt / Installieren Sie Qt auf Ihrem
Computer</h1>
<h2 id="mitgelieferte-beispiele">Mitgelieferte Beispiele</h2>
<ul>
<li>Die Beispielprogramme zeigen viele der Möglichkeiten von Qt und sind
ein guter Ausgangspunkt für eigene Projekte.</li>
</ul>
<h2 id="mitgelieferte-tutorials">Mitgelieferte Tutorials</h2>
<ul>
<li>Die mitgelieferten Tutorials sind eine gute Möglichkeit, um sich mit
Qt vertraut zu machen.</li>
</ul>
<h2 id="qt-maintenance-tool">Qt Maintenance Tool</h2>
<ul>
<li>Das Qt Maintenance Tool wird bei der Installation von Qt
mitinstalliert.</li>
<li>Mit dem Qt Maintenance Tool können Sie Qt aktualisieren und
zusätzliche Versionen und Module nach-installieren.</li>
</ul>
<h2 id="mehrere-versionen-von-qt">Mehrere Versionen von Qt</h2>
<ul>
<li>Es ist möglich und manchmal auch notwendig, mehrere Versionen von Qt
auf Ihrem Computer gleichzeitig zu installieren.</li>
</ul>
<h2 id="was-ist-ein-kit">Was ist ein “Kit”</h2>
<ul>
<li>Ein Kit ist eine Kombination aus Compiler, Debugger und Qt-Version.
<ul>
<li>Compiler: (GCC, Clang, MSVC).</li>
<li>Qt-Version: Die Qt-Bibliotheksversion, die für das Projekt genutzt
wird (z. B. Qt 6.5, Qt 5.15).</li>
<li>Debugger: (z. B. GDB, LLDB).</li>
<li>Gerät/Ziel: Umgebung für die spätere Ausführrung (z. B. Desktop,
Embedded-Geräte, Android, iOS).</li>
<li>CMake/QMake-Konfiguration: Das Build-System und seine
Einstellungen</li>
<li>Toolchain: Die Werkzeugsammlung für die (Cross-)Kompilierung oder
native Entwicklung (z. B. MinGW für Windows, arm-gcc für
Embedded-Entwicklung).</li>
<li>Umgebungsvariablen: Vordefinierte Umgebungsvariablen</li>
</ul></li>
</ul>
</div>
<div id="erste-schritte-mit-qt-erstellen-sie-ein-neues-qt-projekt"
class="slide section level1">
<h1>3.2 Erste Schritte mit Qt / Erstellen Sie ein neues Qt-Projekt</h1>
<h2 id="hello-world">Hello World</h2>
<ul>
<li>Starten Sie <code>Qt Creator</code>.</li>
<li>Wählen Sie <code>File</code> -&gt;
<code>New File or Project</code>.</li>
<li>Wählen Sie <code>Application</code> -&gt;
<code>Qt Widgets Application</code>.</li>
</ul>
</div>
<div id="erste-schritte-mit-qt-entwickeln-sie-ihre-erste-qt-anwendung"
class="slide section level1">
<h1>3.3 Erste Schritte mit Qt / Entwickeln Sie Ihre erste
Qt-Anwendung</h1>
<h2 id="qt-projekt-ohne-qt-creator-erstellen">Qt Projekt ohne Qt Creator
erstellen</h2>
<ul>
<li>Erstellen sie main.cpp mit folgendem Inhalt:</li>
</ul>
<div class="sourceCode" id="cb8"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QWidget&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Hello World&quot;</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="erste-schritte-mit-qt-entwickeln-sie-ihre-erste-qt-anwendung-1"
class="slide section level1">
<h1>3.3 Erste Schritte mit Qt / Entwickeln Sie Ihre erste
Qt-Anwendung</h1>
<h2 id="qt-projekt-mit-cmake-erstellen">Qt Projekt mit CMake
erstellen</h2>
<ul>
<li>Erstellen sie eine CMakeLists.txt Datei mit folgendem Inhalt:</li>
</ul>
<div class="sourceCode" id="cb9"><pre
class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">cmake_minimum_required</span>(<span class="ot">VERSION</span> <span class="dt">3.5</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="kw">project</span>(qtapp <span class="ot">VERSION</span> <span class="dt">1.0</span> <span class="ot">LANGUAGES</span> <span class="ot">CXX</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="kw">set</span>(<span class="dv">CMAKE_AUTOUIC</span> <span class="ot">ON</span>)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">set</span>(<span class="dv">CMAKE_AUTOMOC</span> <span class="ot">ON</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="kw">set</span>(<span class="dv">CMAKE_AUTORCC</span> <span class="ot">ON</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="kw">set</span>(<span class="dv">CMAKE_CXX_STANDARD</span> 17)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="kw">set</span>(<span class="dv">CMAKE_CXX_STANDARD_REQUIRED</span> <span class="ot">ON</span>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="kw">find_package</span>(Qt6 <span class="ot">REQUIRED</span> <span class="ot">COMPONENTS</span> Widgets)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="kw">set</span>(PROJECT_SOURCES</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    main.cpp</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="fu">qt_add_executable</span>(qtapp MANUAL_FINALIZATION <span class="dv">${PROJECT_SOURCES}</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="kw">target_link_libraries</span>(<span class="bn">qtapp</span> <span class="ot">PRIVATE</span> <span class="bn">Qt6::Widgets</span>)</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="fu">qt_finalize_executable</span>(qtapp)</span></code></pre></div>
<p>anschließend muss cmake das Makefile generieren:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-S</span> . <span class="at">-B</span> build <span class="at">-DCMAKE_BUILD_TYPE</span><span class="op">=</span>Debug</span></code></pre></div>
<p>oder alternativ:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">cmake</span> .. <span class="at">-DCMAKE_BUILD_TYPE</span><span class="op">=</span>Debug</span></code></pre></div>
<ul>
<li>ACHTUNG: Unbedingt das cmake von Qt6 verwenden. Diese ist im Ordner
<code>$QT_HOME/Tools/CMake/bin</code> zu finden. Dieses cmake kennt die
Makros <code>qt_add_executable</code> und
<code>qt_finalize_executable</code> und zeigt auf die korrekten Pfade
der Qt-Bibliotheken. Dem System-cmake kann entsprechend mittels
CMAKE_PREFIX_PATH die Pfade zu den Qt-Bibliotheken mitgeteilt
werden.</li>
</ul>
</div>
<div id="qt-grundlagen-einführung-in-qt-creator"
class="slide section level1">
<h1>4.1 Qt-Grundlagen / Einführung in Qt Creator</h1>
<ul>
<li><p>Der Qt-Creator hat den sogenannten Locater mit dem man Dateien
öffnen kann, aber auch Befehle ausführen kann.</p></li>
<li><p>Der Locater wird mit <code>Strg + K</code> geöffnet. Über den
Locator kann man Dateien öffnen, aber auch Befehle ausführen.</p></li>
<li><p>Copilot ist verfügbar, aber die Unterstützung ist nicht so gut
wie bei VSCode.</p></li>
<li><p>QtCreator verwendet CLang um die Code-Completion zu machen und
für die “Live”-Überprüfung des Codes.</p></li>
<li><p>Der Standardcompiler ist (je nach Kit) GCC, Clang oder
MSVC.</p></li>
</ul>
</div>
<div id="qt-grundlagen-qml-und-qt-quick" class="slide section level1">
<h1>4.2 Qt-Grundlagen / QML und Qt Quick</h1>
<ul>
<li><p>QML ist eine deklarative Sprache, die von Qt alternativ für die
Erstellung von Benutzeroberflächen verwendet wird.</p></li>
<li><p>QML ist eine Mischung aus JavaScript und CSS.</p></li>
<li><p>Qt Quick ist ein Framework, das auf QML basiert und die
Erstellung von modernen Benutzeroberflächen ermöglicht.</p></li>
</ul>
<p>Beispiel</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode qml"><code class="sourceCode qml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">import</span><span class="im"> QtQuick 2.15</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="kw">import</span><span class="im"> QtQuick.Controls 2.15</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>ApplicationWindow {</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">640</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">480</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;Hello World&quot;</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    Button {</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>        <span class="dt">text</span><span class="op">:</span> <span class="st">&quot;Hello World&quot;</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>        anchors<span class="op">.</span><span class="at">centerIn</span><span class="op">:</span> parent</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a>    }</span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li>QML kann mit Qt C++-Widgets verwendet werden. Dazu gibt es die
Klasse <code>QQuickWidget</code>.</li>
<li>Außerdem können die Q_PROPERTY Eigenschaften von C++-Klassen in QML
verwendet werden.</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qt-philosophie">Qt Philosophie</h2>
<ul>
<li><p>Qt stellt eine sehr vollständige Bibliothek zur Verfügung. Alles
was von Qt kommt, ist beginnt mit dem Buchstaben <code>Q</code>. (Zum
Beispiel <code>QObject</code>, <code>QWidget</code>,
<code>QApplication</code>).</p></li>
<li><p>Qt ist also nicht nur eine GUI Bibliothek, sondern eine
vollständige C++ Bibliothek mit vielen Klassen und Funktionen die an der
Basis eines Programms benötigt werden (Beispiel: <code>QFile</code>,
<code>QDir</code>, <code>QTextStream</code>, <code>QMap</code>
).</p></li>
<li><p>Überschneidungen mit der Standardbibliothek sind dann häufger
anzutreffen, aber Qt hat viele Dinge schon lange vor der
Standardbibliothek implementiert.</p></li>
<li><p>Typische Dinge die in C++ und in Qt vorkommen sind zum Beispiel
<code>QString</code> und <code>QVector</code>. Auch Maps wie
<code>QMap</code> sind in Qt vorhanden. In der Standardbibliothek sind
die Pendants dann <code>std::string</code>, <code>std::vector</code> und
<code>std::map</code>. Das Verwenden von Qt-Klassen in Containern der
Standardbibliotheken oder das Verwenden von std::string in Qt-Containern
funktioniert übrigens sehr gut in der Praxis.</p></li>
<li><p>Die Verwendung von Boost ist in der Regel nicht notwendig und
hiermit würde man eine weitere General Purpose Library mit in sein
Programm einbinden und damit weitere Entscheidungsmöglicheiten und
Komplexität hinzufügen.</p></li>
<li><p>Das meiste in einem Qt-Programm ist also aus einem Guss und kommt
von Qt selbst.</p></li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-1"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="c-dateien">C++ Dateien</h2>
<ul>
<li><p>In C++ wird zwischen Header- und Source-Dateien
unterschieden.</p></li>
<li><p>Header-Dateien haben die Endung <code>.h</code>.</p></li>
<li><p>Source-Dateien haben die Endung <code>.cpp</code>.</p></li>
<li><p>Man kann sein gesamtes Programm nur in Header-Dateien schreiben,
aber das ist nicht empfehlenswert, da dann sehr große .o Dateien
entstehen. Diese werden beim Linken dann zwar wieder kleiner, aber das
Kompilieren dauert länger. Die Compiletime bei C++ ist schon sehr lang,
daher sollte man darauf achten nicht allzu viel in den Header zu
implementieren. (Deklarationen sind ok und vergleichsweise
leichtgewichtig)</p></li>
</ul>
<h2 id="allgemeines-zu-include-files">Allgemeines zu Include Files</h2>
<p>Es gibt 3 Arten von Headern.</p>
<ol style="list-style-type: decimal">
<li>Eigene Header aus dem Projekt (in Anführungszeichen),</li>
<li>Header von Qt (starten alle mit Q) (in spitzen Klammern)</li>
<li>Header aus der C oder C++ Standardbibliothek und weiteren
Bibliotheken (in spitzen Klammern)</li>
</ol>
<p>Header mit spitzen Klammern werden in den Include-Paths gesucht,
Header in Anführungszeichen relativ zum Arbeitsverzeichnis. Absolute
Header könnten theoretisch auch in “” angegeben werden.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-2"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="reihenfolge-der-include-anweisungen">Reihenfolge der
Include-Anweisungen</h2>
<p>Folgende Regel kann man grob anwenden:</p>
<ul>
<li><p>Eigene Header zuerst. Das sorgt dafür, dass die eigenen Header
nicht noch weitere Header benötigen, die nicht direkt durch die Header
selber inkludiert werden.</p></li>
<li><p>Danach die QtHeader, auch hier werden Macros etc definiert die
man nicht kontrolliert und welche die eigenen Header nicht beeinflussen
sollen.</p></li>
<li><p>Danach alle weiteren Header. Es gilt das gleiche wie für die
Qt-Header. In einem Qt Projekt kommen die Qt-Header vor den System
Headern.</p></li>
</ul>
<div class="sourceCode" id="cb13"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;MyCustomWidget.h&quot;</span><span class="pp"> </span><span class="co">// Your own header</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span><span class="pp">     </span><span class="co">// Qt header</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span><span class="pp">           </span><span class="co">// Standard library header</span></span></code></pre></div>
<p>Es gibt aber Ausnahmen und Gründe von dieser Empfehlung in
Einzelfällen abzuweichen.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-3"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qt-core">Qt Core</h2>
<ul>
<li>Als Basis benötigt man gewisse Grundfunktionalitäten von Qt. Diese
sind in der <code>QtCore</code> Bibliothek enthalten.</li>
</ul>
<p>Unter anderem sind dort die folgenden Klassen anzutrffen:</p>
<ul>
<li>QObject</li>
<li>QString, QByteArray (base64 etc)</li>
<li>QVector, QVariant, QSharedPointer</li>
<li>QUuid, QDebug, QCalendar, QCbor, QCommandLineParser</li>
<li>QFile, QMap, QMutex, QPromise, QProcess</li>
<li>QJsonObject, QXmlStreamReader, QXmlStreamWriter</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-4"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="debugausgaben-mit-qdebug">Debugausgaben mit QDebug</h2>
<p>Debugausgabe mit qDebug (qCritical, qFatal, qWarning, qInfo, qDebug).
Diese Fumktionen sind Teil des Qt-Debugging-Frameworks und können auch
in Release-Builds verwendet werden. Der Header <QtLogging> ist nicht
notwend ig, wenn man <QDebug> inkludiert.</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span></code></pre></div>
<p>qDebug() kann konfiguriert werden. Die wichtigsten Möglichkeiten
sind:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co">// log format for qDebug </span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">qSetMessagePattern</span><span class="op">(</span><span class="st">&quot;%{time yyyy-MM-dd hh:mm:ss.zzz} %{file}:%{line} %{function} %{message}&quot;</span><span class="op">);</span></span></code></pre></div>
<p>Formatoptionen:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">// no-spaces, alignment, field widths</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> noquote <span class="op">&lt;&lt;</span> nospace <span class="op">&lt;&lt;</span> <span class="dv">42</span> <span class="op">&lt;&lt;</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> qSetFieldWidth<span class="op">(</span><span class="dv">10</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">42</span> <span class="op">&lt;&lt;</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> qSetFieldWidth<span class="op">(</span><span class="dv">10</span><span class="op">)</span> <span class="op">&lt;&lt;</span> qSetPadChar<span class="op">(</span><span class="ch">&#39;0&#39;</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">42</span> <span class="op">&lt;&lt;</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> qSetFieldWidth<span class="op">(</span><span class="dv">10</span><span class="op">)</span> <span class="op">&lt;&lt;</span> qSetFieldAlignment<span class="op">(</span><span class="ex">QTextStream::AlignRight</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">42</span> <span class="op">&lt;&lt;</span> <span class="fl">3.14</span><span class="op">;</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-5"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="zeiten-messen-mit-qelapsedtimer">Zeiten messen mit
QElapsedTimer</h2>
<p>Microbenchmarks sind oft einfach zu schreiben. QElapsedTimer kann für
die Zeitmessung verwendet werden. Die Zeitmessung ist nicht für extrem
kurze Zeitspannen genau genug.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">QElapsedTimer</span> timer<span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>timer<span class="op">.</span>start<span class="op">();</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">// do something</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Elapsed time:&quot;</span> <span class="op">&lt;&lt;</span> timer<span class="op">.</span>elapsed<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;ms&quot;</span><span class="op">;</span></span></code></pre></div>
<p>// pure C++ Alternative mit std::chrono</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">auto</span> start <span class="op">=</span> <span class="bu">std::</span>chrono::high_resolution_clock::now<span class="op">();</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">// do something</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">auto</span> end <span class="op">=</span> <span class="bu">std::</span>chrono::high_resolution_clock::now<span class="op">();</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">// not using auto here to show the type</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>chrono<span class="op">::</span>duration<span class="op">&lt;</span><span class="dt">double</span><span class="op">,</span> <span class="bu">std::</span>milli<span class="op">&gt;</span> duration <span class="op">=</span> end <span class="op">-</span> start<span class="op">;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="dt">double</span> durationMs <span class="op">=</span> duration<span class="op">.</span>count<span class="op">();</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-6"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-introduction">QObject Introduction</h2>
<ul>
<li><p><code>QObject</code> ist die Basis von Klasse der
Hauptklassenhierarchie von Qt.</p></li>
<li><p>Es gibt aber viele Klassen in Qt, die nicht von
<code>QObject</code> abgeleitet sind.</p></li>
<li><p><code>QObject</code> ist eine Klasse, die viele Funktionen und
Eigenschaften bereitstellt, die in vielen Klassen benötigt werden.
QObject wird häufig abgeleitet, wird aber auch als Standalone Klasse
häufiger verwendet.</p></li>
<li><p><code>QObject</code> ist anders als bei der Standardbibliothek
üblich nicht auf effizientes Kopieren ausgelegt und wird meistens auf
dem Heap mit new oder Smart-Pointern allokiert.</p></li>
<li><p>Werteklassen wie <code>QString</code>, <code>QVector</code>,
<code>QList</code> sind auf effizientes Kopieren ausgelegt und werden
somit auch oft auf dem Stack allokiert oder in Vectoren “emplaced”.
Effizientes Kopieren wird auch häufig durch Refcounter und Copy-On-Write
Mechanismen erreicht.</p></li>
</ul>
<h3 id="klassen-die-von-qobject-erben">Klassen, die von QObject
erben</h3>
<ul>
<li>QWidget, QApplication, QTimer, QThread, QNetworkAccessManager,
QPushButton, QLabel, QMainWindow, QDialog, QFile, QPainter, QLineEdit,
QComboBox, QCheckBox, QVBoxLayout, QHBoxLayout, QStackedWidget,
QTableWidget, QListWidget, QTextEdit, QScrollArea, QSplitter, QMenu
…</li>
</ul>
<h3 id="werteklassen-die-nicht-von-qobject-erben">Werteklassen, die
nicht von QObject erben</h3>
<ul>
<li>QString, QVector, QList, QMap, QPair, QPoint, QSize, QRect, QColor,
QRegExp, QVariant, QImage, QPixmap, QPolygon, QFont, QBrush, QPen,
QMatrix, QTransform, QMargins, QByteArray, QBitArray, QFlags, QDate,
QTime …</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-7"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-teil-1">QObject, Teil 1</h2>
<ol style="list-style-type: decimal">
<li><strong>Definition</strong>:
<ul>
<li><code>QObject</code> ist die Basisklasse für die meisten Qt Klassen
<ul>
<li>Stellt Kernfunktionen zur Verfügung</li>
</ul></li>
</ul></li>
<li><strong>Main Features</strong>:
<ul>
<li>Ownership, durch QObject entstehen Parent/Child Verbindungen
zwischen Objekten</li>
<li>Bei der Speicherfreigabe von Parent-Objekten werden durch den
Destrukter auch die Child-Objekte rekursiv in “bottom-up” Reihenfolge
freigegeben.</li>
<li>Das Kopieren von QObject Instanzen ist nicht erlaubt (Copy
Constructor und Assignment Operator sind private)</li>
<li>Meta-object System (MOC): Signals &amp;Sslots, Qt-RTTI (Runtime type
information) and dynamic property management.</li>
</ul></li>
</ol>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-8"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-teil-2">QObject, Teil 2</h2>
<ul>
<li>QObject kann <em>nicht</em> kopiert werden. (Der Copy-Constructor
ist private und/oder mit =delete markiert)</li>
<li>In C++ findet die Copy-Initialization (=der Aufruf der
Copy-Constructors) in folgenden Situation statt
<ul>
<li>Ein Initialisierer steht rechts von einem Gleichheitszeichen bei
einer Objekterzeugung (Achtung, das ist <em>kein</em> Assignment)</li>
<li>Wenn ein Objekt beim Funktionsaufruf (Lamdas ebenso) als Wert (Pass
by Value) übergeben wird.</li>
<li>Wenn ein Objekt als Wert (Return by Value) aus einer Funktion
zurückgegeben wird.</li>
<li>Wenn eine Exception mit einem Objekt geworfen wird.</li>
<li>Wenn eine Exception mit einem Objekt gefangen wird. (Hier Referenzen
verwenden)</li>
<li>Wenn ein Lamdba ein Objekt mit dem Wert captured. (via
<code>[myobj]</code> oder expliziter Auflistung)</li>
</ul></li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-9"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-teil-3">QObject, Teil 3</h2>
<ul>
<li>Jede Instanz eines QObjects verwaltet Listener (Slots) die bei
Änderungen benachrichtigt werden können. (über das emit() Keyword.</li>
<li>Dazu erweitert Qt den C++ Compiler um das MOC (Meta Object Compiler)
Tool, welches die Signale und Slots verwaltet und vor dem Kompilieren
den Sourcecode noch einmal umschreibt.</li>
</ul>
<ol style="list-style-type: decimal">
<li><strong>Signals</strong>:
<ul>
<li>Mechanismus um Signale zu senden.</li>
<li>Deklariert mit dem <code>signals:</code> keyword. (kein natives
C++)</li>
</ul></li>
<li><strong>Slots</strong>:
<ul>
<li>Funktionen die auf Signale reagieren</li>
<li>Können reguläre Member-Funktionen sein</li>
<li>Deklariert mittels <code>public slots:</code>,
<code>protected slots:</code>, oder <code>private slots:</code></li>
</ul></li>
<li><strong>Connections</strong>:
<ul>
<li>Eine Verbindung zwischen signal und slot.</li>
<li>Wird mittels <code>QObject::connect()</code> hergestellt (oder
grafisch im Qt Creator)</li>
</ul></li>
</ol>
<p><strong>Signale und Slots sind die Basis für Qt’s Event-basierten
Ansatz und Typesafe </strong></p>
<ul>
<li>Das Signal-Slot-System ein Event-System nach dem Observer-Pattern.
Die Signale können auch zur Kommunikation über Threads hinweg verwendet
werden.</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-10"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-teil-4">QObject, Teil 4</h2>
<ul>
<li>Slots und Signale können auch Parameter haben und sind
typsicher</li>
<li>Man kann Signale auch mit Lambdas (anonyme Codeblöcke) verbinden,
ganz ohne Slots</li>
</ul>
<div class="sourceCode" id="cb19"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">QObject::connect</span><span class="op">(</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>    globalStatus<span class="op">,</span> </span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="op">&amp;</span>GlobalStatus<span class="op">::</span>statusKeyChanged<span class="op">,</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="op">[=]</span> <span class="op">{</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>        <span class="fu">qInfo</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;status key has changed&quot;</span><span class="op">;</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="op">);</span></span></code></pre></div>
<p>Hier ist es übrigens am besten noch ein “Ownership”-Objekt als 3.
Parameter anzugeben.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-11"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qobject-teil-5">QObject, Teil 5</h2>
<ul>
<li></li>
</ul>
<div class="sourceCode" id="cb20"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">// Beispiel für Observer Pattern mit Signals/Slots</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="kw">class</span> DataModel <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span> <span class="op">{</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="dt">int</span> value<span class="op">;</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    <span class="dt">void</span> setValue<span class="op">(</span><span class="dt">int</span> newValue<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>value <span class="op">!=</span> newValue<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>            value <span class="op">=</span> newValue<span class="op">;</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>            <span class="ex">emit</span> valueChanged<span class="op">(</span>value<span class="op">);</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>    <span class="dt">void</span> valueChanged<span class="op">(</span><span class="dt">int</span> newValue<span class="op">);</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">// Verwendung und Update des Labels</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>DataModel model<span class="op">;</span></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="ex">QLabel</span> <span class="op">*</span>label <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">;</span></span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a><span class="fu">connect</span><span class="op">(&amp;</span>model<span class="op">,</span> <span class="op">&amp;</span>DataModel<span class="op">::</span>valueChanged<span class="op">,</span> </span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>    <span class="op">[</span>label<span class="op">](</span><span class="dt">int</span> value<span class="op">)</span> <span class="op">{</span> label<span class="op">-&gt;</span>setNum<span class="op">(</span>value<span class="op">);</span> <span class="op">});</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-12"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="q_property">Q_PROPERTY</h2>
<ul>
<li>Das Observer-Pattern (vergleichbar mit Java Beans) für ganze Objekte
resp. für die wichtigsten Eigenschaften von Objekten wird in Qt durch
das <code>Q_PROPERTY</code> Makro realisiert.</li>
</ul>
<div class="sourceCode" id="cb21"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">public</span> Person <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span> <span class="op">{</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>    <span class="ex">Q_PROPERTY</span><span class="op">(</span><span class="ex">QString</span> name READ name WRITE setName NOTIFY nameChanged<span class="op">)</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="ex">Q_PROPERTY</span><span class="op">(</span><span class="dt">int</span> age READ age WRITE setAge NOTIFY ageChanged<span class="op">)</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="ex">Q_PROPERTY</span><span class="op">(</span><span class="ex">QDate</span> birthDate READ birthDate WRITE setBirthDate NOTIFY birthDateChanged<span class="op">)</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    <span class="ex">QString</span> name<span class="op">()</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">m_name</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    <span class="dt">void</span> setName<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> name<span class="op">)</span> <span class="op">{</span> <span class="va">m_name</span> <span class="op">=</span> name<span class="op">;</span> <span class="ex">emit</span> nameChanged<span class="op">(</span>name<span class="op">);</span> <span class="op">}</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    <span class="ex">QString</span> age<span class="op">()</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">m_age</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>    <span class="dt">void</span> setAge<span class="op">(</span><span class="dt">int</span> age<span class="op">)</span> <span class="op">{</span> <span class="va">m_age</span> <span class="op">=</span> age<span class="op">;</span> <span class="ex">emit</span> ageChanged<span class="op">(</span>age<span class="op">);</span> <span class="op">}</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>    <span class="ex">QDate</span> birthDate<span class="op">()</span> <span class="at">const</span> <span class="op">{</span> <span class="cf">return</span> <span class="va">m_birthDate</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>    <span class="dt">void</span> setBirthDate<span class="op">(</span><span class="at">const</span> <span class="ex">QDate</span><span class="op">&amp;</span> birthDate<span class="op">)</span> <span class="op">{</span> </span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>        <span class="va">m_birthDate</span> <span class="op">=</span> birthDate<span class="op">;</span> <span class="ex">emit</span> birthDateChanged<span class="op">(</span>birthDate<span class="op">);</span> <span class="op">}</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>    <span class="dt">void</span> nameChanged<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> name<span class="op">);</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>    <span class="dt">void</span> ageChanged<span class="op">(</span><span class="dt">int</span> age<span class="op">);</span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>    <span class="dt">void</span> birthDateChanged<span class="op">(</span><span class="at">const</span> <span class="ex">QDate</span><span class="op">&amp;</span> birthDate<span class="op">);</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>    <span class="ex">QString</span> <span class="va">m_name</span><span class="op">;</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>    <span class="dt">int</span> <span class="va">m_age</span><span class="op">;</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>    <span class="ex">QDate</span> <span class="va">m_birthDate</span><span class="op">;</span></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<ul>
<li>QString und QDate sind Value-Objekte die ein sehr effizientes
Kopieren implementieren. Es ist von daher nicht unbedingt notwendig,
dass die Setter-Methoden die Parameter als Referenz übergeben.</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-13"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="das-property-system">Das Property-System</h2>
<p>Properties sind besonders nützlich:</p>
<ul>
<li>Für die Bindung an QML Interfaces</li>
<li>Für die automatische Synchronisation zwischen Model und View</li>
<li>Für das Speichern/Laden von Objektzuständen</li>
<li>Für die Verwendung im Qt Designer</li>
</ul>
<p>Der Hauptvorteil von Properties ist, dass sie das Meta-Object System
nutzen und damit zur Laufzeit abgefragt und manipuliert werden können,
was besonders für generische Frameworks und Tools nützlich ist.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-14"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="das-property-system-1">Das Property-System</h2>
<ul>
<li>Abfrage von Properties zur Laufzeit. Der Objekttyp ist dabei
unbekannt und es kann über das Meta-Object System abgefragt werden, ob
ein Property vorhanden ist und welchen Typ es hat.</li>
</ul>
<div class="sourceCode" id="cb22"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co">// myObject ist ein QObject* und nicht weiter spezifiziert</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="ex">QMetaObject</span> metaObject <span class="op">=</span> myObject<span class="op">-&gt;</span>metaObject<span class="op">();</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="dt">int</span> propertyIndex <span class="op">=</span> metaObject<span class="op">-&gt;</span>indexOfProperty<span class="op">(</span><span class="st">&quot;name&quot;</span><span class="op">);</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="ex">QMetaProperty</span> property <span class="op">=</span> metaObject<span class="op">-&gt;</span>property<span class="op">(</span>propertyIndex<span class="op">);</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="ex">QVariant</span> value <span class="op">=</span> property<span class="op">.</span>read<span class="op">(</span>myObject<span class="op">);</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co">// auch schreibend möglich</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>property<span class="op">.</span>write<span class="op">(</span>myObject<span class="op">,</span> <span class="st">&quot;new name&quot;</span><span class="op">);</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-15"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2
id="das-property-system-und-weitere-eigenschaftn-des-meta-object-systems">Das
Property-System und weitere Eigenschaftn des Meta-Object-Systems</h2>
<ul>
<li><p>Das Meta-Object-System wird auch für das dynamische Casten
verwendet.</p></li>
<li><p>Das Meta-Object-System wird auch für das dynamische Erzeugen von
Objekten verwendet.</p></li>
<li><p>Das Meta-Object-System wird auch für das dynamische Erzeugen von
Signalen und Slots verwendet.</p></li>
<li><p>Mittels userProperty() können auch eigene Properties hinzugefügt
werden. Das ist besonders sinnvoll, wenn man ein Objekt in einem
generischen Framework verwendet und dort eigene benötigt.</p></li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-16"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="threadsichere-signale-und-slots">Threadsichere Signale und
Slots</h2>
<div class="sourceCode" id="cb23"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">class</span> Worker <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span> <span class="op">{</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="kw">explicit</span> Worker<span class="op">(</span><span class="ex">QObject</span><span class="op">*</span> parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QObject</span><span class="op">(</span>parent<span class="op">)</span> <span class="op">{}</span>    </span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="kw">public</span> <span class="ex">slots</span><span class="op">:</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    <span class="dt">void</span> doWork<span class="op">()</span> <span class="op">{</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>        <span class="co">// Langwierige Operation...</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>        <span class="ex">emit</span> workCompleted<span class="op">(</span><span class="ex">QDateTime::currentDateTime</span><span class="op">());</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>    </span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>    <span class="dt">void</span> workCompleted<span class="op">(</span><span class="at">const</span> <span class="ex">QDateTime</span><span class="op">&amp;</span> timestamp<span class="op">);</span></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a><span class="co">// Verwendung in der Hauptklasse</span></span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a><span class="kw">class</span> MainWindow <span class="op">:</span> <span class="kw">public</span> <span class="ex">QMainWindow</span> <span class="op">{</span></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>    <span class="ex">QThread</span> workerThread<span class="op">;</span></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>    Worker<span class="op">*</span> worker<span class="op">;</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a>    </span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a>    MainWindow<span class="op">(</span><span class="ex">QWidget</span><span class="op">*</span> parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QMainWindow</span><span class="op">(</span>parent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a>        worker <span class="op">=</span> <span class="kw">new</span> Worker<span class="op">;</span></span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a>        worker<span class="op">-&gt;</span>moveToThread<span class="op">(&amp;</span>workerThread<span class="op">);</span></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a>        <span class="fu">connect</span><span class="op">(&amp;</span>workerThread<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QThread::finished</span><span class="op">,</span> worker<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QObject::deleteLater</span><span class="op">);</span>                </span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a>        <span class="fu">connect</span><span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="op">&amp;</span>MainWindow<span class="op">::</span>startWork<span class="op">,</span> worker<span class="op">,</span> <span class="op">&amp;</span>Worker<span class="op">::</span>doWork<span class="op">);</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a>        <span class="fu">connect</span><span class="op">(</span>worker<span class="op">,</span> <span class="op">&amp;</span>Worker<span class="op">::</span>workCompleted<span class="op">,</span> <span class="kw">this</span><span class="op">,</span> <span class="op">&amp;</span>MainWindow<span class="op">::</span>handleResults<span class="op">);</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a>        workerThread<span class="op">.</span>start<span class="op">();</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a>    <span class="op">~</span>MainWindow<span class="op">()</span> <span class="op">{</span></span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a>        workerThread<span class="op">.</span>quit<span class="op">();</span></span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a>        workerThread<span class="op">.</span>wait<span class="op">();</span></span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a>    </span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a><span class="kw">private</span> <span class="ex">slots</span><span class="op">:</span></span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a>    <span class="dt">void</span> handleResults<span class="op">(</span><span class="at">const</span> <span class="ex">QDateTime</span><span class="op">&amp;</span> timestamp<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a>        statusBar<span class="op">()-&gt;</span>showMessage<span class="op">(</span></span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a>            <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;Work completed at %1&quot;</span><span class="op">)</span></span>
<span id="cb23-40"><a href="#cb23-40" tabindex="-1"></a>                <span class="op">.</span>arg<span class="op">(</span>timestamp<span class="op">.</span>toString<span class="op">())</span></span>
<span id="cb23-41"><a href="#cb23-41" tabindex="-1"></a>        <span class="op">);</span></span>
<span id="cb23-42"><a href="#cb23-42" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-43"><a href="#cb23-43" tabindex="-1"></a>    </span>
<span id="cb23-44"><a href="#cb23-44" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb23-45"><a href="#cb23-45" tabindex="-1"></a>    <span class="dt">void</span> startWork<span class="op">();</span></span>
<span id="cb23-46"><a href="#cb23-46" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-17"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="eventloop">Eventloop</h2>
<p>Die Qt-Eventloop wird in den Qt-Threads gestartet und verarbeitet
jeweils den nächsten Event sequentiell. Obwohl Qt multithreaded ist,
gibt es es Eventloops und zwar eine pro Thread. Events können auf die
Eventloop gepostet werden mittels</p>
<ul>
<li>QTimer::singleShot (Bevorzugt)</li>
<li>QCoreApplication::postEvent (Low Level API und Custom-Events müssen
definiert werden).</li>
</ul>
<p>Für QTimer::singleShot kann man sehr gut C++ Lambdas verwenden.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="dt">void</span> myDeleteLater<span class="op">(</span><span class="ex">QObject</span> <span class="op">*</span>o<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>     <span class="ex">QTimer::singleShot</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> o<span class="op">,</span> <span class="op">[</span>o<span class="op">]()</span> <span class="op">{</span> <span class="kw">delete</span> o<span class="op">;</span> <span class="op">});</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>QTimer::singleShot</strong> ist neben dem Auslösen von
Signalen der beste Weg um Operationen asynchron auszulösen.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-18"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="eventloop-und-deletion">Eventloop und Deletion</h2>
<ul>
<li>Die Deletion von QObject Instanzen ist ein kritischer Punkt in Qt.
Es kann passieren, dass ein Objekt erst nach Abschluss der Arbeiten
gelöscht werden darf. Die passiert dann beim nächsten Durchlauf der
Eventloop. Dafür gibt es eine Funktion in QObject, die das Löschen
asynchron auslöst. Diese Fuktion ist <code>deleteLater()</code> und
könnte (ca.) wie folgt manuell implementiert werden:</li>
</ul>
<div class="sourceCode" id="cb25"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="dt">void</span> myDeleteLater<span class="op">(</span><span class="ex">QObject</span> <span class="op">*</span>o<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>     <span class="ex">QTimer::singleShot</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> o<span class="op">,</span> <span class="op">[</span>o<span class="op">]()</span> <span class="op">{</span> <span class="kw">delete</span> o<span class="op">;</span> <span class="op">});</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Das Objekt wird also nicht sofort gelöscht, sondern erst nachdem alle
Events abgearbeitet sind. Das ist wichtig, wenn das Objekt noch in einem
Slot oder einer Funktion referenziert wird.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-19"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="raii-für-deletelater">RAII für DeleteLater</h2>
<ul>
<li>Falls in einer Funktion/Methoden ein QObject erstellt wird, das
später gelöscht werden soll, kann man das mit einem Smart-Pointer und
einem Guard der RAII (Resource Acquisition Is Initialization)
realisieren.</li>
</ul>
<div class="sourceCode" id="cb26"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="pp">#ifndef RAIIGUARD_H</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="pp">#define RAIIGUARD_H</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;functional&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co">//just make sure that the callback is called when the object goes out of scope</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="kw">class</span> RAIIGuard</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>    RAIIGuard<span class="op">(</span><span class="at">const</span> function<span class="op">&lt;</span><span class="dt">void</span><span class="op">()&gt;</span> <span class="op">&amp;</span>callback<span class="op">)</span> <span class="op">:</span> deletionCallback<span class="op">(</span>callback<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>    <span class="op">~</span>RAIIGuard<span class="op">()</span> <span class="op">{</span> deletionCallback<span class="op">();</span> <span class="op">}</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a>    function<span class="op">&lt;</span><span class="dt">void</span><span class="op">()&gt;</span> deletionCallback<span class="op">;</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a><span class="pp">#endif </span><span class="co">// RAIIGUARD_H</span></span></code></pre></div>
<p>Die Verwendung sieht dann so aus:</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="dt">void</span> myFunction<span class="op">()</span> <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>    <span class="kw">auto</span> myObject <span class="op">=</span> <span class="kw">new</span> <span class="ex">QObject</span><span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>    RAIIGuard guard<span class="op">([</span>myObject<span class="op">]()</span> <span class="op">{</span> myObject<span class="op">-&gt;</span>deleteLater<span class="op">();</span> <span class="op">});</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>    <span class="co">// do something with myObject which will be deleted when the function returns</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>    <span class="co">// or when an exception is thrown, it will be on any code path out of the function</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-20"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="eventloop-und-deletion-1">Eventloop und Deletion</h2>
<ul>
<li>Ein häufiger Fehler ist es, ein Objekt zu löschen, das noch in einem
Slot referenziert wird. Das führt zu einem Crash.</li>
<li>Wenn ein Objekt gelöscht wird, werden alle Connections des Objekts
automatisch getrennt. Das ist ein wichtiger Punkt, da es sonst zu
Abstürzen kommen würde. Das Löschen eines Objekts führt aber auch zu
schwer zu findenden Fehlern. Wenn ein Ereignis nicht ausgelöst wird, ist
es immer zu schauen ob das Objekt auf das eine Connection besteht noch
existiert. 0</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-21"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="eventloop-und-eigene-events">Eventloop und eigene Events</h2>
<ul>
<li>Eigene Events können mittels QCoreApplication::postEvent gepostet
werden. Die Empfehlung ist jedoch QTimer::singleShot zu verwenden, da
dies einfacher und sicherer ist.</li>
</ul>
<div class="sourceCode" id="cb28"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="kw">class</span> CustomEvent <span class="op">:</span> <span class="kw">public</span> <span class="ex">QEvent</span> <span class="op">{</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="ex">QEvent::Type</span> CustomEventType <span class="op">=</span> </span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>        <span class="kw">static_cast</span><span class="op">&lt;</span><span class="ex">QEvent::Type</span><span class="op">&gt;(</span><span class="ex">QEvent::User</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>    </span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    CustomEvent<span class="op">()</span> <span class="op">:</span> <span class="ex">QEvent</span><span class="op">(</span>CustomEventType<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="kw">class</span> MyWidget <span class="op">:</span> <span class="kw">public</span> <span class="ex">QWidget</span> <span class="op">{</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="kw">protected</span><span class="op">:</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>    <span class="dt">bool</span> event<span class="op">(</span><span class="ex">QEvent</span><span class="op">*</span> event<span class="op">)</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>event<span class="op">-&gt;</span>type<span class="op">()</span> <span class="op">==</span> CustomEvent<span class="op">::</span>CustomEventType<span class="op">)</span> <span class="op">{</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a>            handleCustomEvent<span class="op">();</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a>        <span class="cf">return</span> <span class="ex">QWidget::event</span><span class="op">(</span>event<span class="op">);</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-18"><a href="#cb28-18" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-22"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="basis-datentypen">Basis Datentypen</h2>
<ul>
<li><p>Um Daten zu speichern bieten sich folgende Qt-Klassen an:</p>
<ul>
<li>QString für Strings, diese sind in Unicode gespeichert und brauchen
ggf. ein wenig mehr Platz.</li>
<li>QString für Dezimalzahlen (std::decimal ist in C++20 bereits
vorhanden)</li>
<li>QByteArray für alle möglichen Binärdaten. Die Verwendung von
QByteArray is viel besser als nackte <code>char*</code> für Daten und
hat auch keinen signifikaten Overhead.
<code>std::vector&lt;uint8_t&gt;</code> ist auch eine gute Alternative,
aber mit weniger Funktionalität.</li>
<li>QBitArray für Mengen von boolschen Flags</li>
<li>QDateTime für Zeitstempel</li>
</ul></li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-23"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-1">QString, Teil 1</h2>
<ol style="list-style-type: decimal">
<li><strong>Definition</strong>:
<ul>
<li>QString, hat Unicode Support (QChar = 16 Bit Unicode intern)
<ul>
<li>Zentrale Klasse für Text in Qt</li>
<li>Es gibt auch QLatin1String (sehr unterschiedlich zu QString)</li>
</ul></li>
</ul></li>
<li><strong>Main Features</strong>:
<ul>
<li>Copy-on-write mit Referenzzähler. Daten werden durch Referenzzähler
logisch kopiert und erst bei Modifikation physikalisch kopiert.</li>
<li>Vergleichbar mit std::wstring aber mit mehr Funktionalität.</li>
</ul></li>
</ol>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-24"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-2">QString, Teil 2</h2>
<ol style="list-style-type: decimal">
<li><strong>Erzeugung von QStrings</strong>:
<ul>
<li>Can be constructed from literals, numbers, or other strings.</li>
<li>QString str = “Hello, World!”;</li>
</ul></li>
<li><strong>Manipulation</strong>:
<ul>
<li>append(), prepend(), remove(), replace(), etc.</li>
<li>Für einzelne Zeichen oder Strings (via C++
Operator-Overloading)</li>
</ul></li>
<li><strong>Abfragen</strong>:
<ul>
<li>length(), isEmpty(), at(index), contains(), startsWith(),
endsWith(), etc.</li>
</ul></li>
</ol>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-25"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-3">QString, Teil 3</h2>
<p>Beispiel: Aufteilen eines QString mittels split():</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">QStringList</span> sentences <span class="op">=</span> url<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">);</span></span></code></pre></div>
<p>oder</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">QString</span> q <span class="op">=</span> <span class="st">&quot;one. two three.. four&quot;</span><span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="kw">auto</span> sentences <span class="op">=</span> q<span class="op">.</span>split<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> <span class="ex">Qt::SkipEmptyParts</span><span class="op">);</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="at">const</span> <span class="kw">auto</span><span class="op">&amp;</span> sentence <span class="op">:</span> sentences<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>   <span class="fu">qInfo</span><span class="op">()</span> <span class="op">&lt;&lt;</span> sentence<span class="op">.</span>trimmed<span class="op">();</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-26"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-4-konvertierungen">QString, Teil 4:
Konvertierungen</h2>
<ol style="list-style-type: decimal">
<li><strong>QByteArray</strong>:
<ul>
<li>toUtf8(), toLatin1(), fromUtf8(), fromLatin1(), etc.</li>
</ul></li>
<li><strong>Zahlen</strong>:
<ul>
<li>setNum(), number(), toInt(), toDouble(), etc.</li>
</ul></li>
<li><strong>Interaktion mit der STL</strong>:
<ul>
<li>Hin und zurück von/zu std::string, std::wstring</li>
</ul></li>
</ol>
<p>Wichtig: QString(“MY_STRING_LITERAL”) ist flawed und bedeutet in der
Regel, dass der Programmierer sich keine Gedanken über das Encoding
gemacht hat.</p>
<p>Das Makro #define QT_NO_CAST_FROM_ASCII 1 verhindert eine direkte
Konvertierung mittels QString s = “abc”;</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-27"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-4-konvertierungen-datetime">QString, Teil 4:
Konvertierungen Datetime</h2>
<ul>
<li>String zu Datetime:</li>
</ul>
<pre><code>QString s = &quot;2016-05-04 12:24:00&quot;;
QDateTime dateTime = QDateTime::fromString(s, &quot;yyyy-MM-dd hh:mm:ss&quot;);</code></pre>
<ul>
<li>Datetime zu string:</li>
</ul>
<pre><code>QDateTime dateTime = QDateTime::currentDateTime();
QString s = dateTime.toString(&quot;dd/MM/yy hh:mm&quot;);</code></pre>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-28"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-5">QString, Teil 5</h2>
<p>Zusammensetzen von QStrings</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="ex">QString</span> name <span class="op">=</span> <span class="st">&quot;John&quot;</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="ex">QString</span> result <span class="op">=</span> <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;My name is %1 and I am %2 years old.&quot;</span><span class="op">)</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>  <span class="op">.</span>arg<span class="op">(</span>name<span class="op">).</span>arg<span class="op">(</span>age<span class="op">);</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">QString</span> first <span class="op">=</span> <span class="st">&quot;Hello, &quot;</span><span class="op">;</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="ex">QString</span> last <span class="op">=</span> <span class="st">&quot;world!&quot;</span><span class="op">;</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="ex">QString</span> result <span class="op">=</span> first <span class="op">+</span> last<span class="op">;</span>  <span class="co">// &quot;Hello, world!&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="ex">QString</span> result <span class="op">=</span> <span class="ex">QString::asprintf</span><span class="op">(</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>  <span class="st">&quot;I am </span><span class="sc">%d</span><span class="st"> years old.&quot;</span><span class="op">,</span> age<span class="op">);</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-29"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qstring-teil-6">QString, Teil 6</h2>
<p>Man kann auch vor dem Zusammenführen die Kapazität setzen …. mittels
QString::reserve) Dazu passend gibt es QString::squeeze() und
QString::capacity()… QString::resize() ist jedoch eine
semantisch-sichtbare Option.</p>
<p><code>QStringBuilder</code> ist potentiell performanter bei größeren
String-Konkatenationen und erzeugt auch keine temporären Objekte.</p>
<p>Merksatz… Wenn man einen QString in einer Schleife mittels += immer
wieder erweitert, dann ist QStringBuilder in der Regel besser.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-30"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qbytearray">QByteArray</h2>
<p>QByteArray ist oft eine bessere Alternative zu char* oder
std::vector<char> für Binärdaten (also alle Daten ;-). Moderner Standard
wäre
<code>std::vector&lt;std::byte&gt; data; `` oder</code>std::vector<uint8_t>
data;```</p>
<p>Beispiel: Chunking (Aufteilen in Batches der Größe n)</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="dt">size_t</span> chunkSize <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">char</span><span class="op">&gt;&gt;</span> chunks<span class="op">;</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">size_t</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span>size<span class="op">();</span> i <span class="op">+=</span> chunkSize<span class="op">)</span> <span class="op">{</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>    chunks<span class="op">.</span>emplace_back<span class="op">(</span>data<span class="op">.</span>begin<span class="op">()</span> <span class="op">+</span> i<span class="op">,</span> data<span class="op">.</span>begin<span class="op">()</span> <span class="op">+</span> <span class="bu">std::</span>min<span class="op">(</span>data<span class="op">.</span>size<span class="op">(),</span> i <span class="op">+</span> chunkSize<span class="op">));</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>(Achtung: Der std::partition Algorithmus ist fürs interne Reordering
und nicht fürs “Chunking”)</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="kw">auto</span> chunkSize <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="ex">QVector</span><span class="op">&lt;</span><span class="ex">QByteArray</span><span class="op">&gt;</span> chunks<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> data<span class="op">.</span>size<span class="op">();</span> i <span class="op">+=</span> chunkSize<span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>   chunks<span class="op">.</span>append<span class="op">(</span>data<span class="op">.</span>mid<span class="op">(</span>i<span class="op">,</span> chunkSize<span class="op">));</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-31"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qbytearray-und-base64">QByteArray und Base64</h2>
<p>QByteArray ist auch die richtige Klasse um zu Base64 zu konvertieren
(toBase64) und von Base64 einzulesen (fromBase64).</p>
<p>Der Base64 Input/Output ist ebenfalls vom Typ QByteArray
(Designflaw?) Es gibt Base64 Encoding-Optionen
(QByteArray::Base64Encoding, Base64UrlEncoding,
QByteArray::OmitTrailingEquals)</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-32"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qtextstream">QTextStream</h2>
<p>Um Textdaten inkl. Konvertierung zu speichern und zu laden.</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">QFile</span> file<span class="op">(</span><span class="st">&quot;example.txt&quot;</span><span class="op">);</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>file<span class="op">.</span>open<span class="op">(</span><span class="ex">QIODevice::WriteOnly</span> <span class="op">|</span> <span class="ex">QIODevice::Text</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>    <span class="ex">QTextStream</span> s<span class="op">(&amp;</span>file<span class="op">);</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>    out <span class="op">&lt;&lt;</span> <span class="st">&quot;Hello World&quot;</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>QTextStream nicht für Binärdaten verwenden. Außerdem verwendet
QTextStream locale-aware Zahlen- und Datumsformate. Sehr oft will man
das nicht. In jedem Fall sollte man das Encoding mittels</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="ex">QTextStream</span> s<span class="op">(&amp;</span>file<span class="op">);</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>s<span class="op">.</span>setCodec<span class="op">(</span><span class="st">&quot;UTF-8&quot;</span><span class="op">);</span></span></code></pre></div>
<p>setzen.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-33"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qbytearray-für-binäres-laden-und-speichern">QByteArray für
binäres Laden und Speichern</h2>
<div class="sourceCode" id="cb40"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="ex">QByteArray</span> loadBinary<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> filePath<span class="op">)</span> <span class="op">{</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>    <span class="ex">QByteArray</span> data<span class="op">;</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>    <span class="ex">QFile</span> file<span class="op">(</span>filePath<span class="op">);</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>file<span class="op">.</span>open<span class="op">(</span><span class="ex">QIODevice::ReadOnly</span> <span class="op">|</span> <span class="ex">QIODevice::Binary</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>       <span class="cf">throw</span> MyFileException<span class="op">(</span><span class="ex">QString</span><span class="op">(</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a>        <span class="st">&quot;Failed to open file for writing: %1&quot;</span><span class="op">).</span>arg<span class="op">(</span>filePath<span class="op">));</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>    data <span class="op">=</span> file<span class="op">.</span>readAll<span class="op">();</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>    file<span class="op">.</span>close<span class="op">();</span> <span class="co">// aufgrund von RAII nicht notwendig</span></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a>    <span class="cf">return</span> data<span class="op">;</span></span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-34"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qexception-und-custom-exceptions">QException und Custom
Exceptions</h2>
<p>QException ist (natürlich) kein QObject, aber ähnlich zu
Java-Exceptions.</p>
<pre><code>class MyFileException : public QException {
public:
    void raise() const override { throw *this; }
    FileIOException *clone() const override { return new FileIOException(*this); }
    QString message;
    FileIOException(const QString&amp; msg) : message(msg) {}
    QString what() const { return message; }
};</code></pre>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-35"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qvariant">QVariant</h2>
<p>QVariant erlaubt es Basistypen, Pointer, null und eigene
QVariant-Implementierungen in einem Rückgabetyp zu implementieren. Die
QVariant ist also ein Container/Wrapper um den eigentlichen Wert.
Mittels Methoden wie toInt(), toPoint(), toRect() ….</p>
<p>Ob die Konvertierung möglich ist, kann zur Laufzeit mittels
canConvert() abgefragt werden.</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> T<span class="op">&gt;</span> <span class="dt">bool</span> <span class="ex">QVariant::canConvert</span><span class="op">()</span> <span class="at">const</span></span></code></pre></div>
<p>Man kann auch eigene Typen als QVariant registrieren</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="kw">struct</span> MyStruct <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">double</span> z<span class="op">;</span> <span class="op">};</span></span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a><span class="co">// global</span></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="ex">Q_DECLARE_METATYPE</span><span class="op">(</span>MyStruct<span class="op">)</span></span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a><span class="co">// in main</span></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a><span class="fu">qRegisterMetaType</span><span class="op">&lt;</span>MyStruct<span class="op">&gt;(</span><span class="st">&quot;MyStruct&quot;</span><span class="op">);</span></span></code></pre></div>
<p>Für reine Value-Types reicht das default-Verhalten aus (Rule of
Zero-Typen).</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-36"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qvariant-konvertierungsfunktionen">QVariant
(Konvertierungsfunktionen)</h2>
<p>Globale Definitionen für die Unterstützung von QVariant:</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="kw">struct</span> MyStruct <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">double</span> z<span class="op">;</span> <span class="op">};</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="ex">Q_DECLARE_METATYPE</span><span class="op">(</span>MyStruct<span class="op">)</span></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="co">// serialize</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a><span class="ex">QDataStream</span> <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&lt;&lt;(</span><span class="ex">QDataStream</span> <span class="op">&amp;</span>out<span class="op">,</span> <span class="at">const</span> MyStruct <span class="op">&amp;</span>myStruct<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    out <span class="op">&lt;&lt;</span> myStruct<span class="op">.</span>x <span class="op">&lt;&lt;</span> myStruct<span class="op">.</span>y<span class="op">;</span></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>    <span class="cf">return</span> out<span class="op">;</span></span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a><span class="co">// deserialize</span></span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a><span class="ex">QDataStream</span> <span class="op">&amp;</span><span class="kw">operator</span><span class="op">&gt;&gt;(</span><span class="ex">QDataStream</span> <span class="op">&amp;</span>in<span class="op">,</span> MyStruct <span class="op">&amp;</span>myStruct<span class="op">)</span> <span class="op">{</span></span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>    in <span class="op">&gt;&gt;</span> myStruct<span class="op">.</span>x <span class="op">&gt;&gt;</span> myStruct<span class="op">.</span>y<span class="op">;</span></span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a>    <span class="cf">return</span> in<span class="op">;</span></span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-37"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qsettings">QSettings</h2>
<p>QSettings unterstützt mehrere Anwendungen die auf der gleichen Datei
arbeiten nicht. Man muss FIlelocking oder separate Dateien verwenden.
QSettings kann optional in einer Datenbank persistiert werden.</p>
<p>QSettings verwendet QVariant::fromValue(nullptr) um nicht
existierende Werte zu signalisieren.</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-38"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qcommandlineparser">QCommandLineParser</h2>
<p>Kommandozeile Parsing mit Optionen, Flags etc</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QCoreApplication&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QCommandLineParser&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb45-6"><a href="#cb45-6" tabindex="-1"></a>    <span class="ex">QCoreApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb45-7"><a href="#cb45-7" tabindex="-1"></a>    <span class="ex">QCommandLineParser</span> parser<span class="op">;</span></span>
<span id="cb45-8"><a href="#cb45-8" tabindex="-1"></a>    parser<span class="op">.</span>setApplicationDescription<span class="op">(</span><span class="st">&quot;Example of QCommandLineParser&quot;</span><span class="op">);</span></span>
<span id="cb45-9"><a href="#cb45-9" tabindex="-1"></a>    parser<span class="op">.</span>addHelpOption<span class="op">();</span></span>
<span id="cb45-10"><a href="#cb45-10" tabindex="-1"></a>    parser<span class="op">.</span>addVersionOption<span class="op">();</span></span>
<span id="cb45-11"><a href="#cb45-11" tabindex="-1"></a>    <span class="ex">QCommandLineOption</span> showVersionOption<span class="op">(</span><span class="ex">QStringList</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;s&quot;</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;showVersion&quot;</span><span class="op">,</span> <span class="ex">QCoreApplication::translate</span><span class="op">(</span><span class="st">&quot;main&quot;</span><span class="op">,</span> <span class="st">&quot;Show version information&quot;</span><span class="op">));</span></span>
<span id="cb45-12"><a href="#cb45-12" tabindex="-1"></a>    parser<span class="op">.</span>addOption<span class="op">(</span>showVersionOption<span class="op">);</span></span>
<span id="cb45-13"><a href="#cb45-13" tabindex="-1"></a>    parser<span class="op">.</span>process<span class="op">(</span>app<span class="op">);</span></span>
<span id="cb45-14"><a href="#cb45-14" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parser<span class="op">.</span>isSet<span class="op">(</span>showVersionOption<span class="op">))</span> <span class="op">{</span></span>
<span id="cb45-15"><a href="#cb45-15" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Version 1.0.0&quot;</span><span class="op">;</span></span>
<span id="cb45-16"><a href="#cb45-16" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb45-17"><a href="#cb45-17" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb45-18"><a href="#cb45-18" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;No options set.&quot;</span><span class="op">;</span></span>
<span id="cb45-19"><a href="#cb45-19" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb45-20"><a href="#cb45-20" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-39"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qt-misc">Qt Misc</h2>
<ul>
<li><p>Qt hat onc hsehr viele weitere Klassen und Funktionen, die
typischerweise in C++ Programmen benötigt werden.</p></li>
<li><p>QRegularExpression</p></li>
<li><p>QtConcurrent</p></li>
<li><p>QtNetwork</p></li>
<li><p>QtOpenGL</p></li>
<li><p>QtPng, QtJpeg</p></li>
<li><p>QtSvg</p></li>
<li><p>QtSql</p></li>
<li><p>QtXml</p></li>
<li><p>QSettings</p></li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-40"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qregularexpression">QRegularExpression</h2>
<div class="sourceCode" id="cb46"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QRegularExpression&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="co">/* finds URLs in einem Test (ungenau) */</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a><span class="dt">void</span> findUrls<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>text<span class="op">)</span> <span class="op">{</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>    <span class="ex">QRegularExpression</span> re<span class="op">(</span><span class="st">&quot;(https?://</span><span class="sc">\\</span><span class="st">S+)&quot;</span><span class="op">);</span></span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>    <span class="kw">auto</span> it <span class="op">=</span> re<span class="op">.</span>globalMatch<span class="op">(</span>text<span class="op">);</span></span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>it<span class="op">.</span>hasNext<span class="op">())</span> <span class="op">{</span></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a>        <span class="ex">QRegularExpressionMatch</span> match <span class="op">=</span> it<span class="op">.</span>next<span class="op">();</span></span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a>        <span class="fu">qInfo</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Found URL:&quot;</span> <span class="op">&lt;&lt;</span> match<span class="op">.</span>captured<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb46-12"><a href="#cb46-12" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb46-13"><a href="#cb46-13" tabindex="-1"></a>    <span class="ex">QString</span> text <span class="op">=</span> <span class="st">&quot;Visit https://www.qt.io or &quot;</span></span>
<span id="cb46-14"><a href="#cb46-14" tabindex="-1"></a>    <span class="st">&quot;https://www.google.de for more information.&quot;</span><span class="op">;</span></span>
<span id="cb46-15"><a href="#cb46-15" tabindex="-1"></a>    findUrls<span class="op">(</span>text<span class="op">);</span></span>
<span id="cb46-16"><a href="#cb46-16" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb46-17"><a href="#cb46-17" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-41"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qsettings-1">QSettings</h2>
<p>Mittels QSettings kann man folgende Einstellungsdateien
verarbeiten:</p>
<ol style="list-style-type: decimal">
<li><strong>QSettings::IniFormat</strong> für .ini Files</li>
<li><strong>QSettings::NativeFormat</strong> für Registry / .pfiles /
.txt</li>
</ol>
<p>Desweiteren kann man noch zwischen 32bit und 64bit Registry Formaten
wählen</p>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-42"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="container-klassen">Container Klassen</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Collections</strong> QVector, QSet, QVarLengthArray und
QList</p></li>
<li><p><strong>QBitArray</strong> Bitset</p></li>
<li><p><strong>Maps/Dictionaries</strong> QMap, QHash, QMultiMap,
QMultiHash</p></li>
</ol>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-43"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="pointers">Pointers</h2>
<ul>
<li><p>QPointer (Guarded Pointer, wird intern “null” wenn das QObject
gelöscht wird)</p></li>
<li><p>QSharedPointer, QWeakPointer</p></li>
</ul>
<p>QWeakPointer hat toStringRef() und ist somit auch ein
GuardedPointer</p>
<ul>
<li>Die Verwendung der Pendants aus der Standardbibliothek ist natürlich
auch möglich. Das Pendant zu QSharedPointer ist std::shared_ptr und zu
QWeakPointer ist std::weak_ptr.</li>
</ul>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-44"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qsharedpointer">QSharedPointer</h2>
<pre><code>class TestObject {
public:
    TestObject() {
        qDebug() &lt;&lt; &quot;TestObject()&quot;;
    }

    ~TestObject() {
        qDebug() &lt;&lt; &quot;~TestObject()&quot;;
    }

    void sayHello() const {
        qDebug() &lt;&lt; &quot;Hello from TestObject&quot;;
    }
};

QSharedPointer&lt;TestObject&gt; ptr1(new TestObject());
ptr1-&gt;sayHello();</code></pre>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-45"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="smart-pointer">Smart Pointer</h2>
<div class="sourceCode" id="cb48"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="co">// Beispiel für verschiedene Pointer-Arten</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="kw">class</span> MainWindow <span class="op">:</span> <span class="kw">public</span> <span class="ex">QMainWindow</span> <span class="op">{</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>    <span class="co">// Unique ownership mit Smart Pointer</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a>    <span class="bu">std::</span>unique_ptr<span class="op">&lt;</span><span class="ex">QSettings</span><span class="op">&gt;</span> <span class="va">m_settings</span><span class="op">;</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a>    <span class="co">// Qt parent-child ownership</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a>    <span class="ex">QLabel</span><span class="op">*</span> <span class="va">m_statusLabel</span><span class="op">;</span></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a>    <span class="co">// Shared ownership</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a>    <span class="ex">QSharedPointer</span><span class="op">&lt;</span><span class="ex">QNetworkAccessManager</span><span class="op">&gt;</span> <span class="va">m_networkManager</span><span class="op">;</span>    </span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a>    <span class="co">// Weak reference</span></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a>    <span class="ex">QPointer</span><span class="op">&lt;</span><span class="ex">QDialog</span><span class="op">&gt;</span> <span class="va">m_activeDialog</span><span class="op">;</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a>    </span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb48-15"><a href="#cb48-15" tabindex="-1"></a>    MainWindow<span class="op">(</span><span class="ex">QWidget</span><span class="op">*</span> parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QMainWindow</span><span class="op">(</span>parent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-16"><a href="#cb48-16" tabindex="-1"></a>        <span class="co">// Initialization</span></span>
<span id="cb48-17"><a href="#cb48-17" tabindex="-1"></a>        <span class="va">m_settings</span> <span class="op">=</span> <span class="bu">std::</span>make_unique<span class="op">&lt;</span><span class="ex">QSettings</span><span class="op">&gt;(</span><span class="st">&quot;MyCompany&quot;</span><span class="op">,</span> <span class="st">&quot;MyApp&quot;</span><span class="op">);</span></span>
<span id="cb48-18"><a href="#cb48-18" tabindex="-1"></a>        <span class="co">// Qt übernimmt Ownership durch Parent-Child Beziehung</span></span>
<span id="cb48-19"><a href="#cb48-19" tabindex="-1"></a>        <span class="va">m_statusLabel</span> <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb48-20"><a href="#cb48-20" tabindex="-1"></a>        <span class="co">// Shared ownership für ressourcenintensive Objekte</span></span>
<span id="cb48-21"><a href="#cb48-21" tabindex="-1"></a>        <span class="va">m_networkManager</span> <span class="op">=</span> <span class="ex">QSharedPointer</span><span class="op">&lt;</span><span class="ex">QNetworkAccessManager</span><span class="op">&gt;::</span>create<span class="op">();</span></span>
<span id="cb48-22"><a href="#cb48-22" tabindex="-1"></a>        <span class="co">// Weak pointer für optionale Referenzen</span></span>
<span id="cb48-23"><a href="#cb48-23" tabindex="-1"></a>        <span class="va">m_activeDialog</span> <span class="op">=</span> <span class="kw">nullptr</span><span class="op">;</span></span>
<span id="cb48-24"><a href="#cb48-24" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb48-25"><a href="#cb48-25" tabindex="-1"></a>    </span>
<span id="cb48-26"><a href="#cb48-26" tabindex="-1"></a>    <span class="dt">void</span> showDialog<span class="op">()</span> <span class="op">{</span></span>
<span id="cb48-27"><a href="#cb48-27" tabindex="-1"></a>        <span class="co">// Sicherer Umgang mit Dialogen</span></span>
<span id="cb48-28"><a href="#cb48-28" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span><span class="va">m_activeDialog</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb48-29"><a href="#cb48-29" tabindex="-1"></a>            <span class="ex">QDialog</span><span class="op">*</span> dialog <span class="op">=</span> <span class="kw">new</span> <span class="ex">QDialog</span><span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb48-30"><a href="#cb48-30" tabindex="-1"></a>            <span class="va">m_activeDialog</span> <span class="op">=</span> dialog<span class="op">;</span></span>
<span id="cb48-31"><a href="#cb48-31" tabindex="-1"></a>            dialog<span class="op">-&gt;</span>show<span class="op">();</span></span>
<span id="cb48-32"><a href="#cb48-32" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb48-33"><a href="#cb48-33" tabindex="-1"></a>            <span class="va">m_activeDialog</span><span class="op">-&gt;</span>raise<span class="op">();</span></span>
<span id="cb48-34"><a href="#cb48-34" tabindex="-1"></a>            <span class="va">m_activeDialog</span><span class="op">-&gt;</span>activateWindow<span class="op">();</span></span>
<span id="cb48-35"><a href="#cb48-35" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb48-36"><a href="#cb48-36" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb48-37"><a href="#cb48-37" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-46"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qmap">QMap</h2>
<pre><code>QStringList words = { &quot;one&quot;, &quot;two&quot;, &quot;one&quot;,
  &quot;one&quot;, &quot;two&quot;, &quot;three&quot; };
QMap&lt;QString, int&gt; wordCount;
for (const QString &amp;word : words) {
    QString lowerWord = word.toLower();
    wordCount[lowerWord]++;
}
QMapIterator&lt;QString, int&gt; i(wordCount);
while (i.hasNext()) {
  i.next();
  qInfo() &lt;&lt; i.key() &lt;&lt; &quot;: &quot; &lt;&lt; i.value();
}</code></pre>
</div>
<div id="qt-grundlagen-qobjects-und-signals-slots-47"
class="slide section level1">
<h1>4.3 Qt-Grundlagen / QObjects und Signals &amp; Slots</h1>
<h2 id="qlist-and-qt-algorithms">QList and Qt Algorithms</h2>
<p>QList ist keine Linked-List und ist als Array von Pointern
implementiert. In der Regel möchte man QVector or std::vector benutzen.
QList hat eine weitere Ebene der Indirektion.</p>
<p><a href="https://doc.qt.io/qt-6/qtalgorithms.html">Algorithmen in
Qt</a></p>
<p>Pointer von QObjects und Subklassen wie QWidgets können zum Beispiel
in einem <code>std::vector&lt;shared_ptr&lt;QObject&gt;&gt;</code>
gespeichert werden.</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="co">// widgets in a vector of shared pointers</span></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>shared_ptr<span class="op">&lt;</span><span class="ex">QWidget</span><span class="op">&gt;&gt;</span> widgets<span class="op">;</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>widgets<span class="op">.</span>push_back<span class="op">(</span><span class="bu">std::</span>make_shared<span class="op">&lt;</span><span class="ex">QPushButton</span><span class="op">&gt;(</span><span class="st">&quot;OK&quot;</span><span class="op">));</span></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>widgets<span class="op">.</span>push_back<span class="op">(</span><span class="bu">std::</span>make_shared<span class="op">&lt;</span><span class="ex">QLabel</span><span class="op">&gt;(</span><span class="st">&quot;Hello, World!&quot;</span><span class="op">));</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgetentwicklung" class="slide section level1">
<h1>4.4 Qt-Grundlagen / Widgetentwicklung</h1>
<h2 id="qwidget">QWidget</h2>
<ul>
<li>QWidget ist die Basisklasse für alle UI-Objekte in Qt, leitet sich
wiederrum von QObject ab.</li>
<li>Eigenschaften die alle Widgets haben sind:
<ul>
<li>QCursor cursor</li>
<li>bool enabled</li>
<li>bool visible</li>
<li>QFont font</li>
<li>QSize size (auch einzeln als width und height)</li>
<li>QPoint pos (auch einzeln als x und y)</li>
<li>QString toolTip</li>
<li>QString styleSheet (mit CSS-ähnlicher Syntax)</li>
<li>und noch einige mehr</li>
</ul></li>
<li>Gemäß Qt-Konventionen gibt es für diese Eigenschaften auch
entsprechende Setter-Methoden, die mit set beginnen, z.B. setFont,
setToolTip, setStyleSheet, etc.</li>
</ul>
</div>
<div id="qt-grundlagen-widgetentwicklung-1"
class="slide section level1">
<h1>4.4 Qt-Grundlagen / Widgetentwicklung</h1>
<h2 id="qwidget-protected-methoden">QWidget Protected Methoden</h2>
<ul>
<li>QWidget hat auch einige protected Methoden, die zum Überladen
gedacht sind.
<ul>
<li>paintEvent(QPaintEvent *event)</li>
<li>resizeEvent(QResizeEvent *event)</li>
<li>mousePressEvent(QMouseEvent *event)</li>
<li>mouseReleaseEvent(QMouseEvent *event)</li>
<li>mouseMoveEvent(QMouseEvent *event)</li>
<li>keyPressEvent(QKeyEvent *event)</li>
<li>focusInEvent(QFocusEvent *event)</li>
<li>focusOutEvent(QFocusEvent *event)</li>
</ul></li>
<li>Diese Methoden werden aufgerufen, wenn das entsprechende Ereignis
eintritt. In der Regel sollte man Ereignis-Handler mittels Connect auf
die entsprechenden Signale setzen und nicht die protected Methoden
überschreiben. Beim paintEvent ist das überladen jedoch notwendig und
üblich.</li>
</ul>
</div>
<div id="qt-grundlagen-widgetentwicklung-2"
class="slide section level1">
<h1>4.4 Qt-Grundlagen / Widgetentwicklung</h1>
<h2 id="qwidget-als-qobject">QWidget als QObject</h2>
<ul>
<li><p>Da QWidget von QObject abgeleitet sind können auch alle QObject
Methoden und Features verwendet werden.</p></li>
<li><p>QObjects können nicht mittels Copy-Konstruktor kopiert werden und
das gilt somit auch für QWidget und alle davon abgeleiteten
Klassen.</p></li>
<li><p>Das Ownership von QObjects wird durch die Parent-Kind-Beziehung
geregelt. Ein QObject kann einen Parent haben und somit auch Kinder.
Wenn der Parent gelöscht wird, werden auch die Kinder gelöscht.</p></li>
</ul>
</div>
<div id="qt-grundlagen-widgetentwicklung-3"
class="slide section level1">
<h1>4.4 Qt-Grundlagen / Widgetentwicklung</h1>
<h2 id="qwidget-als-container-für-andere-widgets">QWidget als Container
für andere Widgets</h2>
<ul>
<li>QWidget kann auch als Container für andere Widgets verwendet
werden.</li>
<li>Ein QWidget wird durch den Konstruktor von QWidget initialisiert und
kann dann mittels addWidget() oder addLayout() weitere Widgets oder
Layouts hinzugefügt werden.</li>
<li>Einem Layout können auch über addWidget() oder addLayout() weitere
Widgets oder Layouts hinzugefügt werden.</li>
<li>Ein Widget ohne Layout wird die Größe und die Positionen der
hinzugefügten Widgets nicht automatisch anpassen. Ein Widget ohne Layout
ist daher sehr selten.</li>
</ul>
</div>
<div id="qt-grundlagen-layouts-und-stile" class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts">Layouts</h2>
<ul>
<li>Layouts sind Container, die die Positionierung von Widgets auf einem
Fenster steuern. Folgende Layouts sind die wichtigsten
<ul>
<li>QVBoxLayout, Anordnung der Widgets in einer Spalte</li>
<li>QHBoxLayout, Anordnung der Widgets in einer Zeile</li>
<li>QGridLayout, Anordnung der Widgets in einem Raster</li>
<li>QFormLayout, für Formulare</li>
<li>QStackedLayout, für alternative Ansichten von denen immer nur eine
sichtbar ist</li>
<li>QSplitter, nicht wirklich ein Layout, aber ähnlich und erlaubt es
einen Bereich zu teilen und die Größe der beiden Bereiche zu ändern</li>
</ul></li>
<li>Um einen Container zu erstellen, nimmt man QWidget als Parent und
übergibt diesen an den Konstruktor des Layouts.</li>
</ul>
<div class="sourceCode" id="cb51"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(</span>myWidget<span class="op">);</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-layouts-und-stile-1"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts-abstände">Layouts Abstände</h2>
<ul>
<li>Innenabstände von Widgets:
<ul>
<li>Die Contents-Margins sind die Abstände zwischen dem Rand des Widgets
und dem Inhalt des Widgets. Wenn ein Layout dann sollten die
Contents-Margins auf beim Layout gesetzt werden.</li>
<li>Der Standardwert für die Contents-Margins ist 9 Pixel für alle
Richtungen.</li>
<li>Das Objekt QMargins wird verwendet um die Abstände zu setzen.
QMargins ist ein Wertetyp und wird als Parameter übergeben.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb52"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>mainLayout<span class="op">-&gt;</span>setContentsMargins<span class="op">(</span><span class="ex">QMargins</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">));</span> <span class="co">// keine Innenabstände</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-layouts-und-stile-2"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts-beispiel">Layouts Beispiel</h2>
<ul>
<li>Das folgende Beispiel zeigt die Verwendung von QVBoxLayout und zeigt
3 Label übereinander an.</li>
</ul>
<div class="sourceCode" id="cb53"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QWidget&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QLabel&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QVBoxLayout&gt;</span></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Layouts Beispiel&quot;</span><span class="op">);</span></span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb53-14"><a href="#cb53-14" tabindex="-1"></a></span>
<span id="cb53-15"><a href="#cb53-15" tabindex="-1"></a>    <span class="kw">auto</span> label1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 1&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb53-16"><a href="#cb53-16" tabindex="-1"></a>    <span class="kw">auto</span> label2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 2&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb53-17"><a href="#cb53-17" tabindex="-1"></a>    <span class="kw">auto</span> label3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 3&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb53-18"><a href="#cb53-18" tabindex="-1"></a></span>
<span id="cb53-19"><a href="#cb53-19" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label1<span class="op">);</span></span>
<span id="cb53-20"><a href="#cb53-20" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label2<span class="op">);</span></span>
<span id="cb53-21"><a href="#cb53-21" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label3<span class="op">);</span></span>
<span id="cb53-22"><a href="#cb53-22" tabindex="-1"></a></span>
<span id="cb53-23"><a href="#cb53-23" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb53-24"><a href="#cb53-24" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb53-25"><a href="#cb53-25" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-layouts-und-stile-3"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="size-hints">Size Hints</h2>
<ul>
<li><code>QSizePolicy::Fixed</code>: Die
<code>QWidget::sizeHint()</code> ist die einzige akzeptable Alternative,
sodass das Widget niemals wachsen oder schrumpfen kann (z.B. die
vertikale Richtung eines Push-Buttons).</li>
<li><code>QSizePolicy::Minimum</code>: Die <code>sizeHint()</code> ist
minimal und ausreichend. Das Widget kann erweitert werden, aber es gibt
keinen Vorteil, wenn es größer ist (z.B. die horizontale Richtung eines
Push-Buttons). Es kann nicht kleiner sein als die von
<code>sizeHint()</code> bereitgestellte Größe.</li>
<li><code>QSizePolicy::Maximum</code>: Die <code>sizeHint()</code> ist
ein Maximum. Das Widget kann beliebig geschrumpft werden, ohne dass
andere Widgets den Platz benötigen (z.B. eine Trennlinie). Es kann nicht
größer sein als die von <code>sizeHint()</code> bereitgestellte
Größe.</li>
<li><code>QSizePolicy::Preferred</code>: Die <code>sizeHint()</code> ist
am besten, aber das Widget kann geschrumpft werden und bleibt dennoch
nützlich. Das Widget kann erweitert werden, aber es gibt keinen Vorteil,
wenn es größer ist als <code>sizeHint()</code> (die
Standard-<code>QWidget</code>-Richtlinie).</li>
<li><code>QSizePolicy::Expanding</code>: Die <code>sizeHint()</code> ist
eine sinnvolle Größe, aber das Widget kann geschrumpft werden und bleibt
dennoch nützlich. Das Widget kann zusätzlichen Platz nutzen, daher
sollte es so viel Platz wie möglich bekommen (z.B. die horizontale
Richtung eines horizontalen Schiebereglers).</li>
<li><code>QSizePolicy::MinimumExpanding</code>: Die
<code>sizeHint()</code> ist minimal und ausreichend. Das Widget kann
zusätzlichen Platz nutzen, daher sollte es so viel Platz wie möglich
bekommen (z.B. die horizontale Richtung eines horizontalen
Schiebereglers).</li>
<li><code>QSizePolicy::Ignored</code>: Die <code>sizeHint()</code> wird
ignoriert. Das Widget erhält so viel Platz wie möglich.</li>
</ul>
</div>
<div id="qt-grundlagen-layouts-und-stile-4"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="alignments">Alignments</h2>
<ul>
<li>Innerhalb eines VBoxLayout oder eines HBoxLayout können die Widgets
entlang der Gegenachse ausgerichtet werden. Die folgenden Werte sind
möglich:
<ul>
<li><code>Qt::AlignLeft</code>: Links ausgerichtet</li>
<li><code>Qt::AlignRight</code>: Rechts ausgerichtet</li>
<li><code>Qt::AlignHCenter</code>: Horizontal zentriert</li>
<li><code>Qt::AlignJustify</code>: Gerechtfertigt</li>
<li><code>Qt::AlignTop</code>: Oben ausgerichtet</li>
<li><code>Qt::AlignBottom</code>: Unten ausgerichtet</li>
<li><code>Qt::AlignVCenter</code>: Vertikal zentriert</li>
<li><code>Qt::AlignBaseline</code>: Grundlinie</li>
</ul></li>
</ul>
</div>
<div id="qt-grundlagen-layouts-und-stile-5"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="alignments-1">Alignments</h2>
<ul>
<li>Beispiel: Labels links ausgerichtet, rechts ausgerichtet und
zentriert</li>
</ul>
<p><img src="./images/layout1.png" /></p>
</div>
<div id="qt-grundlagen-layouts-und-stile-6"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="alignments-beispiel">Alignments Beispiel</h2>
<ul>
<li>Branch <code>layoutalignments</code></li>
</ul>
<div class="sourceCode" id="cb54"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span> <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Layouts&quot;</span><span class="op">);</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>    <span class="ex">QVBoxLayout</span> <span class="op">*</span>layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a>    <span class="ex">QLabel</span> <span class="op">*</span>label1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 1&quot;</span><span class="op">);</span></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a>    label1<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: red;&quot;</span><span class="op">);</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a>    <span class="ex">QLabel</span> <span class="op">*</span>label2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 2&quot;</span><span class="op">);</span></span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a>    label2<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: green;&quot;</span><span class="op">);</span></span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a>    <span class="ex">QLabel</span> <span class="op">*</span>label3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 3&quot;</span><span class="op">);</span></span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a>    label3<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: blue;&quot;</span><span class="op">);</span></span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a>    layout<span class="op">-&gt;</span>setSpacing<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addStretch<span class="op">();</span>  <span class="co">// Expander/Platzschlucker oben</span></span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label1<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ex">Qt::AlignLeft</span><span class="op">);</span></span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label2<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ex">Qt::AlignHCenter</span><span class="op">);</span></span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label3<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ex">Qt::AlignRight</span><span class="op">);</span></span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addStretch<span class="op">();</span> <span class="co">// Expander/Platzschlucker unten</span></span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a></span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb54-20"><a href="#cb54-20" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-layouts-und-stile-7"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="verschachtelte-layouts">Verschachtelte Layouts</h2>
<ul>
<li><p>HBox und VBox können auch ineinander verschachtelt werden um
komplexere Layouts zu erstellen.</p></li>
<li><p>Beispiel: Labels wachsen vertikal, darüber eine horizontale Box
mit Buttons die nicht wächst.</p></li>
</ul>
<p><img src="./images/layout2.png" /></p>
</div>
<div id="qt-grundlagen-layouts-und-stile-8"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="verschachtelte-layouts-1">Verschachtelte Layouts</h2>
<p><code>- Branch:</code>layoutsnested`</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span> <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Layouts&quot;</span><span class="op">);</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a>    <span class="kw">auto</span> mainLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>    <span class="kw">auto</span> topRow <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWidget</span><span class="op">(&amp;</span>window<span class="op">);</span> <span class="co">// Container für die Buttons</span></span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a>    <span class="kw">auto</span> topRowLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QHBoxLayout</span><span class="op">(</span>topRow<span class="op">);</span> <span class="co">// Layout für den Button Container</span></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a>    <span class="kw">auto</span> button1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a>    <span class="kw">auto</span> button2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a>    <span class="kw">auto</span> button3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button1<span class="op">);</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button2<span class="op">);</span></span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button3<span class="op">);</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a>    <span class="kw">auto</span> label1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 1&quot;</span><span class="op">);</span></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a>    label1<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: red;&quot;</span><span class="op">);</span></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a>    label1<span class="op">-&gt;</span>setAlignment<span class="op">(</span><span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a>    <span class="kw">auto</span> label2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 2&quot;</span><span class="op">);</span></span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a>    label2<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: green;&quot;</span><span class="op">);</span></span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a>    label2<span class="op">-&gt;</span>setAlignment<span class="op">(</span><span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>setSpacing<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>topRow<span class="op">);</span> <span class="co">// Kein Wachsen</span></span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label1<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="ex">Qt::Alignment</span><span class="op">());</span>  <span class="co">// 1 = Expanding</span></span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label2<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="ex">Qt::Alignment</span><span class="op">());</span></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a></span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-layouts-und-stile-9"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="styles-in-qt">Styles in Qt</h2>
<ul>
<li>Qt verwendet CSS für die Gestaltung von Widgets. Dieses CSS ist
jedoch nicht vollständig kompatibel mit dem Web-CSS.</li>
<li>Multiline-Strings können mit <code>R"(...)"</code> definiert
werden.</li>
</ul>
<div class="sourceCode" id="cb56"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="co">// Beispiel für Custom Widget Styling</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>widget<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">R&quot;(</span></span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="vs">    QWidget {</span></span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a><span class="vs">        background-color: #f0f0f0;</span></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="vs">        border: 1px solid #cccccc;</span></span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="vs">        border-radius: 4px;</span></span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a><span class="vs">    QWidget:hover {</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a><span class="vs">        background-color: #e0e0e0;</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a><span class="vs">        border-color: #999999;</span></span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a><span class="st">)&quot;</span><span class="op">);</span></span></code></pre></div>
<h2 id="layouts-mit-splitter">Layouts mit Splitter</h2>
<ul>
<li><p>Splitter sind keine Layouts, aber sie können verwendet werden, um
Bereiche zu teilen und die Größe der Bereiche zu ändern.</p></li>
<li><p>Splitter sollten IMMER(!) verwendet werden, wenn es eine
Aufteilung in Bereiche gibt.</p></li>
<li><p>Beispiel: Splitter mit 2 Labels</p></li>
</ul>
<p><img src="./images/layout3.png" /></p>
</div>
<div id="qt-grundlagen-layouts-und-stile-10"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts-mit-splitter-1">Layouts mit Splitter</h2>
<ul>
<li>Branch: <code>layoutsplitter</code></li>
</ul>
<div class="sourceCode" id="cb57"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span> <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Layouts&quot;</span><span class="op">);</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>    <span class="kw">auto</span> mainLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>    <span class="kw">auto</span> topRow <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWidget</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a>    <span class="kw">auto</span> topRowLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QHBoxLayout</span><span class="op">(</span>topRow<span class="op">);</span></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a>    <span class="kw">auto</span> button1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a>    <span class="kw">auto</span> button2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb57-11"><a href="#cb57-11" tabindex="-1"></a>    <span class="kw">auto</span> button3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">);</span></span>
<span id="cb57-12"><a href="#cb57-12" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button1<span class="op">);</span></span>
<span id="cb57-13"><a href="#cb57-13" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button2<span class="op">);</span></span>
<span id="cb57-14"><a href="#cb57-14" tabindex="-1"></a>    topRowLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button3<span class="op">);</span></span>
<span id="cb57-15"><a href="#cb57-15" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" tabindex="-1"></a>    <span class="kw">auto</span> splitter <span class="op">=</span> <span class="kw">new</span> <span class="ex">QSplitter</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb57-17"><a href="#cb57-17" tabindex="-1"></a>    <span class="kw">auto</span> label1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 1&quot;</span><span class="op">);</span></span>
<span id="cb57-18"><a href="#cb57-18" tabindex="-1"></a>    label1<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: red;&quot;</span><span class="op">);</span></span>
<span id="cb57-19"><a href="#cb57-19" tabindex="-1"></a>    label1<span class="op">-&gt;</span>setAlignment<span class="op">(</span><span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb57-20"><a href="#cb57-20" tabindex="-1"></a>    <span class="kw">auto</span> label2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span><span class="st">&quot;Label 2&quot;</span><span class="op">);</span></span>
<span id="cb57-21"><a href="#cb57-21" tabindex="-1"></a>    label2<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;color: white; padding: 4px; background-color: green;&quot;</span><span class="op">);</span></span>
<span id="cb57-22"><a href="#cb57-22" tabindex="-1"></a>    label2<span class="op">-&gt;</span>setAlignment<span class="op">(</span><span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb57-23"><a href="#cb57-23" tabindex="-1"></a>    splitter<span class="op">-&gt;</span>addWidget<span class="op">(</span>label1<span class="op">);</span></span>
<span id="cb57-24"><a href="#cb57-24" tabindex="-1"></a>    splitter<span class="op">-&gt;</span>addWidget<span class="op">(</span>label2<span class="op">);</span></span>
<span id="cb57-25"><a href="#cb57-25" tabindex="-1"></a>    splitter<span class="op">-&gt;</span>setSizes<span class="op">(</span><span class="ex">QList</span><span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;{</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">200</span> <span class="op">});</span> <span class="co">// initiale Verteilung beim Splitter</span></span>
<span id="cb57-26"><a href="#cb57-26" tabindex="-1"></a></span>
<span id="cb57-27"><a href="#cb57-27" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>setSpacing<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb57-28"><a href="#cb57-28" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>topRow<span class="op">);</span></span>
<span id="cb57-29"><a href="#cb57-29" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>splitter<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb57-30"><a href="#cb57-30" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>setContentsMargins<span class="op">(</span><span class="ex">QMargins</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">));</span> <span class="co">// keine Innenabstände</span></span>
<span id="cb57-31"><a href="#cb57-31" tabindex="-1"></a></span>
<span id="cb57-32"><a href="#cb57-32" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb57-33"><a href="#cb57-33" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>Bemerkung: Die Parentpointer der Widgets sind nicht gesetzt.</li>
</ul>
</div>
<div id="qt-grundlagen-layouts-und-stile-11"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts-mit-splitter-2">Layouts mit Splitter</h2>
<ul>
<li>Grid Layouts werden benötigt um Widgets in einem Raster
anzuordnen.</li>
</ul>
<p><img src="./images/layout4.png" /></p>
</div>
<div id="qt-grundlagen-layouts-und-stile-12"
class="slide section level1">
<h1>4.5 Qt-Grundlagen / Layouts und Stile</h1>
<h2 id="layouts-mit-grid">Layouts mit Grid</h2>
<ul>
<li>Branch: <code>gridlayout</code></li>
</ul>
<div class="sourceCode" id="cb58"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QApplication&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QWidget&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QLabel&gt;</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QString&gt;</span></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QGridLayout&gt;</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;memory&gt;</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> std<span class="op">;</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>    <span class="kw">auto</span> window <span class="op">=</span> make_unique<span class="op">&lt;</span><span class="ex">QWidget</span><span class="op">&gt;();</span>  <span class="co">// QWidget* als smart-pointer</span></span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a>    window<span class="op">-&gt;</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Layouts Beispiel&quot;</span><span class="op">);</span></span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a>    window<span class="op">-&gt;</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a>    </span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a>    <span class="at">const</span> <span class="kw">auto</span> PER_ROW <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb58-18"><a href="#cb58-18" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QGridLayout</span><span class="op">(</span>window<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb58-19"><a href="#cb58-19" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> c <span class="op">=</span> <span class="ch">&#39;0&#39;</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">;</span> c<span class="op">++,</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb58-20"><a href="#cb58-20" tabindex="-1"></a>        <span class="kw">auto</span> text <span class="op">=</span> <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;%1&quot;</span><span class="op">).</span>arg<span class="op">(</span><span class="ex">QChar</span><span class="op">((</span>c<span class="op">)));</span></span>
<span id="cb58-21"><a href="#cb58-21" tabindex="-1"></a>        <span class="kw">auto</span> label <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span>text<span class="op">,</span> window<span class="op">.</span>get<span class="op">());</span></span>
<span id="cb58-22"><a href="#cb58-22" tabindex="-1"></a>        label<span class="op">-&gt;</span>setAlignment<span class="op">(</span><span class="ex">Qt::AlignCenter</span><span class="op">);</span> <span class="co">// Text-Alignment im Label</span></span>
<span id="cb58-23"><a href="#cb58-23" tabindex="-1"></a>        label<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;background-color: #f1f1f1; font-size: 64px;&quot;</span><span class="op">);</span></span>
<span id="cb58-24"><a href="#cb58-24" tabindex="-1"></a>        label<span class="op">-&gt;</span>setContentsMargins<span class="op">(</span><span class="ex">QMargins</span><span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">16</span><span class="op">));</span></span>
<span id="cb58-25"><a href="#cb58-25" tabindex="-1"></a>        <span class="kw">auto</span> row <span class="op">=</span> i <span class="op">/</span> PER_ROW<span class="op">;</span></span>
<span id="cb58-26"><a href="#cb58-26" tabindex="-1"></a>        <span class="kw">auto</span> column <span class="op">=</span> i <span class="op">%</span> PER_ROW<span class="op">;</span></span>
<span id="cb58-27"><a href="#cb58-27" tabindex="-1"></a>        layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>label<span class="op">,</span> row<span class="op">,</span> column<span class="op">);</span></span>
<span id="cb58-28"><a href="#cb58-28" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb58-29"><a href="#cb58-29" tabindex="-1"></a>    window<span class="op">-&gt;</span>show<span class="op">();</span></span>
<span id="cb58-30"><a href="#cb58-30" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb58-31"><a href="#cb58-31" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="widgets-überblick">Widgets Überblick</h2>
<ul>
<li><p>Die Basisklasse für alle Widgets in Qt ist <code>QWidget</code>.
Qt spricht von Widgets, wenn es um die Benutzeroberfläche geht und nicht
von Controls.</p></li>
<li><p>Die wichtigsten Widgets sind:</p></li>
<li><p><code>QWidget</code> - Die Basisklasse für alle Widgets und ein
Container für Layouts</p></li>
<li><p><code>QLabel</code> - Zeigt Text oder Bilder an</p></li>
<li><p><code>QPushButton</code> - Ein Button, der auf Klicks
reagiert</p></li>
<li><p><code>QCheckBox</code> - Ein Kontrollkästchen, das ein- oder
ausgeschaltet werden kann</p></li>
<li><p><code>QRadioButton</code> - Ein Optionsfeld, das aus einer Gruppe
von Optionen ausgewählt werden kann</p></li>
<li><p><code>QComboBox</code> - Ein Dropdown-Menü, das eine Liste von
Optionen anzeigt</p></li>
<li><p><code>QLineEdit</code> - Ein Textfeld, in dem der Benutzer Text
eingeben kann</p></li>
<li><p><code>QTextEdit</code> - Ein Textfeld, in dem der Benutzer
mehrzeiligen Text eingeben kann</p></li>
<li><p><code>QSlider</code> - Ein Schieberegler, der einen Wert zwischen
einem Minimum und einem Maximum auswählt</p></li>
<li><p><code>QProgressBar</code> - Eine Fortschrittsanzeige, die den
Fortschritt einer Aufgabe anzeigt</p></li>
<li><p><code>QSpinBox</code> - Ein Eingabefeld, das einen numerischen
Wert auswählt</p></li>
<li><p><code>QDial</code> - Ein Drehknopf, der einen Wert zwischen einem
Minimum und einem Maximum auswählt</p></li>
<li><p><code>QCalendarWidget</code> - Ein Kalender, der ein Datum
auswählt</p></li>
<li><p><code>QTimeEdit</code> - Ein Eingabefeld, das eine Uhrzeit
auswählt</p></li>
<li><p><code>QDateEdit</code> - Ein Eingabefeld, das ein Datum
auswählt</p></li>
<li><p><code>QDateTimeEdit</code> - Ein Eingabefeld, das ein Datum und
eine Uhrzeit auswählt</p></li>
<li><p><code>QCalendarWidget</code> - Ein Kalender, der ein Datum
auswählt</p></li>
<li><p><code>QSplitter</code> - Ein Widget, das andere Widgets
horizontal oder vertikal aufteilt</p></li>
<li><p><code>QFontComboBox</code> - Ein Dropdown-Menü, das eine Liste
von Schriftarten anzeigt</p></li>
<li><p><code>QListWidget</code> - Eine Liste von Elementen, die
ausgewählt werden können</p></li>
<li><p><code>QTreeWidget</code> - Eine hierarchische Liste von
Elementen, die ausgewählt werden können</p></li>
<li><p><code>QTableWidget</code> - Eine Tabelle von Elementen, die
ausgewählt werden können</p></li>
<li><p><code>QListVew</code> - Eine Liste von Elementen, die ausgewählt
werden können</p></li>
<li><p><code>QTreeView</code> - Eine hierarchische Liste von Elementen,
die ausgewählt werden können</p></li>
<li><p><code>QTableView</code> - Eine Tabelle von Elementen, die
ausgewählt werden können</p></li>
<li><p><code>QTextBrowser</code> - Ein Textfeld, das HTML-Text anzeigt,
aber nicht bearbeitet werden kann. unterstützt Richtext, Links und
Bilder</p></li>
<li><p><code>QWebEngineView</code> - Ein Widget, das Webseiten anzeigt
und interaktive Webinhalte unterstützt</p></li>
</ul>
</div>
<div id="qt-grundlagen-widgets-1" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="widgets-überblick-gemeinsame-eigenschaften">Widgets Überblick,
gemeinsame Eigenschaften</h2>
<ul>
<li><p>Alle Widgets können aktiv und inaktiv sein sowie sichtbar und
unsichtbar sein.</p></li>
<li><p>Alle Widgets haben eine Position und eine Größe.</p></li>
<li><p>Alle Widgets haben optional einen Cursor</p></li>
<li><p>Alle Widgets haben optional eine Schriftart und einen optionalen
ToolTip</p></li>
<li><p>Widgets können mit Stylesheets gestyled werden. Stylesheets sind
eine CSS-ähnliche Syntax, die von Qt unterstützt wird. Stylesheets
können auf Widgets, Layouts und sogar auf die gesamte Anwendung
angewendet werden.</p></li>
</ul>
</div>
<div id="qt-grundlagen-widgets-2" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qlabel-mit-styles-und-bildern">QLabel mit Styles und
Bildern</h2>
<ul>
<li><p>QLabel unterstützt: - Qt-HTML Formatierung - Qt Stylesheets - Qt
Rich Text - Selektion von Text - Bilder (in Form von QPixmap)</p></li>
<li><p>Beispiel: Label-Variante mit Bild und Stylesheet</p></li>
</ul>
<p><img src="./images/qlabel.png" /></p>
</div>
<div id="qt-grundlagen-widgets-3" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qlabel-mit-styles-und-bildern-1">QLabel mit Styles und
Bildern</h2>
<ul>
<li>Branch: <code>qlabel</code></li>
</ul>
<div class="sourceCode" id="cb59"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>argc <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a>        <span class="ex">QMessageBox::critical</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Falscher Aufruf&quot;</span><span class="op">,</span> <span class="st">&quot;Aufruf mit Bild als erster Parameter&quot;</span><span class="op">);</span></span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a>        <span class="ex">QApplication::exit</span><span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>    <span class="ex">QByteArray</span> data<span class="op">;</span></span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a>        <span class="ex">QFile</span> f<span class="op">(</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb59-11"><a href="#cb59-11" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>f<span class="op">.</span>exists<span class="op">()</span> <span class="op">||</span> <span class="op">!</span>f<span class="op">.</span>fileName<span class="op">().</span>toLower<span class="op">().</span>endsWith<span class="op">(</span><span class="st">&quot;png&quot;</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb59-12"><a href="#cb59-12" tabindex="-1"></a>            <span class="ex">QMessageBox::critical</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Falscher Aufruf&quot;</span><span class="op">,</span> <span class="st">&quot;png file muss beim Start angegeben werden.&quot;</span><span class="op">);</span></span>
<span id="cb59-13"><a href="#cb59-13" tabindex="-1"></a>            <span class="ex">QApplication::exit</span><span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb59-14"><a href="#cb59-14" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb59-15"><a href="#cb59-15" tabindex="-1"></a>        f<span class="op">.</span>open<span class="op">(</span><span class="ex">QFile::ReadOnly</span><span class="op">);</span></span>
<span id="cb59-16"><a href="#cb59-16" tabindex="-1"></a>        data <span class="op">=</span> f<span class="op">.</span>readAll<span class="op">();</span></span>
<span id="cb59-17"><a href="#cb59-17" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb59-18"><a href="#cb59-18" tabindex="-1"></a></span>
<span id="cb59-19"><a href="#cb59-19" tabindex="-1"></a>    <span class="kw">auto</span> mainLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb59-20"><a href="#cb59-20" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>setSpacing<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb59-21"><a href="#cb59-21" tabindex="-1"></a></span>
<span id="cb59-22"><a href="#cb59-22" tabindex="-1"></a>    <span class="kw">auto</span> headerArea <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWidget</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb59-23"><a href="#cb59-23" tabindex="-1"></a>    <span class="kw">auto</span> headerAreaLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QHBoxLayout</span><span class="op">(</span>headerArea<span class="op">);</span></span>
<span id="cb59-24"><a href="#cb59-24" tabindex="-1"></a>    <span class="kw">auto</span> pathLabel <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb59-25"><a href="#cb59-25" tabindex="-1"></a>    pathLabel<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;font-style: bold;&quot;</span><span class="op">);</span></span>
<span id="cb59-26"><a href="#cb59-26" tabindex="-1"></a>    pathLabel<span class="op">-&gt;</span>setTextInteractionFlags<span class="op">(</span><span class="ex">Qt::TextSelectableByMouse</span><span class="op">);</span> <span class="co">// selektierbar</span></span>
<span id="cb59-27"><a href="#cb59-27" tabindex="-1"></a>    headerAreaLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>pathLabel<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb59-28"><a href="#cb59-28" tabindex="-1"></a></span>
<span id="cb59-29"><a href="#cb59-29" tabindex="-1"></a>    <span class="kw">auto</span> imageArea <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWidget</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb59-30"><a href="#cb59-30" tabindex="-1"></a>    <span class="kw">auto</span> imageAreaLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QHBoxLayout</span><span class="op">(</span>imageArea<span class="op">);</span></span>
<span id="cb59-31"><a href="#cb59-31" tabindex="-1"></a>    <span class="kw">auto</span> imageLabel <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">();</span></span>
<span id="cb59-32"><a href="#cb59-32" tabindex="-1"></a>    <span class="ex">QPixmap</span> pixmap<span class="op">;</span></span>
<span id="cb59-33"><a href="#cb59-33" tabindex="-1"></a>    pixmap<span class="op">.</span>loadFromData<span class="op">(</span>data<span class="op">);</span></span>
<span id="cb59-34"><a href="#cb59-34" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>pixmap<span class="op">.</span>height<span class="op">()</span> <span class="op">&gt;</span> <span class="dv">300</span><span class="op">)</span> pixmap <span class="op">=</span> pixmap<span class="op">.</span>scaledToHeight<span class="op">(</span><span class="dv">300</span><span class="op">,</span> <span class="ex">Qt::SmoothTransformation</span><span class="op">);</span></span>
<span id="cb59-35"><a href="#cb59-35" tabindex="-1"></a>    imageLabel<span class="op">-&gt;</span>setPixmap<span class="op">(</span>pixmap<span class="op">);</span></span>
<span id="cb59-36"><a href="#cb59-36" tabindex="-1"></a></span>
<span id="cb59-37"><a href="#cb59-37" tabindex="-1"></a>    imageArea<span class="op">-&gt;</span>setStyleSheet<span class="op">(</span><span class="st">&quot;background-color: #eeeeee;&quot;</span><span class="op">);</span></span>
<span id="cb59-38"><a href="#cb59-38" tabindex="-1"></a>    imageAreaLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>imageLabel<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="ex">Qt::AlignCenter</span><span class="op">);</span></span>
<span id="cb59-39"><a href="#cb59-39" tabindex="-1"></a></span>
<span id="cb59-40"><a href="#cb59-40" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>headerArea<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb59-41"><a href="#cb59-41" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>imageArea<span class="op">,</span> <span class="dv">1</span><span class="op">);</span> <span class="co">// stretch</span></span>
<span id="cb59-42"><a href="#cb59-42" tabindex="-1"></a></span>
<span id="cb59-43"><a href="#cb59-43" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb59-44"><a href="#cb59-44" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-4" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qpushbutton-qcheckbox-qcombobox">QPushButton, QCheckBox,
QComboBox</h2>
<ul>
<li>QPushButton ist der Button von Qt, Buttons können mit Stylesheets
gestyled werden.</li>
<li>Buttons können außerdem mit Icons versehen werden. Qt unterstützt
SVG Icons und PNG Icons. Qt hat auch eigene Icons, die über
<code>QStyle::StandardPixmap</code> referenziert werden können.</li>
</ul>
<div class="sourceCode" id="cb60"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="kw">auto</span> warningIcon <span class="op">=</span> <span class="ex">QApplication::style</span><span class="op">()-&gt;</span>standardIcon<span class="op">(</span><span class="ex">QStyle::SP_MessageBoxWarning</span><span class="op">);</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>button<span class="op">-&gt;</span>setIcon<span class="op">(</span>warningIcon<span class="op">);</span></span></code></pre></div>
<ul>
<li><p>QCheckBox kann ebenfalls mit Stylesheets gestyled werden und auch
die Icons von QPushButton verwenden.</p></li>
<li><p>QComboBox ist ein Dropdown-Menü, das eine Liste von Optionen
anzeigt. Die Optionen können mit <code>addItem()</code> hinzugefügt
werden. Die aktuelle Auswahl kann mit <code>currentIndex()</code> oder
<code>currentText()</code> abgefragt werden. Das Signal
<code>currentIndexChanged()</code> wird ausgesendet, wenn sich die
Auswahl ändert.</p></li>
<li><p>QComboBox kann auch mit Stylesheets gestyled werden. QComboBox
kann auch editierbar sein, d.h. der Benutzer kann eigene Werte eingeben.
Strenggenommen sind nicht editierbare QComboBoxes keine Comboboxes,
sondern Dropdown-Menüs oder SelectBoxes.</p></li>
<li><p>QComboBox wird mit Items initialisert die ein Label für die
Darstellung einen einen Wert vom Typ QVariant haben. Die Items können
auch mit <code>setItemData()</code> mit zusätzlichen Daten versehen
werden.</p></li>
<li><p>Beispiel: Buttons, Checkbox und Combobox</p></li>
</ul>
<p><img src="./images/qbuttons.png" /></p>
</div>
<div id="qt-grundlagen-widgets-5" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qpushbutton-qcheckbox-qcombobox-1">QPushButton, QCheckBox,
QComboBox</h2>
<ul>
<li>Branch: <code>buttons</code></li>
</ul>
<div class="sourceCode" id="cb61"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb61-2"><a href="#cb61-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb61-3"><a href="#cb61-3" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span> window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb61-4"><a href="#cb61-4" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb61-6"><a href="#cb61-6" tabindex="-1"></a>    <span class="kw">auto</span> button1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button 1&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb61-7"><a href="#cb61-7" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button1<span class="op">);</span></span>
<span id="cb61-8"><a href="#cb61-8" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" tabindex="-1"></a>    <span class="kw">auto</span> button2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Flat Button&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb61-10"><a href="#cb61-10" tabindex="-1"></a>    button2<span class="op">-&gt;</span>setFlat<span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb61-11"><a href="#cb61-11" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button2<span class="op">);</span></span>
<span id="cb61-12"><a href="#cb61-12" tabindex="-1"></a></span>
<span id="cb61-13"><a href="#cb61-13" tabindex="-1"></a>    <span class="kw">auto</span> button3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Disabled Button&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb61-14"><a href="#cb61-14" tabindex="-1"></a>    button3<span class="op">-&gt;</span>setDisabled<span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb61-15"><a href="#cb61-15" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button3<span class="op">);</span></span>
<span id="cb61-16"><a href="#cb61-16" tabindex="-1"></a></span>
<span id="cb61-17"><a href="#cb61-17" tabindex="-1"></a>    <span class="kw">auto</span> checkbox <span class="op">=</span> <span class="kw">new</span> <span class="ex">QCheckBox</span><span class="op">(</span><span class="st">&quot;Check me&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb61-18"><a href="#cb61-18" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>checkbox<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QCheckBox::checkStateChanged</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">,</span> <span class="op">[</span>checkbox<span class="op">]</span> <span class="op">{</span></span>
<span id="cb61-19"><a href="#cb61-19" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;checkbox changed: &quot;</span> <span class="op">&lt;&lt;</span> checkbox<span class="op">-&gt;</span>checkState<span class="op">();</span></span>
<span id="cb61-20"><a href="#cb61-20" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb61-21"><a href="#cb61-21" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>checkbox<span class="op">);</span></span>
<span id="cb61-22"><a href="#cb61-22" tabindex="-1"></a></span>
<span id="cb61-23"><a href="#cb61-23" tabindex="-1"></a>    <span class="kw">auto</span> combobox <span class="op">=</span> <span class="kw">new</span> <span class="ex">QComboBox</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb61-24"><a href="#cb61-24" tabindex="-1"></a>    combobox<span class="op">-&gt;</span>setEditable<span class="op">(</span><span class="kw">false</span><span class="op">);</span></span>
<span id="cb61-25"><a href="#cb61-25" tabindex="-1"></a>    combobox<span class="op">-&gt;</span>addItem<span class="op">(</span><span class="st">&quot;Option1&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb61-26"><a href="#cb61-26" tabindex="-1"></a>    combobox<span class="op">-&gt;</span>addItem<span class="op">(</span><span class="st">&quot;Option2&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb61-27"><a href="#cb61-27" tabindex="-1"></a>    combobox<span class="op">-&gt;</span>addItem<span class="op">(</span><span class="st">&quot;Option3&quot;</span><span class="op">,</span> <span class="ex">QVariant::fromValue</span><span class="op">(</span><span class="dv">3</span><span class="op">));</span></span>
<span id="cb61-28"><a href="#cb61-28" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>combobox<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QComboBox::currentIndexChanged</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">,</span> <span class="op">[</span>combobox<span class="op">]</span> <span class="op">{</span></span>
<span id="cb61-29"><a href="#cb61-29" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;combobox changed: &quot;</span> <span class="op">&lt;&lt;</span> combobox<span class="op">-&gt;</span>currentIndex<span class="op">()</span> <span class="op">&lt;&lt;</span> combobox<span class="op">-&gt;</span>currentData<span class="op">();</span></span>
<span id="cb61-30"><a href="#cb61-30" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb61-31"><a href="#cb61-31" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>combobox<span class="op">);</span></span>
<span id="cb61-32"><a href="#cb61-32" tabindex="-1"></a></span>
<span id="cb61-33"><a href="#cb61-33" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb61-34"><a href="#cb61-34" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-6" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2
id="qtextinput-qtextedit-qdateedit-qtimeedit-qdatetimeedit">QTextInput,
QTextEdit, QDateEdit, QTimeEdit, QDateTimeEdit</h2>
<ul>
<li><p>QTextInput ist ein einfaches Textfeld, in dem der Benutzer Text
eingeben kann. Das Signal <code>textChanged()</code> wird ausgesendet,
wenn sich der Text ändert.</p></li>
<li><p>Achtung: es gibt ebenfalls <code>textEdited()</code> und
<code>editingFinished()</code> Signale, die in bestimmten Fällen besser
geeignet sind. <code>textEdited()</code> wird nur ausgesendet, wenn der
Benutzer den Text interaktiv ändert (also nicht bei Änderungen durch
Methodenaufrufe) und <code>editingFinished()</code> wird ausgesendet,
wenn der Benutzer die Eingabe beendet. (Durck auf Enter oder Verlassen
des Feldes)</p></li>
<li><p>Masked Input: QTextInput kann auch Masken verwenden, um die
Eingabe zu beschränken. Masken sind eine Art von Formatierung, die die
Eingabe von Text einschränken. Masken können z.B. für IBANs,
Telefonnummern, Postleitzahlen oder Datumsangaben verwendet
werden.</p></li>
<li><p>Die Maske “AA99 9999 9999 9999 9999 9999 999” erlaubt z.B. nur
Großbuchstaben und Zahlen an bestimmten Positionen.</p></li>
<li><p>Beispiel: TextInput, Masked Input, DateInput</p></li>
</ul>
<p><img src="./images/inputs.png" /></p>
</div>
<div id="qt-grundlagen-widgets-7" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2
id="qtextinput-qtextedit-qdateedit-qtimeedit-qdatetimeedit-1">QTextInput,
QTextEdit, QDateEdit, QTimeEdit, QDateTimeEdit</h2>
<div class="sourceCode" id="cb62"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb62-4"><a href="#cb62-4" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb62-5"><a href="#cb62-5" tabindex="-1"></a>    window<span class="op">.</span>resize<span class="op">(</span><span class="dv">400</span><span class="op">,</span> <span class="dv">150</span><span class="op">);</span> window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb62-6"><a href="#cb62-6" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb62-7"><a href="#cb62-7" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" tabindex="-1"></a>    <span class="co">// Text input</span></span>
<span id="cb62-9"><a href="#cb62-9" tabindex="-1"></a>    <span class="kw">auto</span> textInput <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLineEdit</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb62-10"><a href="#cb62-10" tabindex="-1"></a>    textInput<span class="op">-&gt;</span>setPlaceholderText<span class="op">(</span><span class="st">&quot;Enter text here&quot;</span><span class="op">);</span></span>
<span id="cb62-11"><a href="#cb62-11" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>textInput<span class="op">);</span></span>
<span id="cb62-12"><a href="#cb62-12" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>textInput<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QLineEdit::textChanged</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">,</span> <span class="op">[</span>textInput<span class="op">]</span> <span class="op">{</span></span>
<span id="cb62-13"><a href="#cb62-13" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;textchanged=&quot;</span> <span class="op">&lt;&lt;</span> textInput<span class="op">-&gt;</span>text<span class="op">();</span></span>
<span id="cb62-14"><a href="#cb62-14" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb62-15"><a href="#cb62-15" tabindex="-1"></a>    <span class="co">// Masked input for IBAN</span></span>
<span id="cb62-16"><a href="#cb62-16" tabindex="-1"></a>    <span class="kw">auto</span> maskedInput <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLineEdit</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb62-17"><a href="#cb62-17" tabindex="-1"></a>    maskedInput<span class="op">-&gt;</span>setInputMask<span class="op">(</span><span class="st">&quot;AA99 9999 9999 9999 9999 9999 999&quot;</span><span class="op">);</span></span>
<span id="cb62-18"><a href="#cb62-18" tabindex="-1"></a>    maskedInput<span class="op">-&gt;</span>setPlaceholderText<span class="op">(</span><span class="st">&quot;Enter IBAN&quot;</span><span class="op">);</span></span>
<span id="cb62-19"><a href="#cb62-19" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>maskedInput<span class="op">);</span></span>
<span id="cb62-20"><a href="#cb62-20" tabindex="-1"></a>    <span class="co">// Date input</span></span>
<span id="cb62-21"><a href="#cb62-21" tabindex="-1"></a>    <span class="kw">auto</span> dateInput <span class="op">=</span> <span class="kw">new</span> <span class="ex">QDateEdit</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb62-22"><a href="#cb62-22" tabindex="-1"></a>    dateInput<span class="op">-&gt;</span>setDisplayFormat<span class="op">(</span><span class="st">&quot;yyyy-MM-dd&quot;</span><span class="op">);</span></span>
<span id="cb62-23"><a href="#cb62-23" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>dateInput<span class="op">);</span></span>
<span id="cb62-24"><a href="#cb62-24" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addStretch<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb62-25"><a href="#cb62-25" tabindex="-1"></a></span>
<span id="cb62-26"><a href="#cb62-26" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb62-27"><a href="#cb62-27" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb62-28"><a href="#cb62-28" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-8" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume">Tabellen, Listen und Bäume</h2>
<ul>
<li><p>Es gibt jeweils 2 Arten von Widgets für Tabellen, Listen und
Bäume:</p>
<ul>
<li>Direkte Widgets: QListWidget, QTableWidget, QTreeWidget</li>
<li>Modelbasierte Widgets: QListView, QTableView, QTreeView</li>
</ul></li>
<li><p>Die Modelbasierten Widgets funktionieren mit einer Model-Klasse
welche die Daten bereitstellt. Es gibt Standard-Modelklassen wie
QStandardItemModel, QAbstractItemModel und QAbstractTableModel.
Insbesondere die Basis-Klasse QAbstractItemModel ist sehr mächtig und
kann für eigene Modelklassen abgeleitet werden.</p></li>
<li><p>Die Direkten Widgets sind einfacher zu verwenden und haben
bereits eine Standard-Implementierung des Models. Die Direkten Widgets
sind für einfache Anwendungen und Prototypen geeignet. Wenn die
Datenmenge allerdings groß ist oder die Daten dynamisch sind, dann
sollte man unbedingt die Modelbasierten Widgets verwenden.</p></li>
<li><p>Beispiel: QTableWidget</p></li>
</ul>
<p><img src="./images/tablewidget.png" /></p>
</div>
<div id="qt-grundlagen-widgets-9" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume-1">Tabellen, Listen und Bäume</h2>
<ul>
<li>Branch: <code>tablewidget</code></li>
</ul>
<div class="sourceCode" id="cb63"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb63-2"><a href="#cb63-2" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb63-3"><a href="#cb63-3" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb63-4"><a href="#cb63-4" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb63-5"><a href="#cb63-5" tabindex="-1"></a>    window<span class="op">.</span>resize<span class="op">(</span><span class="dv">300</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb63-6"><a href="#cb63-6" tabindex="-1"></a>    window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb63-7"><a href="#cb63-7" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb63-9"><a href="#cb63-9" tabindex="-1"></a>    <span class="at">const</span> <span class="dt">int</span> N_ROWS <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span></span>
<span id="cb63-10"><a href="#cb63-10" tabindex="-1"></a>    <span class="kw">auto</span> table <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableWidget</span><span class="op">(</span>N_ROWS<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb63-11"><a href="#cb63-11" tabindex="-1"></a>    table<span class="op">-&gt;</span>setHorizontalHeaderLabels<span class="op">({</span><span class="st">&quot;Number&quot;</span><span class="op">,</span> <span class="st">&quot;Square&quot;</span><span class="op">,</span> <span class="st">&quot;Delta Previous Square&quot;</span><span class="op">});</span></span>
<span id="cb63-12"><a href="#cb63-12" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> N_ROWS<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb63-13"><a href="#cb63-13" tabindex="-1"></a>        <span class="kw">auto</span> number <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb63-14"><a href="#cb63-14" tabindex="-1"></a>        <span class="kw">auto</span> square <span class="op">=</span> number <span class="op">*</span> number<span class="op">;</span></span>
<span id="cb63-15"><a href="#cb63-15" tabindex="-1"></a>        <span class="kw">auto</span> previousSquare <span class="op">=</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb63-16"><a href="#cb63-16" tabindex="-1"></a>        <span class="kw">auto</span> item1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableWidgetItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>number<span class="op">));</span></span>
<span id="cb63-17"><a href="#cb63-17" tabindex="-1"></a>        item1<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb63-18"><a href="#cb63-18" tabindex="-1"></a>        <span class="kw">auto</span> item2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableWidgetItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>square<span class="op">));</span></span>
<span id="cb63-19"><a href="#cb63-19" tabindex="-1"></a>        item2<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb63-20"><a href="#cb63-20" tabindex="-1"></a>        <span class="kw">auto</span> item3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableWidgetItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>square <span class="op">-</span> previousSquare<span class="op">));</span></span>
<span id="cb63-21"><a href="#cb63-21" tabindex="-1"></a>        item3<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb63-22"><a href="#cb63-22" tabindex="-1"></a></span>
<span id="cb63-23"><a href="#cb63-23" tabindex="-1"></a>        table<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> item1<span class="op">);</span></span>
<span id="cb63-24"><a href="#cb63-24" tabindex="-1"></a>        table<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> item2<span class="op">);</span></span>
<span id="cb63-25"><a href="#cb63-25" tabindex="-1"></a>        table<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> item3<span class="op">);</span></span>
<span id="cb63-26"><a href="#cb63-26" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb63-27"><a href="#cb63-27" tabindex="-1"></a>    table<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb63-28"><a href="#cb63-28" tabindex="-1"></a>    table<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb63-29"><a href="#cb63-29" tabindex="-1"></a>    table<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb63-30"><a href="#cb63-30" tabindex="-1"></a>    </span>
<span id="cb63-31"><a href="#cb63-31" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>table<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb63-32"><a href="#cb63-32" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb63-33"><a href="#cb63-33" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb63-34"><a href="#cb63-34" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-10" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume-2">Tabellen, Listen und Bäume</h2>
<ul>
<li>Branch: <code>tableview1</code></li>
</ul>
<div class="sourceCode" id="cb64"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a>    window<span class="op">.</span>resize<span class="op">(</span><span class="dv">300</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a>    window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a>    <span class="at">const</span> <span class="dt">int</span> N_ROWS <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span></span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>    <span class="kw">auto</span> model <span class="op">=</span> <span class="kw">new</span> <span class="ex">QStandardItemModel</span><span class="op">(</span>N_ROWS<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a>    model<span class="op">-&gt;</span>setHorizontalHeaderLabels<span class="op">({</span><span class="st">&quot;Number&quot;</span><span class="op">,</span> <span class="st">&quot;Square&quot;</span><span class="op">,</span> <span class="st">&quot;Delta Previous Square&quot;</span><span class="op">});</span></span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> N_ROWS<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a>        <span class="kw">auto</span> number <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb64-14"><a href="#cb64-14" tabindex="-1"></a>        <span class="kw">auto</span> square <span class="op">=</span> number <span class="op">*</span> number<span class="op">;</span></span>
<span id="cb64-15"><a href="#cb64-15" tabindex="-1"></a>        <span class="kw">auto</span> previousSquare <span class="op">=</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb64-16"><a href="#cb64-16" tabindex="-1"></a>        <span class="kw">auto</span> item1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QStandardItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>number<span class="op">));</span></span>
<span id="cb64-17"><a href="#cb64-17" tabindex="-1"></a>        item1<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb64-18"><a href="#cb64-18" tabindex="-1"></a>        <span class="kw">auto</span> item2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QStandardItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>square<span class="op">));</span></span>
<span id="cb64-19"><a href="#cb64-19" tabindex="-1"></a>        item2<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb64-20"><a href="#cb64-20" tabindex="-1"></a>        <span class="kw">auto</span> item3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QStandardItem</span><span class="op">(</span><span class="ex">QString::number</span><span class="op">(</span>square <span class="op">-</span> previousSquare<span class="op">));</span></span>
<span id="cb64-21"><a href="#cb64-21" tabindex="-1"></a>        item3<span class="op">-&gt;</span>setTextAlignment<span class="op">(</span><span class="ex">Qt::AlignRight</span> <span class="op">|</span> <span class="ex">Qt::AlignVCenter</span><span class="op">);</span></span>
<span id="cb64-22"><a href="#cb64-22" tabindex="-1"></a></span>
<span id="cb64-23"><a href="#cb64-23" tabindex="-1"></a>        model<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> item1<span class="op">);</span></span>
<span id="cb64-24"><a href="#cb64-24" tabindex="-1"></a>        model<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> item2<span class="op">);</span></span>
<span id="cb64-25"><a href="#cb64-25" tabindex="-1"></a>        model<span class="op">-&gt;</span>setItem<span class="op">(</span>i<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> item3<span class="op">);</span></span>
<span id="cb64-26"><a href="#cb64-26" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb64-27"><a href="#cb64-27" tabindex="-1"></a></span>
<span id="cb64-28"><a href="#cb64-28" tabindex="-1"></a>    <span class="kw">auto</span> tableView <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableView</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb64-29"><a href="#cb64-29" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>setModel<span class="op">(</span>model<span class="op">);</span></span>
<span id="cb64-30"><a href="#cb64-30" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb64-31"><a href="#cb64-31" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb64-32"><a href="#cb64-32" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb64-33"><a href="#cb64-33" tabindex="-1"></a></span>
<span id="cb64-34"><a href="#cb64-34" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>tableView<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb64-35"><a href="#cb64-35" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb64-36"><a href="#cb64-36" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb64-37"><a href="#cb64-37" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-11" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume-3">Tabellen, Listen und Bäume</h2>
<ul>
<li><p>Die Benutzung von Modelklassen ist sehr mächtig. Die Modelklasse
QStandardItemModel ist eine einfache Implementierung eines Models, die
für viele Anwendungsfälle ausreicht und einem direkten Widget
vorzuziehen ist. Um die volle Mächtigkeit von Qt zu nutzen, sollte man
jedoch seine Modellklassen von QAbstractItemModel ableiten oder komplett
eigene Modelklassen implementieren.</p></li>
<li><p>Branch: <code>tableview2</code></p></li>
</ul>
</div>
<div id="qt-grundlagen-widgets-12" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume-4">Tabellen, Listen und Bäume</h2>
<div class="sourceCode" id="cb65"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="co">// model.h</span></span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a><span class="kw">class</span> CustomTableModel <span class="op">:</span> <span class="kw">public</span> <span class="ex">QAbstractTableModel</span> <span class="op">{</span></span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a>    CustomTableModel<span class="op">(</span><span class="ex">QObject</span> <span class="op">*</span>parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QAbstractTableModel</span><span class="op">(</span>parent<span class="op">)</span> <span class="op">{}</span></span>
<span id="cb65-7"><a href="#cb65-7" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" tabindex="-1"></a>    <span class="dt">int</span> rowCount<span class="op">(</span><span class="at">const</span> <span class="ex">QModelIndex</span> <span class="op">&amp;</span>parent <span class="op">=</span> <span class="ex">QModelIndex</span><span class="op">())</span> <span class="at">const</span> <span class="kw">override</span> <span class="op">{</span> <span class="cf">return</span> N_ROWS<span class="op">;}</span></span>
<span id="cb65-9"><a href="#cb65-9" tabindex="-1"></a>    <span class="dt">int</span> columnCount<span class="op">(</span><span class="at">const</span> <span class="ex">QModelIndex</span> <span class="op">&amp;</span>parent <span class="op">=</span> <span class="ex">QModelIndex</span><span class="op">())</span> <span class="at">const</span> <span class="kw">override</span> <span class="op">{</span> <span class="cf">return</span> <span class="dv">3</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb65-10"><a href="#cb65-10" tabindex="-1"></a>    <span class="ex">QVariant</span> data<span class="op">(</span><span class="at">const</span> <span class="ex">QModelIndex</span> <span class="op">&amp;</span>index<span class="op">,</span> <span class="dt">int</span> role <span class="op">=</span> <span class="ex">Qt::DisplayRole</span><span class="op">)</span> <span class="at">const</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb65-11"><a href="#cb65-11" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>index<span class="op">.</span>isValid<span class="op">()</span> <span class="op">||</span> role <span class="op">!=</span> <span class="ex">Qt::DisplayRole</span><span class="op">)</span> <span class="cf">return</span> <span class="ex">QVariant</span><span class="op">();</span></span>
<span id="cb65-12"><a href="#cb65-12" tabindex="-1"></a>        <span class="dt">int</span> row <span class="op">=</span> index<span class="op">.</span>row<span class="op">();</span></span>
<span id="cb65-13"><a href="#cb65-13" tabindex="-1"></a>        <span class="dt">int</span> col <span class="op">=</span> index<span class="op">.</span>column<span class="op">();</span></span>
<span id="cb65-14"><a href="#cb65-14" tabindex="-1"></a>        <span class="dt">int</span> number <span class="op">=</span> row <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb65-15"><a href="#cb65-15" tabindex="-1"></a>        <span class="dt">int</span> square <span class="op">=</span> number <span class="op">*</span> number<span class="op">;</span></span>
<span id="cb65-16"><a href="#cb65-16" tabindex="-1"></a>        <span class="dt">int</span> previousSquare <span class="op">=</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span>number <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb65-17"><a href="#cb65-17" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>col<span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-18"><a href="#cb65-18" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">0</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString::number</span><span class="op">(</span>number<span class="op">);</span></span>
<span id="cb65-19"><a href="#cb65-19" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString::number</span><span class="op">(</span>square<span class="op">);</span></span>
<span id="cb65-20"><a href="#cb65-20" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString::number</span><span class="op">(</span>square <span class="op">-</span> previousSquare<span class="op">);</span></span>
<span id="cb65-21"><a href="#cb65-21" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QVariant</span><span class="op">();</span></span>
<span id="cb65-22"><a href="#cb65-22" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-23"><a href="#cb65-23" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-24"><a href="#cb65-24" tabindex="-1"></a></span>
<span id="cb65-25"><a href="#cb65-25" tabindex="-1"></a>    <span class="ex">QVariant</span> headerData<span class="op">(</span><span class="dt">int</span> section<span class="op">,</span> <span class="ex">Qt::Orientation</span> orientation<span class="op">,</span> <span class="dt">int</span> role <span class="op">=</span> <span class="ex">Qt::DisplayRole</span><span class="op">)</span> <span class="at">const</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb65-26"><a href="#cb65-26" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>role <span class="op">!=</span> <span class="ex">Qt::DisplayRole</span><span class="op">)</span> <span class="cf">return</span> <span class="ex">QVariant</span><span class="op">();</span></span>
<span id="cb65-27"><a href="#cb65-27" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>orientation <span class="op">==</span> <span class="ex">Qt::Horizontal</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-28"><a href="#cb65-28" tabindex="-1"></a>            <span class="cf">switch</span> <span class="op">(</span>section<span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-29"><a href="#cb65-29" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">0</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;Number&quot;</span><span class="op">);</span></span>
<span id="cb65-30"><a href="#cb65-30" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;Square&quot;</span><span class="op">);</span></span>
<span id="cb65-31"><a href="#cb65-31" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QString</span><span class="op">(</span><span class="st">&quot;Delta Previous Square&quot;</span><span class="op">);</span></span>
<span id="cb65-32"><a href="#cb65-32" tabindex="-1"></a>            <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span> <span class="ex">QVariant</span><span class="op">();</span></span>
<span id="cb65-33"><a href="#cb65-33" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb65-34"><a href="#cb65-34" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb65-35"><a href="#cb65-35" tabindex="-1"></a>        <span class="cf">return</span> <span class="ex">QVariant</span><span class="op">();</span></span>
<span id="cb65-36"><a href="#cb65-36" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb65-37"><a href="#cb65-37" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb65-38"><a href="#cb65-38" tabindex="-1"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> N_ROWS <span class="op">=</span> <span class="fl">1E6</span><span class="op">;</span>  <span class="co">// 1 million rows</span></span>
<span id="cb65-39"><a href="#cb65-39" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-13" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="tabellen-listen-und-bäume-5">Tabellen, Listen und Bäume</h2>
<div class="sourceCode" id="cb66"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="co">// main.cpp</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>    window<span class="op">.</span>resize<span class="op">(</span><span class="dv">300</span><span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>    window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a>    <span class="kw">auto</span> model <span class="op">=</span> <span class="kw">new</span> CustomTableModel<span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a></span>
<span id="cb66-12"><a href="#cb66-12" tabindex="-1"></a>    <span class="kw">auto</span> tableView <span class="op">=</span> <span class="kw">new</span> <span class="ex">QTableView</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb66-13"><a href="#cb66-13" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>setModel<span class="op">(</span>model<span class="op">);</span></span>
<span id="cb66-14"><a href="#cb66-14" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb66-15"><a href="#cb66-15" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb66-16"><a href="#cb66-16" tabindex="-1"></a>    tableView<span class="op">-&gt;</span>horizontalHeader<span class="op">()-&gt;</span>setSectionResizeMode<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="ex">QHeaderView::Stretch</span><span class="op">);</span></span>
<span id="cb66-17"><a href="#cb66-17" tabindex="-1"></a></span>
<span id="cb66-18"><a href="#cb66-18" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>tableView<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb66-19"><a href="#cb66-19" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb66-20"><a href="#cb66-20" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb66-21"><a href="#cb66-21" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-14" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qmessagebox">QMessageBox</h2>
<ul>
<li><p>Qt bringt eine Reihe von vordefinierten Dialogen mit, die über
die Klasse <code>QMessageBox</code> aufgerufen werden können. Die
wichtigsten Dialoge sind:</p>
<ul>
<li>Information: <code>QMessageBox::information()</code></li>
<li>Warnung: <code>QMessageBox::warning()</code></li>
<li>Fehler: <code>QMessageBox::critical()</code></li>
<li>Frage: <code>QMessageBox::question()</code></li>
</ul></li>
<li><p>Die Dialoge können mit einem Titel und einer Nachricht angezeigt
werden. Die interaktiven Dialoge (Frage, Warnung, Fehler) geben
zusätzlich einen Wert des Typs <code>QMessageBox::StandardButton</code>
zurück, der vom Benutzer ausgewählt wurde.</p></li>
<li><p>Branch: <code>simpledialogs</code></p></li>
</ul>
<p><img src="./images/messagebox.png" /></p>
</div>
<div id="qt-grundlagen-widgets-15" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qmessagebox-1">QMessageBox</h2>
<div class="sourceCode" id="cb67"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span> window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a>    <span class="co">// Show Message Button</span></span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a>    <span class="kw">auto</span> b1 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Show Message&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>b1<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">[&amp;](){</span></span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a>        <span class="ex">QMessageBox::information</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Message&quot;</span><span class="op">,</span> <span class="st">&quot;This is a simple message.&quot;</span><span class="op">);</span></span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>b1<span class="op">);</span></span>
<span id="cb67-12"><a href="#cb67-12" tabindex="-1"></a></span>
<span id="cb67-13"><a href="#cb67-13" tabindex="-1"></a>    <span class="co">// Show Confirm Dialog Button</span></span>
<span id="cb67-14"><a href="#cb67-14" tabindex="-1"></a>    <span class="kw">auto</span> b2 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Show Confirm Dialog&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb67-15"><a href="#cb67-15" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>b2<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">[&amp;](){</span></span>
<span id="cb67-16"><a href="#cb67-16" tabindex="-1"></a>        <span class="ex">QMessageBox::StandardButton</span> reply<span class="op">;</span></span>
<span id="cb67-17"><a href="#cb67-17" tabindex="-1"></a>        reply <span class="op">=</span> <span class="ex">QMessageBox::question</span><span class="op">(</span></span>
<span id="cb67-18"><a href="#cb67-18" tabindex="-1"></a>            <span class="op">&amp;</span>window<span class="op">,</span> <span class="st">&quot;Confirm&quot;</span><span class="op">,</span> <span class="st">&quot;Are you sure you want to proceed?&quot;</span><span class="op">,</span> <span class="ex">QMessageBox::Yes</span><span class="op">|</span><span class="ex">QMessageBox::No</span><span class="op">);</span></span>
<span id="cb67-19"><a href="#cb67-19" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>reply <span class="op">==</span> <span class="ex">QMessageBox::Yes</span><span class="op">)</span></span>
<span id="cb67-20"><a href="#cb67-20" tabindex="-1"></a>            <span class="ex">QMessageBox::information</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Confirmed&quot;</span><span class="op">,</span> <span class="st">&quot;You chose Yes.&quot;</span><span class="op">);</span></span>
<span id="cb67-21"><a href="#cb67-21" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb67-22"><a href="#cb67-22" tabindex="-1"></a>            <span class="ex">QMessageBox::information</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Cancelled&quot;</span><span class="op">,</span> <span class="st">&quot;You chose No.&quot;</span><span class="op">);</span></span>
<span id="cb67-23"><a href="#cb67-23" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb67-24"><a href="#cb67-24" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>b2<span class="op">);</span></span>
<span id="cb67-25"><a href="#cb67-25" tabindex="-1"></a></span>
<span id="cb67-26"><a href="#cb67-26" tabindex="-1"></a>    <span class="co">// Show Alert Dialog Button</span></span>
<span id="cb67-27"><a href="#cb67-27" tabindex="-1"></a>    <span class="kw">auto</span> b3 <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Show Alert Dialog&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb67-28"><a href="#cb67-28" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>b3<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">[&amp;](){</span></span>
<span id="cb67-29"><a href="#cb67-29" tabindex="-1"></a>        <span class="ex">QMessageBox::warning</span><span class="op">(&amp;</span>window<span class="op">,</span> <span class="st">&quot;Alert&quot;</span><span class="op">,</span> <span class="st">&quot;This is an alert message.&quot;</span><span class="op">);</span></span>
<span id="cb67-30"><a href="#cb67-30" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb67-31"><a href="#cb67-31" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>b3<span class="op">);</span></span>
<span id="cb67-32"><a href="#cb67-32" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addStretch<span class="op">();</span></span>
<span id="cb67-33"><a href="#cb67-33" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb67-34"><a href="#cb67-34" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb67-35"><a href="#cb67-35" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="qt-grundlagen-widgets-16" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qdialog">QDialog</h2>
<ul>
<li><p>Dialog Widgets sind spezielle Widgets, die als Popup-Fenster
angezeigt werden und die Interaktion mit dem Benutzer ermöglichen.
Dialog Widgets sind normalerweise Subklassen von <code>QDialog</code>
oder <code>QDialogButtonBox</code>.</p></li>
<li><p>Dialoge die mit dem Designer erstellt wurden, sind normalerweise
Subklassen von <code>QDialog</code>. Dialoge die mit dem Designer
erstellt wurden, haben bereits eine Standard-Implementierung von
<code>QDialogButtonBox</code> und können mit
<code>QDialogButtonBox::standardButtons()</code> die Standard-Buttons
abfragen.</p></li>
<li><p>Dialoge können mit <code>exec()</code> oder <code>open()</code>
geöffnet werden. <code>exec()</code> ist ein synchroner Aufruf, d.h. der
Aufruf blockiert bis der Dialog geschlossen wird. <code>open()</code>
ist ein asynchroner Aufruf, d.h. der Aufruf blockiert nicht und der
Dialog wird asynchron geöffnet.</p></li>
</ul>
</div>
<div id="qt-grundlagen-widgets-17" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qdialog-dialog-aus-dem-designer-anzeigen">QDialog / Dialog aus
dem Designer anzeigen</h2>
<ul>
<li><p>Im Designer einen Dialog mit einer Implementierungsklasse
erstellen und dann den Dialog aus dem Code heraus anzeigen.</p></li>
<li><p>Branch: <code>desigerdialog</code></p></li>
</ul>
<p><img src="./images/designerdialog.png" /></p>
</div>
<div id="qt-grundlagen-widgets-18" class="slide section level1">
<h1>4.6 Qt-Grundlagen / Widgets</h1>
<h2 id="qdialog-dialog-aus-dem-designer-anzeigen-1">QDialog / Dialog aus
dem Designer anzeigen</h2>
<div class="sourceCode" id="cb68"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a></span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb68-3"><a href="#cb68-3" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb68-4"><a href="#cb68-4" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb68-5"><a href="#cb68-5" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb68-6"><a href="#cb68-6" tabindex="-1"></a>    window<span class="op">.</span>move<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb68-7"><a href="#cb68-7" tabindex="-1"></a></span>
<span id="cb68-8"><a href="#cb68-8" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb68-9"><a href="#cb68-9" tabindex="-1"></a>    <span class="kw">auto</span> button <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Show Dialog from Designer&quot;</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">);</span></span>
<span id="cb68-10"><a href="#cb68-10" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button<span class="op">);</span></span>
<span id="cb68-11"><a href="#cb68-11" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>button<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">[</span>button<span class="op">]{</span></span>
<span id="cb68-12"><a href="#cb68-12" tabindex="-1"></a>        MyDesignerDialog dialog<span class="op">(</span>button<span class="op">);</span></span>
<span id="cb68-13"><a href="#cb68-13" tabindex="-1"></a>        dialog<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb68-14"><a href="#cb68-14" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb68-15"><a href="#cb68-15" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb68-16"><a href="#cb68-16" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb68-17"><a href="#cb68-17" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="slots-und-signals-bei-widgets">Slots und Signals bei
Widgets</h2>
<ul>
<li><p>Widgets liefern Signale wenn bestimmte Ereignisse eintreten.</p>
<ul>
<li>QPushButton: <code>clicked()</code> oder <code>pressed()</code></li>
<li>QLineEdit: <code>textChanged()</code></li>
<li>QSlider: <code>valueChanged()</code></li>
<li>QCheckBox: <code>stateChanged()</code></li>
<li>QRadioButton: <code>toggled()</code></li>
<li>QComboBox: <code>currentIndexChanged()</code></li>
<li>QDateEdit: <code>dateChanged()</code></li>
<li>QAction: <code>triggered()</code></li>
<li>QMenu: <code>triggered()</code></li>
<li>…</li>
</ul></li>
<li><p>Diese Ereignisse können mit Slots verbunden werden oder direkt
mit einer Lambda-Funktion verknüpft werden.</p></li>
<li><p>Beispiel: QPushButton mit Lambda-Funktion. Branch
<code>lambdasignals</code></p></li>
</ul>
<div class="sourceCode" id="cb69"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span> <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Slots&quot;</span><span class="op">);</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>    <span class="kw">auto</span> mainLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a>    <span class="kw">auto</span> button <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span><span class="st">&quot;Button&quot;</span><span class="op">);</span></span>
<span id="cb69-7"><a href="#cb69-7" tabindex="-1"></a>    button<span class="op">-&gt;</span>setSizePolicy<span class="op">(</span><span class="ex">QSizePolicy</span><span class="op">(</span><span class="ex">QSizePolicy::Fixed</span><span class="op">,</span> <span class="ex">QSizePolicy::Fixed</span><span class="op">));</span></span>
<span id="cb69-8"><a href="#cb69-8" tabindex="-1"></a>    mainLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>button<span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="ex">Qt::AlignHCenter</span><span class="op">);</span></span>
<span id="cb69-9"><a href="#cb69-9" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>button<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">[&amp;]()</span> <span class="op">{</span></span>
<span id="cb69-10"><a href="#cb69-10" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Button wurde geklickt&quot;</span><span class="op">;</span></span>
<span id="cb69-11"><a href="#cb69-11" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb69-12"><a href="#cb69-12" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb69-13"><a href="#cb69-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign-1"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="slots-und-signals-bei-widgets-1">Slots und Signals bei
Widgets</h2>
<ul>
<li><p>Slots werden dann typsischerweise in eigenen Widgets oder
Subklassen von QWidget implementiert.</p></li>
<li><p>Beispiel: QPushButton mit eigener Klasse. Branch
<code>slotbutton</code></p></li>
</ul>
<div class="sourceCode" id="cb70"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="kw">class</span> MyButton <span class="op">:</span> <span class="kw">public</span> <span class="ex">QPushButton</span> <span class="op">{</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>    MyButton<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>text<span class="op">,</span> <span class="ex">QWidget</span> <span class="op">*</span>parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QPushButton</span><span class="op">(</span>text<span class="op">,</span> parent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a>       <span class="ex">QObject::connect</span><span class="op">(</span><span class="kw">this</span><span class="op">,</span> <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="kw">this</span><span class="op">,</span> <span class="op">&amp;</span>MyButton<span class="op">::</span>onClicked<span class="op">);</span></span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb70-8"><a href="#cb70-8" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" tabindex="-1"></a><span class="kw">public</span> <span class="ex">slots</span><span class="op">:</span></span>
<span id="cb70-10"><a href="#cb70-10" tabindex="-1"></a>   <span class="dt">void</span> onClicked<span class="op">()</span> <span class="op">{</span></span>
<span id="cb70-11"><a href="#cb70-11" tabindex="-1"></a>       <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Button wurde geklickt&quot;</span><span class="op">;</span></span>
<span id="cb70-12"><a href="#cb70-12" tabindex="-1"></a>   <span class="op">}</span></span>
<span id="cb70-13"><a href="#cb70-13" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign-2"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="webviews-einbinden">Webviews einbinden</h2>
<ul>
<li>QtWebEngine bietet die Möglichkeit Webseiten in Qt-Anwendungen
einzubinden und basiert auf Chromium. Hier ist alles sehr modern und
aktuell.</li>
<li>QtWebKit ist die veraltete Version und basiert auf WebKit. Diese
Version wird nicht mehr weiterentwickelt.</li>
<li>Den Systembrowser kann man auch mittels QDesktopServices::openUrl()
öffnen.</li>
</ul>
<div class="sourceCode" id="cb71"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a><span class="ex">QDesktopServices::openUrl</span><span class="op">(</span><span class="ex">QUrl</span><span class="op">(</span><span class="st">&quot;https://www.stepanrutz.com&quot;</span><span class="op">));</span></span></code></pre></div>
<p><img src="./images/web1.png" /></p>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign-3"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="qtwebengine-beispiel">QtWebEngine Beispiel</h2>
<ul>
<li>Beispiel für die Einbindung einer Webseite in eine Qt-Anwendung.
Branch <code>webengine</code></li>
</ul>
<div class="sourceCode" id="cb72"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(&amp;</span>app<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QApplication::lastWindowClosed</span><span class="op">,</span> <span class="op">[]</span> <span class="op">{</span> <span class="ex">QApplication::quit</span><span class="op">();</span> <span class="op">});</span></span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb72-6"><a href="#cb72-6" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Webview&quot;</span><span class="op">);</span> window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">50</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">950</span><span class="op">,</span> <span class="dv">800</span><span class="op">);</span></span>
<span id="cb72-7"><a href="#cb72-7" tabindex="-1"></a></span>
<span id="cb72-8"><a href="#cb72-8" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb72-9"><a href="#cb72-9" tabindex="-1"></a>    <span class="kw">auto</span> webView <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWebEngineView</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb72-10"><a href="#cb72-10" tabindex="-1"></a>    <span class="kw">auto</span> output <span class="op">=</span> <span class="kw">new</span> <span class="ex">QLabel</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb72-11"><a href="#cb72-11" tabindex="-1"></a>    <span class="kw">auto</span> toolbar <span class="op">=</span> <span class="kw">new</span> <span class="ex">QWidget</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb72-12"><a href="#cb72-12" tabindex="-1"></a>    <span class="kw">auto</span> toolbarLayout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QHBoxLayout</span><span class="op">(</span>toolbar<span class="op">);</span></span>
<span id="cb72-13"><a href="#cb72-13" tabindex="-1"></a>    <span class="kw">auto</span> makebutton <span class="op">=</span> <span class="op">[=]</span> <span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>t<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-14"><a href="#cb72-14" tabindex="-1"></a>        <span class="kw">auto</span> b <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPushButton</span><span class="op">(</span>t<span class="op">,</span> toolbar<span class="op">);</span></span>
<span id="cb72-15"><a href="#cb72-15" tabindex="-1"></a>        b<span class="op">-&gt;</span>setSizePolicy<span class="op">(</span><span class="ex">QSizePolicy</span><span class="op">(</span><span class="ex">QSizePolicy::Fixed</span><span class="op">,</span> <span class="ex">QSizePolicy::Fixed</span><span class="op">));</span></span>
<span id="cb72-16"><a href="#cb72-16" tabindex="-1"></a>        toolbarLayout<span class="op">-&gt;</span>addWidget<span class="op">(</span>b<span class="op">);</span></span>
<span id="cb72-17"><a href="#cb72-17" tabindex="-1"></a>        <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb72-18"><a href="#cb72-18" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb72-19"><a href="#cb72-19" tabindex="-1"></a>    <span class="kw">auto</span> makeurlbutton <span class="op">=</span> <span class="op">[=]</span> <span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>t<span class="op">,</span> <span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>url<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-20"><a href="#cb72-20" tabindex="-1"></a>        <span class="kw">auto</span> button <span class="op">=</span> makebutton<span class="op">(</span>t<span class="op">);</span></span>
<span id="cb72-21"><a href="#cb72-21" tabindex="-1"></a>        <span class="ex">QObject::connect</span><span class="op">(</span>button<span class="op">,</span>  <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> button<span class="op">,</span> <span class="op">[=]()</span> <span class="op">{</span> webView<span class="op">-&gt;</span>setUrl<span class="op">(</span><span class="ex">QUrl</span><span class="op">(</span>url<span class="op">));</span> <span class="op">});</span></span>
<span id="cb72-22"><a href="#cb72-22" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb72-23"><a href="#cb72-23" tabindex="-1"></a>    makeurlbutton<span class="op">(</span><span class="st">&quot;Memory&quot;</span><span class="op">,</span> <span class="st">&quot;https://srutz.github.io/vuememory/&quot;</span><span class="op">);</span></span>
<span id="cb72-24"><a href="#cb72-24" tabindex="-1"></a>    makeurlbutton<span class="op">(</span><span class="st">&quot;Solitaire&quot;</span><span class="op">,</span> <span class="st">&quot;https://srutz.github.io/vuesolitaire/&quot;</span><span class="op">);</span></span>
<span id="cb72-25"><a href="#cb72-25" tabindex="-1"></a>    makeurlbutton<span class="op">(</span><span class="st">&quot;GFU&quot;</span><span class="op">,</span> <span class="st">&quot;https://www.gfu.net/seminare.html&quot;</span><span class="op">);</span></span>
<span id="cb72-26"><a href="#cb72-26" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>makebutton<span class="op">(</span><span class="st">&quot;Say hi from Javascript&quot;</span><span class="op">),</span>  <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">,</span> <span class="op">[=]()</span> <span class="op">{</span></span>
<span id="cb72-27"><a href="#cb72-27" tabindex="-1"></a>        webView<span class="op">-&gt;</span>page<span class="op">()-&gt;</span>runJavaScript<span class="op">(</span><span class="st">&quot;alert(&#39;Hello from Qt&#39;);&quot;</span><span class="op">);</span></span>
<span id="cb72-28"><a href="#cb72-28" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb72-29"><a href="#cb72-29" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(</span>makebutton<span class="op">(</span><span class="st">&quot;Call JS-Function&quot;</span><span class="op">),</span>  <span class="op">&amp;</span><span class="ex">QPushButton::clicked</span><span class="op">,</span> <span class="op">&amp;</span>window<span class="op">,</span> <span class="op">[=]()</span> <span class="op">{</span></span>
<span id="cb72-30"><a href="#cb72-30" tabindex="-1"></a>        webView<span class="op">-&gt;</span>page<span class="op">()-&gt;</span>runJavaScript<span class="op">(</span><span class="st">&quot;Math.pow(2, 10)&quot;</span><span class="op">,</span> <span class="op">[=]</span> <span class="op">(</span><span class="kw">auto</span> result<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-31"><a href="#cb72-31" tabindex="-1"></a>            output<span class="op">-&gt;</span>setText<span class="op">(</span><span class="ex">QString</span><span class="op">(</span><span class="st">&quot;The result is %1&quot;</span><span class="op">).</span>arg<span class="op">(</span>result<span class="op">.</span>toDouble<span class="op">()));</span></span>
<span id="cb72-32"><a href="#cb72-32" tabindex="-1"></a>            <span class="ex">QTimer::singleShot</span><span class="op">(</span><span class="dv">5000</span><span class="op">,</span> <span class="op">[=]()</span> <span class="op">{</span>output<span class="op">-&gt;</span>setText<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">);</span> <span class="op">});</span></span>
<span id="cb72-33"><a href="#cb72-33" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb72-34"><a href="#cb72-34" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb72-35"><a href="#cb72-35" tabindex="-1"></a>    toolbarLayout<span class="op">-&gt;</span>addStretch<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb72-36"><a href="#cb72-36" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>toolbar<span class="op">);</span> layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>webView<span class="op">,</span> <span class="dv">1</span><span class="op">);</span> layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>output<span class="op">);</span></span>
<span id="cb72-37"><a href="#cb72-37" tabindex="-1"></a>    <span class="ex">QTimer::singleShot</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="op">[=]()</span> <span class="op">{</span> webView<span class="op">-&gt;</span>setUrl<span class="op">(</span><span class="ex">QUrl</span><span class="op">(</span><span class="st">&quot;https://srutz.github.io/vuesolitaire/&quot;</span><span class="op">));</span> <span class="op">});</span></span>
<span id="cb72-38"><a href="#cb72-38" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span> <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb72-39"><a href="#cb72-39" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign-4"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="pdfview">PdfView</h2>
<ul>
<li>Pdfs können mit QPdfView angezeigt werden. Dieses Widget ist in Qt6
enthalten.</li>
<li>Die PDF Unterstützung muss über das Maintenance Tool installiert
werden.</li>
</ul>
<p><img src="./images/pdf1.png" /></p>
</div>
<div
id="fortgeschrittene-qt-themen-benutzeroberflächen--und-interaktionsdesign-5"
class="slide section level1">
<h1>5.1 Fortgeschrittene Qt-Themen / Benutzeroberflächen- und
Interaktionsdesign</h1>
<h2 id="pdfview-beispiel.-branch-pdfview">PdfView Beispiel. Branch
<code>pdfview</code></h2>
<div class="sourceCode" id="cb73"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>    <span class="ex">QObject::connect</span><span class="op">(&amp;</span>app<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QApplication::lastWindowClosed</span><span class="op">,</span> <span class="op">[]</span> <span class="op">{</span> <span class="ex">QApplication::quit</span><span class="op">();</span> <span class="op">});</span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;PdfViewer Beispiel&quot;</span><span class="op">);</span></span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a>    window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">900</span><span class="op">,</span> <span class="dv">600</span><span class="op">);</span></span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a>    <span class="ex">QString</span> filePath<span class="op">;</span></span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>argc <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a>        filePath <span class="op">=</span> <span class="ex">QString</span><span class="op">(</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb73-12"><a href="#cb73-12" tabindex="-1"></a>        <span class="ex">QString</span> documentsPath <span class="op">=</span> <span class="ex">QStandardPaths::writableLocation</span><span class="op">(</span><span class="ex">QStandardPaths::DocumentsLocation</span><span class="op">);</span></span>
<span id="cb73-13"><a href="#cb73-13" tabindex="-1"></a>        <span class="ex">QDir</span> documentsDir<span class="op">(</span>documentsPath<span class="op">);</span></span>
<span id="cb73-14"><a href="#cb73-14" tabindex="-1"></a>        filePath <span class="op">=</span> documentsDir<span class="op">.</span>filePath<span class="op">(</span><span class="st">&quot;cv.pdf&quot;</span><span class="op">);</span></span>
<span id="cb73-15"><a href="#cb73-15" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb73-16"><a href="#cb73-16" tabindex="-1"></a>    <span class="kw">auto</span> viewer <span class="op">=</span> <span class="kw">new</span> QPdfView<span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb73-17"><a href="#cb73-17" tabindex="-1"></a>    <span class="kw">auto</span> <span class="op">*</span>document <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPdfDocument</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb73-18"><a href="#cb73-18" tabindex="-1"></a>    document<span class="op">-&gt;</span>load<span class="op">(</span>filePath<span class="op">);</span></span>
<span id="cb73-19"><a href="#cb73-19" tabindex="-1"></a>    viewer<span class="op">-&gt;</span>setDocument<span class="op">(</span>document<span class="op">);</span></span>
<span id="cb73-20"><a href="#cb73-20" tabindex="-1"></a>    layout<span class="op">-&gt;</span>setContentsMargins<span class="op">(</span><span class="ex">QMargins</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb73-21"><a href="#cb73-21" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>viewer<span class="op">);</span></span>
<span id="cb73-22"><a href="#cb73-22" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb73-23"><a href="#cb73-23" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb73-24"><a href="#cb73-24" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-verwendung-von-datenbanken-mit-qt"
class="slide section level1">
<h1>5.2 Fortgeschrittene Qt-Themen / Verwendung von Datenbanken mit
Qt</h1>
<h2 id="datenbanken-in-qt">Datenbanken in Qt</h2>
<ul>
<li>Qt bietet Klassen zur Datenbankanbindung.</li>
<li>Die Klassen sind in dem Modul <code>QtSql</code> enthalten.</li>
</ul>
<h2 id="datenbanktreiber">Datenbanktreiber</h2>
<ul>
<li>Qt unterstützt verschiedene Datenbanktreiber.</li>
<li>Die Datenbanktreiber sind in Plugins organisiert.</li>
</ul>
</div>
<div id="fortgeschrittene-qt-themen-verwendung-von-datenbanken-mit-qt-1"
class="slide section level1">
<h1>5.2 Fortgeschrittene Qt-Themen / Verwendung von Datenbanken mit
Qt</h1>
<ul>
<li>Beispiel für SQL, Branch <code>sql</code></li>
</ul>
<div class="sourceCode" id="cb74"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a>    <span class="ex">QApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a>    <span class="ex">QWidget</span> window<span class="op">;</span></span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a>    window<span class="op">.</span>setWindowTitle<span class="op">(</span><span class="st">&quot;Sql Beispiel&quot;</span><span class="op">);</span></span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a>    window<span class="op">.</span>setGeometry<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">600</span><span class="op">,</span> <span class="dv">500</span><span class="op">);</span></span>
<span id="cb74-6"><a href="#cb74-6" tabindex="-1"></a>    <span class="kw">auto</span> layout <span class="op">=</span> <span class="kw">new</span> <span class="ex">QVBoxLayout</span><span class="op">(&amp;</span>window<span class="op">);</span></span>
<span id="cb74-7"><a href="#cb74-7" tabindex="-1"></a>    <span class="kw">auto</span> output <span class="op">=</span> <span class="kw">new</span> <span class="ex">QPlainTextEdit</span><span class="op">();</span></span>
<span id="cb74-8"><a href="#cb74-8" tabindex="-1"></a>    output<span class="op">-&gt;</span>setReadOnly<span class="op">(</span><span class="kw">true</span><span class="op">);</span></span>
<span id="cb74-9"><a href="#cb74-9" tabindex="-1"></a>    layout<span class="op">-&gt;</span>addWidget<span class="op">(</span>output<span class="op">);</span></span>
<span id="cb74-10"><a href="#cb74-10" tabindex="-1"></a></span>
<span id="cb74-11"><a href="#cb74-11" tabindex="-1"></a>    <span class="kw">auto</span> db <span class="op">=</span> <span class="ex">QSqlDatabase::addDatabase</span><span class="op">(</span><span class="st">&quot;QPSQL&quot;</span><span class="op">);</span> <span class="co">// QPSQL für PostgreSQL</span></span>
<span id="cb74-12"><a href="#cb74-12" tabindex="-1"></a>    db<span class="op">.</span>setHostName<span class="op">(</span><span class="st">&quot;localhost&quot;</span><span class="op">);</span></span>
<span id="cb74-13"><a href="#cb74-13" tabindex="-1"></a>    db<span class="op">.</span>setPort<span class="op">(</span><span class="dv">5432</span><span class="op">);</span> db<span class="op">.</span>setDatabaseName<span class="op">(</span><span class="st">&quot;template1&quot;</span><span class="op">);</span></span>
<span id="cb74-14"><a href="#cb74-14" tabindex="-1"></a>    db<span class="op">.</span>setUserName<span class="op">(</span><span class="st">&quot;sr&quot;</span><span class="op">);</span> db<span class="op">.</span>setPassword<span class="op">(</span><span class="st">&quot;123&quot;</span><span class="op">);</span></span>
<span id="cb74-15"><a href="#cb74-15" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>db<span class="op">.</span>open<span class="op">())</span> <span class="op">{</span></span>
<span id="cb74-16"><a href="#cb74-16" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Failed to connect to the database:&quot;</span> <span class="op">&lt;&lt;</span> db<span class="op">.</span>lastError<span class="op">().</span>text<span class="op">();</span></span>
<span id="cb74-17"><a href="#cb74-17" tabindex="-1"></a>        <span class="cf">return</span> EXIT_FAILURE<span class="op">;</span></span>
<span id="cb74-18"><a href="#cb74-18" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb74-19"><a href="#cb74-19" tabindex="-1"></a></span>
<span id="cb74-20"><a href="#cb74-20" tabindex="-1"></a>    <span class="ex">QString</span> s<span class="op">;</span> <span class="ex">QSqlQuery</span> query<span class="op">;</span></span>
<span id="cb74-21"><a href="#cb74-21" tabindex="-1"></a>    <span class="ex">QString</span> sql <span class="op">=</span> <span class="st">R&quot;(</span><span class="vs">SELECT table_schema, table_name FROM information_schema.tables order by 1, 2</span><span class="st">)&quot;</span><span class="op">;</span></span>
<span id="cb74-22"><a href="#cb74-22" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>query<span class="op">.</span>exec<span class="op">(</span>sql<span class="op">))</span> <span class="op">{</span></span>
<span id="cb74-23"><a href="#cb74-23" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Failed to execute query:&quot;</span> <span class="op">&lt;&lt;</span> query<span class="op">.</span>lastError<span class="op">().</span>text<span class="op">();</span></span>
<span id="cb74-24"><a href="#cb74-24" tabindex="-1"></a>        <span class="cf">return</span> EXIT_FAILURE<span class="op">;</span></span>
<span id="cb74-25"><a href="#cb74-25" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb74-26"><a href="#cb74-26" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>query<span class="op">.</span>next<span class="op">())</span> <span class="op">{</span></span>
<span id="cb74-27"><a href="#cb74-27" tabindex="-1"></a>        <span class="kw">auto</span> tableSchema <span class="op">=</span> query<span class="op">.</span>value<span class="op">(</span><span class="st">&quot;table_schema&quot;</span><span class="op">).</span>toString<span class="op">();</span> <span class="co">//QVariant</span></span>
<span id="cb74-28"><a href="#cb74-28" tabindex="-1"></a>        <span class="kw">auto</span> tableName <span class="op">=</span> query<span class="op">.</span>value<span class="op">(</span><span class="st">&quot;table_name&quot;</span><span class="op">).</span>toString<span class="op">();</span></span>
<span id="cb74-29"><a href="#cb74-29" tabindex="-1"></a>        s <span class="op">+=</span> tableSchema <span class="op">+</span> <span class="st">&quot;.&quot;</span> <span class="op">+</span> tableName <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb74-30"><a href="#cb74-30" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb74-31"><a href="#cb74-31" tabindex="-1"></a>    db<span class="op">.</span>close<span class="op">();</span></span>
<span id="cb74-32"><a href="#cb74-32" tabindex="-1"></a>    output<span class="op">-&gt;</span>setPlainText<span class="op">(</span>s<span class="op">);</span></span>
<span id="cb74-33"><a href="#cb74-33" tabindex="-1"></a></span>
<span id="cb74-34"><a href="#cb74-34" tabindex="-1"></a>    window<span class="op">.</span>show<span class="op">();</span></span>
<span id="cb74-35"><a href="#cb74-35" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb74-36"><a href="#cb74-36" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-verbindungen-zu-externen-apis"
class="slide section level1">
<h1>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</h1>
<h2 id="netzwerkprogrammierung">Netzwerkprogrammierung</h2>
<ul>
<li><p>Qt bietet Klassen zur Netzwerkprogrammierung.</p></li>
<li><p>Alternative können libcurl oder andere C++ Netzwerklibraries
verwendet werden.</p></li>
<li><p>Nebenläufigkeit kann über <code>QThread</code>und Signale in Qt
sehr gut und sehr leicht programmiert werden.</p></li>
<li><p>Ein Pseudo-Linerares Programmiermodell mit Continuations wie in
C# oder Javascript ist in C++ 17 noch nicht möglich. (Siehe async/await
in C# und Javascript).</p></li>
<li><p>In C++ 20 gibt es Co-Routinen, die in der Lage sind, asynchrone
Funktionen zu schreiben, die wie synchrone Funktionen aussehen. (Siehe
auch: <a href="0002001.md">C++20: std::range, new literals, co-routines
(async/await)</a>)</p></li>
<li><p>Alternative zu QNetworkAccessManager: libcurl</p></li>
<li><p>Siehe: <a
href="https://curl.se/libcurl/">https://curl.se/libcurl/</a> und <a
href="https://github.com/srutz/qtmem0ry/blob/main/util.cpp">Libcurl mit
Qt</a></p></li>
</ul>
</div>
<div id="fortgeschrittene-qt-themen-verbindungen-zu-externen-apis-1"
class="slide section level1">
<h1>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</h1>
<h2 id="beispiel-http-client-mit-qnetworkaccessmanager">Beispiel HTTP
Client mit QNetworkAccessManager</h2>
<div class="sourceCode" id="cb75"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="kw">class</span> HttpClient <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span> <span class="op">{</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a>    <span class="ex">QNetworkAccessManager</span><span class="op">*</span> <span class="va">m_manager</span><span class="op">;</span></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a>    </span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a>    <span class="kw">explicit</span> HttpClient<span class="op">(</span><span class="ex">QObject</span><span class="op">*</span> parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">)</span> <span class="op">:</span> <span class="ex">QObject</span><span class="op">(</span>parent<span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a>        <span class="va">m_manager</span> <span class="op">=</span> <span class="kw">new</span> <span class="ex">QNetworkAccessManager</span><span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb75-9"><a href="#cb75-9" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb75-10"><a href="#cb75-10" tabindex="-1"></a>    </span>
<span id="cb75-11"><a href="#cb75-11" tabindex="-1"></a>    <span class="dt">void</span> get<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> url<span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-12"><a href="#cb75-12" tabindex="-1"></a>        <span class="ex">QNetworkRequest</span> request<span class="op">(</span>url<span class="op">);</span></span>
<span id="cb75-13"><a href="#cb75-13" tabindex="-1"></a>        request<span class="op">.</span>setHeader<span class="op">(</span><span class="ex">QNetworkRequest::UserAgentHeader</span><span class="op">,</span> <span class="st">&quot;MyApp/1.0&quot;</span><span class="op">);</span></span>
<span id="cb75-14"><a href="#cb75-14" tabindex="-1"></a>        <span class="ex">QNetworkReply</span><span class="op">*</span> reply <span class="op">=</span> <span class="va">m_manager</span><span class="op">-&gt;</span>get<span class="op">(</span>request<span class="op">);</span></span>
<span id="cb75-15"><a href="#cb75-15" tabindex="-1"></a>        <span class="fu">connect</span><span class="op">(</span>reply<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QNetworkReply::finished</span><span class="op">,</span></span>
<span id="cb75-16"><a href="#cb75-16" tabindex="-1"></a>                <span class="kw">this</span><span class="op">,</span> <span class="op">[</span><span class="kw">this</span><span class="op">,</span> reply<span class="op">]()</span> <span class="op">{</span></span>
<span id="cb75-17"><a href="#cb75-17" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>reply<span class="op">-&gt;</span>error<span class="op">()</span> <span class="op">==</span> <span class="ex">QNetworkReply::NoError</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-18"><a href="#cb75-18" tabindex="-1"></a>                <span class="ex">emit</span> dataReceived<span class="op">(</span>reply<span class="op">-&gt;</span>readAll<span class="op">());</span></span>
<span id="cb75-19"><a href="#cb75-19" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb75-20"><a href="#cb75-20" tabindex="-1"></a>                <span class="ex">emit</span> errorOccurred<span class="op">(</span>reply<span class="op">-&gt;</span>errorString<span class="op">());</span></span>
<span id="cb75-21"><a href="#cb75-21" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb75-22"><a href="#cb75-22" tabindex="-1"></a>            reply<span class="op">-&gt;</span>deleteLater<span class="op">();</span></span>
<span id="cb75-23"><a href="#cb75-23" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb75-24"><a href="#cb75-24" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb75-25"><a href="#cb75-25" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb75-26"><a href="#cb75-26" tabindex="-1"></a>    <span class="dt">void</span> dataReceived<span class="op">(</span><span class="at">const</span> <span class="ex">QByteArray</span><span class="op">&amp;</span> data<span class="op">);</span></span>
<span id="cb75-27"><a href="#cb75-27" tabindex="-1"></a>    <span class="dt">void</span> errorOccurred<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span><span class="op">&amp;</span> error<span class="op">);</span></span>
<span id="cb75-28"><a href="#cb75-28" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-verbindungen-zu-externen-apis-2"
class="slide section level1">
<h1>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</h1>
<h2 id="beispiel-mit-für-einen-generischen-json-client">Beispiel mit für
einen generischen JSON Client</h2>
<div class="sourceCode" id="cb76"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a><span class="co">/* jsonfetcher.h Generic JSON Fetcher */</span></span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a><span class="kw">class</span> JsonFetcher <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span></span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb76-4"><a href="#cb76-4" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb76-5"><a href="#cb76-5" tabindex="-1"></a>    <span class="kw">struct</span> FetchOptions <span class="op">{</span></span>
<span id="cb76-6"><a href="#cb76-6" tabindex="-1"></a>        <span class="ex">QString</span> url<span class="op">;</span></span>
<span id="cb76-7"><a href="#cb76-7" tabindex="-1"></a>        <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="ex">QString</span><span class="op">&gt;</span> httpMethod<span class="op">;</span> <span class="co">// POST, GET, DELETE, PUT etc</span></span>
<span id="cb76-8"><a href="#cb76-8" tabindex="-1"></a>        <span class="bu">std::</span>optional<span class="op">&lt;</span><span class="ex">QByteArray</span><span class="op">&gt;</span> data<span class="op">;</span> <span class="co">// POST / PUT upload-data</span></span>
<span id="cb76-9"><a href="#cb76-9" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb76-10"><a href="#cb76-10" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb76-11"><a href="#cb76-11" tabindex="-1"></a>    <span class="kw">explicit</span> JsonFetcher<span class="op">(</span><span class="ex">QObject</span> <span class="op">*</span>parent <span class="op">=</span> <span class="kw">nullptr</span><span class="op">);</span></span>
<span id="cb76-12"><a href="#cb76-12" tabindex="-1"></a>    <span class="dt">void</span> fetch<span class="op">(</span><span class="at">const</span> FetchOptions <span class="op">&amp;</span>options<span class="op">);</span></span>
<span id="cb76-13"><a href="#cb76-13" tabindex="-1"></a><span class="ex">signals</span><span class="op">:</span></span>
<span id="cb76-14"><a href="#cb76-14" tabindex="-1"></a>    <span class="dt">void</span> responseReceived<span class="op">(</span><span class="at">const</span> <span class="ex">QJsonDocument</span> <span class="op">&amp;</span>document<span class="op">);</span></span>
<span id="cb76-15"><a href="#cb76-15" tabindex="-1"></a>    <span class="dt">void</span> error<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>message<span class="op">);</span></span>
<span id="cb76-16"><a href="#cb76-16" tabindex="-1"></a><span class="kw">private</span> <span class="ex">slots</span><span class="op">:</span></span>
<span id="cb76-17"><a href="#cb76-17" tabindex="-1"></a>    <span class="dt">void</span> handleNetworkResponse<span class="op">(</span><span class="ex">QNetworkReply</span> <span class="op">*</span>reply<span class="op">);</span></span>
<span id="cb76-18"><a href="#cb76-18" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb76-19"><a href="#cb76-19" tabindex="-1"></a>    <span class="ex">QNetworkAccessManager</span> <span class="op">*</span>manager<span class="op">;</span></span>
<span id="cb76-20"><a href="#cb76-20" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-verbindungen-zu-externen-apis-3"
class="slide section level1">
<h1>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</h1>
<h2 id="beispiel-mit-für-einen-generischen-json-client-1">Beispiel mit
für einen generischen JSON Client</h2>
<div class="sourceCode" id="cb77"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="co">// jsonfetcher.cpp</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>JsonFetcher<span class="op">::</span>JsonFetcher<span class="op">(</span><span class="ex">QObject</span> <span class="op">*</span>parent<span class="op">)</span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>    <span class="op">:</span> <span class="ex">QObject</span><span class="op">(</span>parent<span class="op">)</span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>    <span class="op">,</span> manager<span class="op">(</span><span class="kw">new</span> <span class="ex">QNetworkAccessManager</span><span class="op">(</span><span class="kw">this</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a>    <span class="fu">connect</span><span class="op">(</span>manager<span class="op">,</span> <span class="op">&amp;</span><span class="ex">QNetworkAccessManager::finished</span><span class="op">,</span> </span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a>        <span class="kw">this</span><span class="op">,</span> <span class="op">&amp;</span>JsonFetcher<span class="op">::</span>handleNetworkResponse<span class="op">);</span></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a><span class="dt">void</span> JsonFetcher<span class="op">::</span>fetch<span class="op">(</span><span class="at">const</span> FetchOptions <span class="op">&amp;</span>options<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a>    <span class="ex">QUrl</span> url<span class="op">(</span>options<span class="op">.</span>url<span class="op">);</span></span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>url<span class="op">.</span>isValid<span class="op">())</span> <span class="op">{</span></span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a>        <span class="ex">emit</span> error<span class="op">(</span><span class="st">&quot;Invalid URL&quot;</span><span class="op">);</span></span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb77-14"><a href="#cb77-14" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-15"><a href="#cb77-15" tabindex="-1"></a>    <span class="ex">QNetworkRequest</span> request<span class="op">(</span>url<span class="op">);</span></span>
<span id="cb77-16"><a href="#cb77-16" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Fetching URL:&quot;</span> <span class="op">&lt;&lt;</span> url<span class="op">.</span>toString<span class="op">();</span></span>
<span id="cb77-17"><a href="#cb77-17" tabindex="-1"></a>    request<span class="op">.</span>setRawHeader<span class="op">(</span><span class="st">&quot;Accept&quot;</span><span class="op">,</span> <span class="st">&quot;application/json&quot;</span><span class="op">);</span></span>
<span id="cb77-18"><a href="#cb77-18" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>options<span class="op">.</span>httpMethod<span class="op">.</span>value_or<span class="op">(</span><span class="st">&quot;GET&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="st">&quot;POST&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-19"><a href="#cb77-19" tabindex="-1"></a>        request<span class="op">.</span>setHeader<span class="op">(</span><span class="ex">QNetworkRequest::ContentTypeHeader</span><span class="op">,</span> <span class="st">&quot;application/json&quot;</span><span class="op">);</span></span>
<span id="cb77-20"><a href="#cb77-20" tabindex="-1"></a>        manager<span class="op">-&gt;</span>post<span class="op">(</span>request<span class="op">,</span> options<span class="op">.</span>data<span class="op">.</span>value_or<span class="op">(</span><span class="ex">QByteArray</span><span class="op">()));</span></span>
<span id="cb77-21"><a href="#cb77-21" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb77-22"><a href="#cb77-22" tabindex="-1"></a>        manager<span class="op">-&gt;</span>get<span class="op">(</span>request<span class="op">);</span></span>
<span id="cb77-23"><a href="#cb77-23" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-24"><a href="#cb77-24" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb77-25"><a href="#cb77-25" tabindex="-1"></a></span>
<span id="cb77-26"><a href="#cb77-26" tabindex="-1"></a><span class="dt">void</span> JsonFetcher<span class="op">::</span>handleNetworkResponse<span class="op">(</span><span class="ex">QNetworkReply</span> <span class="op">*</span>reply<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-27"><a href="#cb77-27" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;network request finished 2&quot;</span><span class="op">;</span></span>
<span id="cb77-28"><a href="#cb77-28" tabindex="-1"></a>    <span class="co">/* make sure reply is deleted under all circumstances */</span></span>
<span id="cb77-29"><a href="#cb77-29" tabindex="-1"></a>    RAIIGuard guard<span class="op">([</span>reply<span class="op">]</span> <span class="op">{</span> reply<span class="op">-&gt;</span>deleteLater<span class="op">();</span> <span class="op">});</span></span>
<span id="cb77-30"><a href="#cb77-30" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;handle json response&quot;</span><span class="op">;</span></span>
<span id="cb77-31"><a href="#cb77-31" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>reply<span class="op">-&gt;</span>error<span class="op">()</span> <span class="op">!=</span> <span class="ex">QNetworkReply::NoError</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-32"><a href="#cb77-32" tabindex="-1"></a>        <span class="ex">emit</span> error<span class="op">(</span>reply<span class="op">-&gt;</span>errorString<span class="op">());</span></span>
<span id="cb77-33"><a href="#cb77-33" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb77-34"><a href="#cb77-34" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-35"><a href="#cb77-35" tabindex="-1"></a>    <span class="kw">auto</span> data <span class="op">=</span> reply<span class="op">-&gt;</span>readAll<span class="op">();</span></span>
<span id="cb77-36"><a href="#cb77-36" tabindex="-1"></a>    <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;got data&quot;</span> <span class="op">&lt;&lt;</span> data<span class="op">.</span>size<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;bytes&quot;</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;: utf8=&quot;</span> <span class="op">&lt;&lt;</span> <span class="ex">QString::fromUtf8</span><span class="op">(</span>data<span class="op">);</span></span>
<span id="cb77-37"><a href="#cb77-37" tabindex="-1"></a>    <span class="kw">auto</span> doc <span class="op">=</span> <span class="ex">QJsonDocument::fromJson</span><span class="op">(</span>data<span class="op">);</span></span>
<span id="cb77-38"><a href="#cb77-38" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>doc<span class="op">.</span>isNull<span class="op">())</span> <span class="op">{</span></span>
<span id="cb77-39"><a href="#cb77-39" tabindex="-1"></a>        <span class="ex">emit</span> error<span class="op">(</span><span class="st">&quot;Failed to parse JSON&quot;</span><span class="op">);</span></span>
<span id="cb77-40"><a href="#cb77-40" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb77-41"><a href="#cb77-41" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-42"><a href="#cb77-42" tabindex="-1"></a>    <span class="ex">emit</span> responseReceived<span class="op">(</span>doc<span class="op">);</span></span>
<span id="cb77-43"><a href="#cb77-43" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-verbindungen-zu-externen-apis-4"
class="slide section level1">
<h1>5.3 Fortgeschrittene Qt-Themen / Verbindungen zu externen APIs</h1>
<h2 id="beispiel-mit-libcurl">Beispiel mit libcurl</h2>
<div class="sourceCode" id="cb78"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="kw">class</span> HttpClient <span class="op">{</span></span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a>    HttpClient<span class="op">()</span> <span class="op">{</span></span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a>        curl_global_init<span class="op">(</span>CURL_GLOBAL_ALL<span class="op">);</span></span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a>        <span class="va">m_curl</span> <span class="op">=</span> curl_easy_init<span class="op">();</span></span>
<span id="cb78-6"><a href="#cb78-6" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-7"><a href="#cb78-7" tabindex="-1"></a>    </span>
<span id="cb78-8"><a href="#cb78-8" tabindex="-1"></a>    <span class="op">~</span>HttpClient<span class="op">()</span> <span class="op">{</span></span>
<span id="cb78-9"><a href="#cb78-9" tabindex="-1"></a>        curl_easy_cleanup<span class="op">(</span><span class="va">m_curl</span><span class="op">);</span></span>
<span id="cb78-10"><a href="#cb78-10" tabindex="-1"></a>        curl_global_cleanup<span class="op">();</span></span>
<span id="cb78-11"><a href="#cb78-11" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-12"><a href="#cb78-12" tabindex="-1"></a>    </span>
<span id="cb78-13"><a href="#cb78-13" tabindex="-1"></a>    <span class="dt">void</span> get<span class="op">(</span><span class="at">const</span> <span class="bu">std::</span>string<span class="op">&amp;</span> url<span class="op">)</span> <span class="op">{</span></span>
<span id="cb78-14"><a href="#cb78-14" tabindex="-1"></a>        curl_easy_setopt<span class="op">(</span><span class="va">m_curl</span><span class="op">,</span> CURLOPT_URL<span class="op">,</span> url<span class="op">.</span>c_str<span class="op">());</span></span>
<span id="cb78-15"><a href="#cb78-15" tabindex="-1"></a>        curl_easy_setopt<span class="op">(</span><span class="va">m_curl</span><span class="op">,</span> CURLOPT_WRITEFUNCTION<span class="op">,</span> writeCallback<span class="op">);</span></span>
<span id="cb78-16"><a href="#cb78-16" tabindex="-1"></a>        curl_easy_setopt<span class="op">(</span><span class="va">m_curl</span><span class="op">,</span> CURLOPT_WRITEDATA<span class="op">,</span> <span class="op">&amp;</span><span class="va">m_data</span><span class="op">);</span></span>
<span id="cb78-17"><a href="#cb78-17" tabindex="-1"></a>        curl_easy_perform<span class="op">(</span><span class="va">m_curl</span><span class="op">);</span></span>
<span id="cb78-18"><a href="#cb78-18" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-19"><a href="#cb78-19" tabindex="-1"></a>    </span>
<span id="cb78-20"><a href="#cb78-20" tabindex="-1"></a>    <span class="bu">std::</span>string data<span class="op">()</span> <span class="at">const</span> <span class="op">{</span></span>
<span id="cb78-21"><a href="#cb78-21" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">m_data</span><span class="op">;</span></span>
<span id="cb78-22"><a href="#cb78-22" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-23"><a href="#cb78-23" tabindex="-1"></a></span>
<span id="cb78-24"><a href="#cb78-24" tabindex="-1"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb78-25"><a href="#cb78-25" tabindex="-1"></a>    CURL<span class="op">*</span> <span class="va">m_curl</span><span class="op">;</span></span>
<span id="cb78-26"><a href="#cb78-26" tabindex="-1"></a>    <span class="bu">std::</span>string <span class="va">m_data</span><span class="op">;</span></span>
<span id="cb78-27"><a href="#cb78-27" tabindex="-1"></a></span>
<span id="cb78-28"><a href="#cb78-28" tabindex="-1"></a>    <span class="at">static</span> <span class="dt">size_t</span> writeCallback<span class="op">(</span><span class="dt">char</span><span class="op">*</span> ptr<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> <span class="dt">size_t</span> nmemb<span class="op">,</span> <span class="bu">std::</span>string<span class="op">*</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb78-29"><a href="#cb78-29" tabindex="-1"></a>        data<span class="op">-&gt;</span>append<span class="op">(</span>ptr<span class="op">,</span> size <span class="op">*</span> nmemb<span class="op">);</span></span>
<span id="cb78-30"><a href="#cb78-30" tabindex="-1"></a>        <span class="cf">return</span> size <span class="op">*</span> nmemb<span class="op">;</span></span>
<span id="cb78-31"><a href="#cb78-31" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-32"><a href="#cb78-32" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-erweiterung-von-qt-mit-plugins"
class="slide section level1">
<h1>5.4 Fortgeschrittene Qt-Themen / Erweiterung von Qt mit Plugins</h1>
<h2 id="plugin-usecases">Plugin Usecases</h2>
<ul>
<li>Plugins für Qt empfehlen sich für Szenerien, in denen die Anwendung
modular zur Laufzeit über DLLs /Shared-Objects erweitert werden soll.
<ul>
<li>Ein Texteditor, der verschiedene Dateiformate unterstützt.</li>
<li>Ein CAD-Programm, das verschiedene Dateiformate unterstützt.</li>
<li>Eine Anwendung die Daten in einem von externen Entwicklern
entwickelten Widget anzeigt.</li>
</ul></li>
<li>Letztendlich sind Qt-Plugins eine plattform-unabhängige Abstraktion
die man anstelle von dlopen/dlsym auf Unix oder
LoadLibrary/GetProcAddress auf Windows verwenden kann.</li>
</ul>
</div>
<div id="fortgeschrittene-qt-themen-erweiterung-von-qt-mit-plugins-1"
class="slide section level1">
<h1>5.4 Fortgeschrittene Qt-Themen / Erweiterung von Qt mit Plugins</h1>
<h2 id="plugin-interface-definieren">Plugin Interface definieren</h2>
<div class="sourceCode" id="cb79"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="pp">#ifndef MYPLUGININTERFACE_H</span></span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a><span class="pp">#define MYPLUGININTERFACE_H</span></span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QtPlugin&gt;</span></span>
<span id="cb79-5"><a href="#cb79-5" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" tabindex="-1"></a><span class="co">// Define an interface with at least one pure virtual function</span></span>
<span id="cb79-7"><a href="#cb79-7" tabindex="-1"></a><span class="kw">class</span> MyPluginInterface</span>
<span id="cb79-8"><a href="#cb79-8" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb79-9"><a href="#cb79-9" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb79-10"><a href="#cb79-10" tabindex="-1"></a>    <span class="kw">virtual</span> <span class="op">~</span>MyPluginInterface<span class="op">()</span> <span class="op">{}</span></span>
<span id="cb79-11"><a href="#cb79-11" tabindex="-1"></a>    <span class="kw">virtual</span> <span class="ex">QString</span> pluginName<span class="op">()</span> <span class="at">const</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb79-12"><a href="#cb79-12" tabindex="-1"></a>    <span class="kw">virtual</span> <span class="ex">QString</span> customFunction1<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>input<span class="op">)</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb79-13"><a href="#cb79-13" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb79-14"><a href="#cb79-14" tabindex="-1"></a></span>
<span id="cb79-15"><a href="#cb79-15" tabindex="-1"></a><span class="co">// Export the interface for use in plugins</span></span>
<span id="cb79-16"><a href="#cb79-16" tabindex="-1"></a><span class="pp">#define MyPluginInterface_iid </span><span class="st">&quot;com.example.MyPluginInterface&quot;</span></span>
<span id="cb79-17"><a href="#cb79-17" tabindex="-1"></a><span class="ex">Q_DECLARE_INTERFACE</span><span class="op">(</span>MyPluginInterface<span class="op">,</span> MyPluginInterface_iid<span class="op">)</span></span>
<span id="cb79-18"><a href="#cb79-18" tabindex="-1"></a></span>
<span id="cb79-19"><a href="#cb79-19" tabindex="-1"></a><span class="pp">#endif </span><span class="co">// MYPLUGININTERFACE_H</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-erweiterung-von-qt-mit-plugins-2"
class="slide section level1">
<h1>5.4 Fortgeschrittene Qt-Themen / Erweiterung von Qt mit Plugins</h1>
<h2 id="plugin-interface-implementieren">Plugin Interface
implementieren</h2>
<div class="sourceCode" id="cb80"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;MyPluginInterface.h&quot;</span></span>
<span id="cb80-2"><a href="#cb80-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QObject&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" tabindex="-1"></a><span class="kw">class</span> MyPlugin <span class="op">:</span> <span class="kw">public</span> <span class="ex">QObject</span><span class="op">,</span> <span class="kw">public</span> MyPluginInterface</span>
<span id="cb80-5"><a href="#cb80-5" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb80-6"><a href="#cb80-6" tabindex="-1"></a>    <span class="ex">Q_OBJECT</span></span>
<span id="cb80-7"><a href="#cb80-7" tabindex="-1"></a>    <span class="ex">Q_PLUGIN_METADATA</span><span class="op">(</span>IID MyPluginInterface_iid<span class="op">)</span></span>
<span id="cb80-8"><a href="#cb80-8" tabindex="-1"></a>    <span class="ex">Q_INTERFACES</span><span class="op">(</span>MyPluginInterface<span class="op">)</span></span>
<span id="cb80-9"><a href="#cb80-9" tabindex="-1"></a></span>
<span id="cb80-10"><a href="#cb80-10" tabindex="-1"></a><span class="kw">public</span><span class="op">:</span></span>
<span id="cb80-11"><a href="#cb80-11" tabindex="-1"></a>    <span class="ex">QString</span> pluginName<span class="op">()</span> <span class="at">const</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb80-12"><a href="#cb80-12" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Example Plugin&quot;</span><span class="op">;</span></span>
<span id="cb80-13"><a href="#cb80-13" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-14"><a href="#cb80-14" tabindex="-1"></a>    <span class="ex">QString</span> customFunction1<span class="op">(</span><span class="at">const</span> <span class="ex">QString</span> <span class="op">&amp;</span>input<span class="op">)</span> <span class="kw">override</span> <span class="op">{</span></span>
<span id="cb80-15"><a href="#cb80-15" tabindex="-1"></a>        <span class="cf">return</span> processInput<span class="op">(</span>input<span class="op">);</span></span>
<span id="cb80-16"><a href="#cb80-16" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-17"><a href="#cb80-17" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
</div>
<div id="fortgeschrittene-qt-themen-erweiterung-von-qt-mit-plugins-3"
class="slide section level1">
<h1>5.4 Fortgeschrittene Qt-Themen / Erweiterung von Qt mit Plugins</h1>
<h2 id="plugin-verwenden-mit-qpluginloader">Plugin verwenden mit
QPluginLoader</h2>
<div class="sourceCode" id="cb81"><pre
class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QPluginLoader&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;QDebug&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;MyPluginInterface.h&quot;</span></span>
<span id="cb81-4"><a href="#cb81-4" tabindex="-1"></a></span>
<span id="cb81-5"><a href="#cb81-5" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb81-6"><a href="#cb81-6" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb81-7"><a href="#cb81-7" tabindex="-1"></a>    <span class="ex">QCoreApplication</span> app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb81-8"><a href="#cb81-8" tabindex="-1"></a>    <span class="ex">QPluginLoader</span> loader<span class="op">(</span><span class="st">&quot;path/to/plugin/libMyPlugin.so&quot;</span><span class="op">);</span> <span class="co">// Adjust the path</span></span>
<span id="cb81-9"><a href="#cb81-9" tabindex="-1"></a>    <span class="ex">QObject</span> <span class="op">*</span>plugin <span class="op">=</span> loader<span class="op">.</span>instance<span class="op">();</span></span>
<span id="cb81-10"><a href="#cb81-10" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>plugin<span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-11"><a href="#cb81-11" tabindex="-1"></a>        MyPluginInterface <span class="op">*</span>myPlugin <span class="op">=</span> <span class="fu">qobject_cast</span><span class="op">&lt;</span>MyPluginInterface <span class="op">*&gt;(</span>plugin<span class="op">);</span></span>
<span id="cb81-12"><a href="#cb81-12" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>myPlugin<span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-13"><a href="#cb81-13" tabindex="-1"></a>            <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Loaded plugin:&quot;</span> <span class="op">&lt;&lt;</span> myPlugin<span class="op">-&gt;</span>pluginName<span class="op">();</span></span>
<span id="cb81-14"><a href="#cb81-14" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb81-15"><a href="#cb81-15" tabindex="-1"></a>            <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Failed to cast plugin interface.&quot;</span><span class="op">;</span></span>
<span id="cb81-16"><a href="#cb81-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb81-17"><a href="#cb81-17" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb81-18"><a href="#cb81-18" tabindex="-1"></a>        <span class="fu">qDebug</span><span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;Failed to load plugin:&quot;</span> <span class="op">&lt;&lt;</span> loader<span class="op">.</span>errorString<span class="op">();</span></span>
<span id="cb81-19"><a href="#cb81-19" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb81-20"><a href="#cb81-20" tabindex="-1"></a></span>
<span id="cb81-21"><a href="#cb81-21" tabindex="-1"></a>    <span class="cf">return</span> app<span class="op">.</span>exec<span class="op">();</span></span>
<span id="cb81-22"><a href="#cb81-22" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div
id="veröffentlichung-ihrer-qt-anwendung-erstellen-sie-ein-installationsprogramm"
class="slide section level1">
<h1>6.1 Veröffentlichung Ihrer Qt-Anwendung / Erstellen Sie ein
Installationsprogramm</h1>
<h2 id="das-qt-installer-framework">Das Qt Installer Framework</h2>
<ul>
<li>Als Zusatzoption ist das Qt Installer Framework installierbar.</li>
<li>Das Qt Installer Framework ist ein Tool, um Installationsprogramme
für Ihre Qt-Anwendungen zu erstellen.</li>
<li>Alternativ kann man Qt-Anwendungen auch noch mit NSIS oder Inno
Setup verpacken.</li>
<li>Unter Linux besteht die Möglichkeit, ein DEB oder RPM-Paket zu
erstellen und außerdem die Dependencies von der Distribution zu nutzen.
Dadurch wird das Programmpaket sehr klein.</li>
</ul>
</div>
<div
id="veröffentlichung-ihrer-qt-anwendung-erstellen-sie-ein-installationsprogramm-1"
class="slide section level1">
<h1>6.1 Veröffentlichung Ihrer Qt-Anwendung / Erstellen Sie ein
Installationsprogramm</h1>
<h2 id="code-signing">Code Signing</h2>
<ul>
<li><p>Unter MacOS und Windows ist es notwendig, den Code zu signieren.
Dazu gibt es unter Windows 2 Klassen von Code-Signing-Zertifikaten:</p>
<ul>
<li>EV-Zertifikate (Extended Validation) sind teuer und kosten mehrere
hundert Euro pro Jahr.</li>
<li>OV-Zertifikate (Organization Validation) sind günstiger und kosten
ca. 100 Euro pro Jahr.</li>
</ul></li>
<li><p>Unter MacOS bekommt man ein Code-Signing Zertifkat zusammen mit
seinem Apple Developer Account. Dieser kostet 99 USD pro Jahr.</p></li>
<li><p>Unter Linux ist Code-Signing nicht notwendig, da es keine
Zertifikate gibt, die von allen Distributionen akzeptiert
werden.</p></li>
<li><p>Ohne Zertifikat können die Anwendungen nur unter der Umgehung der
Sicherheitswarnungen installiert werden. Dies ist jedoch nicht
empfehlenswert, da es das Vertrauen der Benutzer in die Anwendung
verringert (oder zerstört).</p></li>
<li><p>Um den MacOS Appstore für die Veröffentlichung zu nutzen, muss
man die Anwendung über XCode signieren und in den MacOS Appstore
hochladen. Außerdem muss die Anwendung den MacOS Appstore-Richtlinien
entsprechen.</p></li>
</ul>
</div>
<div
id="veröffentlichung-ihrer-qt-anwendung-erstellen-sie-ein-installationsprogramm-2"
class="slide section level1">
<h1>6.1 Veröffentlichung Ihrer Qt-Anwendung / Erstellen Sie ein
Installationsprogramm</h1>
<h2 id="windeployqt-und-erzeugung-von-msi-dateien">Windeployqt und
Erzeugung von MSI-Dateien</h2>
<ul>
<li><p>Windeployqt ist ein Tool, um alle notwendigen DLLs und
Bibliotheken in das Verzeichnis der Anwendung zu kopieren.</p></li>
<li><p>Anschließend kann man sehr einfach eine MSI-Datei erstellen, die
die Anwendung und alle notwendigen Dateien enthält.</p></li>
</ul>
</div>
</body>
</html>
